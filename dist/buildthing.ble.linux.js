!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("buildthing-bluetooth-hci-socket")):"function"==typeof define&&define.amd?define("buildthing",["buildthing-bluetooth-hci-socket"],e):"object"==typeof exports?exports.buildthing=e(require("buildthing-bluetooth-hci-socket")):t.buildthing=e(t["buildthing-bluetooth-hci-socket"])}(global,(function(t){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/dist",n(n.s=362)}([function(t,e,n){var r=n(2),i=n(20),o=n(11),a=n(12),s=n(21),c=function(t,e,n){var u,l,f,h,p=t&c.F,d=t&c.G,y=t&c.S,v=t&c.P,m=t&c.B,g=d?r:y?r[e]||(r[e]={}):(r[e]||{}).prototype,_=d?i:i[e]||(i[e]={}),b=_.prototype||(_.prototype={});for(u in d&&(n=e),n)f=((l=!p&&g&&void 0!==g[u])?g:n)[u],h=m&&l?s(f,r):v&&"function"==typeof f?s(Function.call,f):f,g&&a(g,u,f,t&c.U),_[u]!=f&&o(_,u,h),v&&b[u]!=f&&(b[u]=f)};r.core=i,c.F=1,c.G=2,c.S=4,c.P=8,c.B=16,c.W=32,c.U=64,c.R=128,t.exports=c},function(t,e,n){var r=n(4);t.exports=function(t){if(!r(t))throw TypeError(t+" is not an object!");return t}},function(t,e){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e,n){var r=n(49)("wks"),i=n(35),o=n(2).Symbol,a="function"==typeof o;(t.exports=function(t){return r[t]||(r[t]=a&&o[t]||(a?o:i)("Symbol."+t))}).store=r},function(t,e,n){var r=n(23),i=Math.min;t.exports=function(t){return t>0?i(r(t),9007199254740991):0}},function(t,e,n){t.exports=!n(3)((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},function(t,e,n){var r=n(1),i=n(99),o=n(25),a=Object.defineProperty;e.f=n(7)?Object.defineProperty:function(t,e,n){if(r(t),e=o(e,!0),r(n),i)try{return a(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},function(t,e,n){var r=n(26);t.exports=function(t){return Object(r(t))}},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e,n){var r=n(8),i=n(34);t.exports=n(7)?function(t,e,n){return r.f(t,e,i(1,n))}:function(t,e,n){return t[e]=n,t}},function(t,e,n){var r=n(2),i=n(11),o=n(15),a=n(35)("src"),s=n(141),c=(""+s).split("toString");n(20).inspectSource=function(t){return s.call(t)},(t.exports=function(t,e,n,s){var u="function"==typeof n;u&&(o(n,"name")||i(n,"name",e)),t[e]!==n&&(u&&(o(n,a)||i(n,a,t[e]?""+t[e]:c.join(String(e)))),t===r?t[e]=n:s?t[e]?t[e]=n:i(t,e,n):(delete t[e],i(t,e,n)))})(Function.prototype,"toString",(function(){return"function"==typeof this&&this[a]||s.call(this)}))},function(t,e,n){var r=n(0),i=n(3),o=n(26),a=/"/g,s=function(t,e,n,r){var i=String(o(t)),s="<"+e;return""!==n&&(s+=" "+n+'="'+String(r).replace(a,"&quot;")+'"'),s+">"+i+"</"+e+">"};t.exports=function(t,e){var n={};n[t]=e(s),r(r.P+r.F*i((function(){var e=""[t]('"');return e!==e.toLowerCase()||e.split('"').length>3})),"String",n)}},function(t,e){t.exports=require("util")},function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},function(t,e,n){var r=n(50),i=n(26);t.exports=function(t){return r(i(t))}},function(t,e,n){var r=n(51),i=n(34),o=n(16),a=n(25),s=n(15),c=n(99),u=Object.getOwnPropertyDescriptor;e.f=n(7)?u:function(t,e){if(t=o(t),e=a(e,!0),c)try{return u(t,e)}catch(t){}if(s(t,e))return i(!r.f.call(t,e),t[e])}},function(t,e,n){var r=n(15),i=n(9),o=n(72)("IE_PROTO"),a=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=i(t),r(t,o)?t[o]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?a:null}},function(t,e){t.exports=require("events")},function(t,e){var n=t.exports={version:"2.6.12"};"number"==typeof __e&&(__e=n)},function(t,e,n){var r=n(10);t.exports=function(t,e,n){if(r(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)}}return function(){return t.apply(e,arguments)}}},function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},function(t,e){var n=Math.ceil,r=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?r:n)(t)}},function(t,e,n){"use strict";var r=n(3);t.exports=function(t,e){return!!t&&r((function(){e?t.call(null,(function(){}),1):t.call(null)}))}},function(t,e,n){var r=n(4);t.exports=function(t,e){if(!r(t))return t;var n,i;if(e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;if("function"==typeof(n=t.valueOf)&&!r(i=n.call(t)))return i;if(!e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;throw TypeError("Can't convert object to primitive value")}},function(t,e){t.exports=function(t){if(null==t)throw TypeError("Can't call method on  "+t);return t}},function(t,e,n){var r=n(0),i=n(20),o=n(3);t.exports=function(t,e){var n=(i.Object||{})[t]||Object[t],a={};a[t]=e(n),r(r.S+r.F*o((function(){n(1)})),"Object",a)}},function(t,e,n){var r=n(21),i=n(50),o=n(9),a=n(6),s=n(88);t.exports=function(t,e){var n=1==t,c=2==t,u=3==t,l=4==t,f=6==t,h=5==t||f,p=e||s;return function(e,s,d){for(var y,v,m=o(e),g=i(m),_=r(s,d,3),b=a(g.length),E=0,w=n?p(e,b):c?p(e,0):void 0;b>E;E++)if((h||E in g)&&(v=_(y=g[E],E,m),t))if(n)w[E]=v;else if(v)switch(t){case 3:return!0;case 5:return y;case 6:return E;case 2:w.push(y)}else if(l)return!1;return f?-1:u||l?l:w}}},function(t,e,n){"use strict";if(n(7)){var r=n(31),i=n(2),o=n(3),a=n(0),s=n(65),c=n(96),u=n(21),l=n(41),f=n(34),h=n(11),p=n(43),d=n(23),y=n(6),v=n(127),m=n(37),g=n(25),_=n(15),b=n(46),E=n(4),w=n(9),S=n(85),I=n(38),C=n(18),T=n(39).f,A=n(87),k=n(35),P=n(5),R=n(28),O=n(55),D=n(53),x=n(90),U=n(48),N=n(60),B=n(40),M=n(89),L=n(116),j=n(8),F=n(17),H=j.f,G=F.f,V=i.RangeError,Y=i.TypeError,W=i.Uint8Array,q=Array.prototype,X=c.ArrayBuffer,$=c.DataView,Q=R(0),Z=R(2),z=R(3),K=R(4),J=R(5),tt=R(6),et=O(!0),nt=O(!1),rt=x.values,it=x.keys,ot=x.entries,at=q.lastIndexOf,st=q.reduce,ct=q.reduceRight,ut=q.join,lt=q.sort,ft=q.slice,ht=q.toString,pt=q.toLocaleString,dt=P("iterator"),yt=P("toStringTag"),vt=k("typed_constructor"),mt=k("def_constructor"),gt=s.CONSTR,_t=s.TYPED,bt=s.VIEW,Et=R(1,(function(t,e){return Tt(D(t,t[mt]),e)})),wt=o((function(){return 1===new W(new Uint16Array([1]).buffer)[0]})),St=!!W&&!!W.prototype.set&&o((function(){new W(1).set({})})),It=function(t,e){var n=d(t);if(n<0||n%e)throw V("Wrong offset!");return n},Ct=function(t){if(E(t)&&_t in t)return t;throw Y(t+" is not a typed array!")},Tt=function(t,e){if(!E(t)||!(vt in t))throw Y("It is not a typed array constructor!");return new t(e)},At=function(t,e){return kt(D(t,t[mt]),e)},kt=function(t,e){for(var n=0,r=e.length,i=Tt(t,r);r>n;)i[n]=e[n++];return i},Pt=function(t,e,n){H(t,e,{get:function(){return this._d[n]}})},Rt=function(t){var e,n,r,i,o,a,s=w(t),c=arguments.length,l=c>1?arguments[1]:void 0,f=void 0!==l,h=A(s);if(null!=h&&!S(h)){for(a=h.call(s),r=[],e=0;!(o=a.next()).done;e++)r.push(o.value);s=r}for(f&&c>2&&(l=u(l,arguments[2],2)),e=0,n=y(s.length),i=Tt(this,n);n>e;e++)i[e]=f?l(s[e],e):s[e];return i},Ot=function(){for(var t=0,e=arguments.length,n=Tt(this,e);e>t;)n[t]=arguments[t++];return n},Dt=!!W&&o((function(){pt.call(new W(1))})),xt=function(){return pt.apply(Dt?ft.call(Ct(this)):Ct(this),arguments)},Ut={copyWithin:function(t,e){return L.call(Ct(this),t,e,arguments.length>2?arguments[2]:void 0)},every:function(t){return K(Ct(this),t,arguments.length>1?arguments[1]:void 0)},fill:function(t){return M.apply(Ct(this),arguments)},filter:function(t){return At(this,Z(Ct(this),t,arguments.length>1?arguments[1]:void 0))},find:function(t){return J(Ct(this),t,arguments.length>1?arguments[1]:void 0)},findIndex:function(t){return tt(Ct(this),t,arguments.length>1?arguments[1]:void 0)},forEach:function(t){Q(Ct(this),t,arguments.length>1?arguments[1]:void 0)},indexOf:function(t){return nt(Ct(this),t,arguments.length>1?arguments[1]:void 0)},includes:function(t){return et(Ct(this),t,arguments.length>1?arguments[1]:void 0)},join:function(t){return ut.apply(Ct(this),arguments)},lastIndexOf:function(t){return at.apply(Ct(this),arguments)},map:function(t){return Et(Ct(this),t,arguments.length>1?arguments[1]:void 0)},reduce:function(t){return st.apply(Ct(this),arguments)},reduceRight:function(t){return ct.apply(Ct(this),arguments)},reverse:function(){for(var t,e=Ct(this).length,n=Math.floor(e/2),r=0;r<n;)t=this[r],this[r++]=this[--e],this[e]=t;return this},some:function(t){return z(Ct(this),t,arguments.length>1?arguments[1]:void 0)},sort:function(t){return lt.call(Ct(this),t)},subarray:function(t,e){var n=Ct(this),r=n.length,i=m(t,r);return new(D(n,n[mt]))(n.buffer,n.byteOffset+i*n.BYTES_PER_ELEMENT,y((void 0===e?r:m(e,r))-i))}},Nt=function(t,e){return At(this,ft.call(Ct(this),t,e))},Bt=function(t){Ct(this);var e=It(arguments[1],1),n=this.length,r=w(t),i=y(r.length),o=0;if(i+e>n)throw V("Wrong length!");for(;o<i;)this[e+o]=r[o++]},Mt={entries:function(){return ot.call(Ct(this))},keys:function(){return it.call(Ct(this))},values:function(){return rt.call(Ct(this))}},Lt=function(t,e){return E(t)&&t[_t]&&"symbol"!=typeof e&&e in t&&String(+e)==String(e)},jt=function(t,e){return Lt(t,e=g(e,!0))?f(2,t[e]):G(t,e)},Ft=function(t,e,n){return!(Lt(t,e=g(e,!0))&&E(n)&&_(n,"value"))||_(n,"get")||_(n,"set")||n.configurable||_(n,"writable")&&!n.writable||_(n,"enumerable")&&!n.enumerable?H(t,e,n):(t[e]=n.value,t)};gt||(F.f=jt,j.f=Ft),a(a.S+a.F*!gt,"Object",{getOwnPropertyDescriptor:jt,defineProperty:Ft}),o((function(){ht.call({})}))&&(ht=pt=function(){return ut.call(this)});var Ht=p({},Ut);p(Ht,Mt),h(Ht,dt,Mt.values),p(Ht,{slice:Nt,set:Bt,constructor:function(){},toString:ht,toLocaleString:xt}),Pt(Ht,"buffer","b"),Pt(Ht,"byteOffset","o"),Pt(Ht,"byteLength","l"),Pt(Ht,"length","e"),H(Ht,yt,{get:function(){return this[_t]}}),t.exports=function(t,e,n,c){var u=t+((c=!!c)?"Clamped":"")+"Array",f="get"+t,p="set"+t,d=i[u],m=d||{},g=d&&C(d),_=!d||!s.ABV,w={},S=d&&d.prototype,A=function(t,n){H(t,n,{get:function(){return function(t,n){var r=t._d;return r.v[f](n*e+r.o,wt)}(this,n)},set:function(t){return function(t,n,r){var i=t._d;c&&(r=(r=Math.round(r))<0?0:r>255?255:255&r),i.v[p](n*e+i.o,r,wt)}(this,n,t)},enumerable:!0})};_?(d=n((function(t,n,r,i){l(t,d,u,"_d");var o,a,s,c,f=0,p=0;if(E(n)){if(!(n instanceof X||"ArrayBuffer"==(c=b(n))||"SharedArrayBuffer"==c))return _t in n?kt(d,n):Rt.call(d,n);o=n,p=It(r,e);var m=n.byteLength;if(void 0===i){if(m%e)throw V("Wrong length!");if((a=m-p)<0)throw V("Wrong length!")}else if((a=y(i)*e)+p>m)throw V("Wrong length!");s=a/e}else s=v(n),o=new X(a=s*e);for(h(t,"_d",{b:o,o:p,l:a,e:s,v:new $(o)});f<s;)A(t,f++)})),S=d.prototype=I(Ht),h(S,"constructor",d)):o((function(){d(1)}))&&o((function(){new d(-1)}))&&N((function(t){new d,new d(null),new d(1.5),new d(t)}),!0)||(d=n((function(t,n,r,i){var o;return l(t,d,u),E(n)?n instanceof X||"ArrayBuffer"==(o=b(n))||"SharedArrayBuffer"==o?void 0!==i?new m(n,It(r,e),i):void 0!==r?new m(n,It(r,e)):new m(n):_t in n?kt(d,n):Rt.call(d,n):new m(v(n))})),Q(g!==Function.prototype?T(m).concat(T(g)):T(m),(function(t){t in d||h(d,t,m[t])})),d.prototype=S,r||(S.constructor=d));var k=S[dt],P=!!k&&("values"==k.name||null==k.name),R=Mt.values;h(d,vt,!0),h(S,_t,u),h(S,bt,!0),h(S,mt,d),(c?new d(1)[yt]==u:yt in S)||H(S,yt,{get:function(){return u}}),w[u]=d,a(a.G+a.W+a.F*(d!=m),w),a(a.S,u,{BYTES_PER_ELEMENT:e}),a(a.S+a.F*o((function(){m.of.call(d,1)})),u,{from:Rt,of:Ot}),"BYTES_PER_ELEMENT"in S||h(S,"BYTES_PER_ELEMENT",e),a(a.P,u,Ut),B(u),a(a.P+a.F*St,u,{set:Bt}),a(a.P+a.F*!P,u,Mt),r||S.toString==ht||(S.toString=ht),a(a.P+a.F*o((function(){new d(1).slice()})),u,{slice:Nt}),a(a.P+a.F*(o((function(){return[1,2].toLocaleString()!=new d([1,2]).toLocaleString()}))||!o((function(){S.toLocaleString.call([1,2])}))),u,{toLocaleString:xt}),U[u]=P?k:R,r||P||h(S,dt,R)}}else t.exports=function(){}},function(t,e,n){var r=n(122),i=n(0),o=n(49)("metadata"),a=o.store||(o.store=new(n(125))),s=function(t,e,n){var i=a.get(t);if(!i){if(!n)return;a.set(t,i=new r)}var o=i.get(e);if(!o){if(!n)return;i.set(e,o=new r)}return o};t.exports={store:a,map:s,has:function(t,e,n){var r=s(e,n,!1);return void 0!==r&&r.has(t)},get:function(t,e,n){var r=s(e,n,!1);return void 0===r?void 0:r.get(t)},set:function(t,e,n,r){s(n,r,!0).set(t,e)},keys:function(t,e){var n=s(t,e,!1),r=[];return n&&n.forEach((function(t,e){r.push(e)})),r},key:function(t){return void 0===t||"symbol"==typeof t?t:String(t)},exp:function(t){i(i.S,"Reflect",t)}}},function(t,e){t.exports=!1},function(t,e,n){var r=n(35)("meta"),i=n(4),o=n(15),a=n(8).f,s=0,c=Object.isExtensible||function(){return!0},u=!n(3)((function(){return c(Object.preventExtensions({}))})),l=function(t){a(t,r,{value:{i:"O"+ ++s,w:{}}})},f=t.exports={KEY:r,NEED:!1,fastKey:function(t,e){if(!i(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!o(t,r)){if(!c(t))return"F";if(!e)return"E";l(t)}return t[r].i},getWeak:function(t,e){if(!o(t,r)){if(!c(t))return!0;if(!e)return!1;l(t)}return t[r].w},onFreeze:function(t){return u&&f.NEED&&c(t)&&!o(t,r)&&l(t),t}}},function(t,e,n){var r=n(5)("unscopables"),i=Array.prototype;null==i[r]&&n(11)(i,r,{}),t.exports=function(t){i[r][t]=!0}},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e){var n=0,r=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++n+r).toString(36))}},function(t,e,n){var r=n(101),i=n(73);t.exports=Object.keys||function(t){return r(t,i)}},function(t,e,n){var r=n(23),i=Math.max,o=Math.min;t.exports=function(t,e){return(t=r(t))<0?i(t+e,0):o(t,e)}},function(t,e,n){var r=n(1),i=n(102),o=n(73),a=n(72)("IE_PROTO"),s=function(){},c=function(){var t,e=n(70)("iframe"),r=o.length;for(e.style.display="none",n(74).appendChild(e),e.src="javascript:",(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),c=t.F;r--;)delete c.prototype[o[r]];return c()};t.exports=Object.create||function(t,e){var n;return null!==t?(s.prototype=r(t),n=new s,s.prototype=null,n[a]=t):n=c(),void 0===e?n:i(n,e)}},function(t,e,n){var r=n(101),i=n(73).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return r(t,i)}},function(t,e,n){"use strict";var r=n(2),i=n(8),o=n(7),a=n(5)("species");t.exports=function(t){var e=r[t];o&&e&&!e[a]&&i.f(e,a,{configurable:!0,get:function(){return this}})}},function(t,e){t.exports=function(t,e,n,r){if(!(t instanceof e)||void 0!==r&&r in t)throw TypeError(n+": incorrect invocation!");return t}},function(t,e,n){var r=n(21),i=n(114),o=n(85),a=n(1),s=n(6),c=n(87),u={},l={};(e=t.exports=function(t,e,n,f,h){var p,d,y,v,m=h?function(){return t}:c(t),g=r(n,f,e?2:1),_=0;if("function"!=typeof m)throw TypeError(t+" is not iterable!");if(o(m)){for(p=s(t.length);p>_;_++)if((v=e?g(a(d=t[_])[0],d[1]):g(t[_]))===u||v===l)return v}else for(y=m.call(t);!(d=y.next()).done;)if((v=i(y,g,d.value,e))===u||v===l)return v}).BREAK=u,e.RETURN=l},function(t,e,n){var r=n(12);t.exports=function(t,e,n){for(var i in e)r(t,i,e[i],n);return t}},function(t,e,n){var r=n(4);t.exports=function(t,e){if(!r(t)||t._t!==e)throw TypeError("Incompatible receiver, "+e+" required!");return t}},function(t,e,n){var r=n(8).f,i=n(15),o=n(5)("toStringTag");t.exports=function(t,e,n){t&&!i(t=n?t:t.prototype,o)&&r(t,o,{configurable:!0,value:e})}},function(t,e,n){var r=n(22),i=n(5)("toStringTag"),o="Arguments"==r(function(){return arguments}());t.exports=function(t){var e,n,a;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),i))?n:o?r(e):"Object"==(a=r(e))&&"function"==typeof e.callee?"Arguments":a}},function(t,e,n){var r=n(0),i=n(26),o=n(3),a=n(76),s="["+a+"]",c=RegExp("^"+s+s+"*"),u=RegExp(s+s+"*$"),l=function(t,e,n){var i={},s=o((function(){return!!a[t]()||"​"!="​"[t]()})),c=i[t]=s?e(f):a[t];n&&(i[n]=c),r(r.P+r.F*s,"String",i)},f=l.trim=function(t,e){return t=String(i(t)),1&e&&(t=t.replace(c,"")),2&e&&(t=t.replace(u,"")),t};t.exports=l},function(t,e){t.exports={}},function(t,e,n){var r=n(20),i=n(2),o=i["__core-js_shared__"]||(i["__core-js_shared__"]={});(t.exports=function(t,e){return o[t]||(o[t]=void 0!==e?e:{})})("versions",[]).push({version:r.version,mode:n(31)?"pure":"global",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"})},function(t,e,n){var r=n(22);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==r(t)?t.split(""):Object(t)}},function(t,e){e.f={}.propertyIsEnumerable},function(t,e,n){"use strict";var r=n(1);t.exports=function(){var t=r(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},function(t,e,n){var r=n(1),i=n(10),o=n(5)("species");t.exports=function(t,e){var n,a=r(t).constructor;return void 0===a||null==(n=r(a)[o])?e:i(n)}},function(t,e,n){"undefined"==typeof process||"renderer"===process.type||!0===process.browser||process.__nwjs?t.exports=n(340):t.exports=n(342)},function(t,e,n){var r=n(16),i=n(6),o=n(37);t.exports=function(t){return function(e,n,a){var s,c=r(e),u=i(c.length),l=o(a,u);if(t&&n!=n){for(;u>l;)if((s=c[l++])!=s)return!0}else for(;u>l;l++)if((t||l in c)&&c[l]===n)return t||l||0;return!t&&-1}}},function(t,e){e.f=Object.getOwnPropertySymbols},function(t,e,n){var r=n(22);t.exports=Array.isArray||function(t){return"Array"==r(t)}},function(t,e,n){var r=n(23),i=n(26);t.exports=function(t){return function(e,n){var o,a,s=String(i(e)),c=r(n),u=s.length;return c<0||c>=u?t?"":void 0:(o=s.charCodeAt(c))<55296||o>56319||c+1===u||(a=s.charCodeAt(c+1))<56320||a>57343?t?s.charAt(c):o:t?s.slice(c,c+2):a-56320+(o-55296<<10)+65536}}},function(t,e,n){var r=n(4),i=n(22),o=n(5)("match");t.exports=function(t){var e;return r(t)&&(void 0!==(e=t[o])?!!e:"RegExp"==i(t))}},function(t,e,n){var r=n(5)("iterator"),i=!1;try{var o=[7][r]();o.return=function(){i=!0},Array.from(o,(function(){throw 2}))}catch(t){}t.exports=function(t,e){if(!e&&!i)return!1;var n=!1;try{var o=[7],a=o[r]();a.next=function(){return{done:n=!0}},o[r]=function(){return a},t(o)}catch(t){}return n}},function(t,e,n){"use strict";var r=n(46),i=RegExp.prototype.exec;t.exports=function(t,e){var n=t.exec;if("function"==typeof n){var o=n.call(t,e);if("object"!=typeof o)throw new TypeError("RegExp exec method returned something other than an Object or null");return o}if("RegExp"!==r(t))throw new TypeError("RegExp#exec called on incompatible receiver");return i.call(t,e)}},function(t,e,n){"use strict";n(118);var r=n(12),i=n(11),o=n(3),a=n(26),s=n(5),c=n(91),u=s("species"),l=!o((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")})),f=function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var n="ab".split(t);return 2===n.length&&"a"===n[0]&&"b"===n[1]}();t.exports=function(t,e,n){var h=s(t),p=!o((function(){var e={};return e[h]=function(){return 7},7!=""[t](e)})),d=p?!o((function(){var e=!1,n=/a/;return n.exec=function(){return e=!0,null},"split"===t&&(n.constructor={},n.constructor[u]=function(){return n}),n[h](""),!e})):void 0;if(!p||!d||"replace"===t&&!l||"split"===t&&!f){var y=/./[h],v=n(a,h,""[t],(function(t,e,n,r,i){return e.exec===c?p&&!i?{done:!0,value:y.call(e,n,r)}:{done:!0,value:t.call(n,e,r)}:{done:!1}})),m=v[0],g=v[1];r(String.prototype,t,m),i(RegExp.prototype,h,2==e?function(t,e){return g.call(t,this,e)}:function(t){return g.call(t,this)})}}},function(t,e,n){var r=n(2).navigator;t.exports=r&&r.userAgent||""},function(t,e,n){"use strict";var r=n(2),i=n(0),o=n(12),a=n(43),s=n(32),c=n(42),u=n(41),l=n(4),f=n(3),h=n(60),p=n(45),d=n(77);t.exports=function(t,e,n,y,v,m){var g=r[t],_=g,b=v?"set":"add",E=_&&_.prototype,w={},S=function(t){var e=E[t];o(E,t,"delete"==t||"has"==t?function(t){return!(m&&!l(t))&&e.call(this,0===t?0:t)}:"get"==t?function(t){return m&&!l(t)?void 0:e.call(this,0===t?0:t)}:"add"==t?function(t){return e.call(this,0===t?0:t),this}:function(t,n){return e.call(this,0===t?0:t,n),this})};if("function"==typeof _&&(m||E.forEach&&!f((function(){(new _).entries().next()})))){var I=new _,C=I[b](m?{}:-0,1)!=I,T=f((function(){I.has(1)})),A=h((function(t){new _(t)})),k=!m&&f((function(){for(var t=new _,e=5;e--;)t[b](e,e);return!t.has(-0)}));A||((_=e((function(e,n){u(e,_,t);var r=d(new g,e,_);return null!=n&&c(n,v,r[b],r),r}))).prototype=E,E.constructor=_),(T||k)&&(S("delete"),S("has"),v&&S("get")),(k||C)&&S(b),m&&E.clear&&delete E.clear}else _=y.getConstructor(e,t,v,b),a(_.prototype,n),s.NEED=!0;return p(_,t),w[t]=_,i(i.G+i.W+i.F*(_!=g),w),m||y.setStrong(_,t,v),_}},function(t,e,n){for(var r,i=n(2),o=n(11),a=n(35),s=a("typed_array"),c=a("view"),u=!(!i.ArrayBuffer||!i.DataView),l=u,f=0,h="Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(",");f<9;)(r=i[h[f++]])?(o(r.prototype,s,!0),o(r.prototype,c,!0)):l=!1;t.exports={ABV:u,CONSTR:l,TYPED:s,VIEW:c}},function(t,e,n){"use strict";t.exports=n(31)||!n(3)((function(){var t=Math.random();__defineSetter__.call(null,t,(function(){})),delete n(2)[t]}))},function(t,e,n){"use strict";var r=n(0);t.exports=function(t){r(r.S,t,{of:function(){for(var t=arguments.length,e=new Array(t);t--;)e[t]=arguments[t];return new this(e)}})}},function(t,e,n){"use strict";var r=n(0),i=n(10),o=n(21),a=n(42);t.exports=function(t){r(r.S,t,{from:function(t){var e,n,r,s,c=arguments[1];return i(this),(e=void 0!==c)&&i(c),null==t?new this:(n=[],e?(r=0,s=o(c,arguments[2],2),a(t,!1,(function(t){n.push(s(t,r++))}))):a(t,!1,n.push,n),new this(n))}})}},function(t,e){t.exports=require("os")},function(t,e,n){var r=n(4),i=n(2).document,o=r(i)&&r(i.createElement);t.exports=function(t){return o?i.createElement(t):{}}},function(t,e,n){var r=n(2),i=n(20),o=n(31),a=n(100),s=n(8).f;t.exports=function(t){var e=i.Symbol||(i.Symbol=o?{}:r.Symbol||{});"_"==t.charAt(0)||t in e||s(e,t,{value:a.f(t)})}},function(t,e,n){var r=n(49)("keys"),i=n(35);t.exports=function(t){return r[t]||(r[t]=i(t))}},function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,e,n){var r=n(2).document;t.exports=r&&r.documentElement},function(t,e,n){var r=n(4),i=n(1),o=function(t,e){if(i(t),!r(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,r){try{(r=n(21)(Function.call,n(17).f(Object.prototype,"__proto__").set,2))(t,[]),e=!(t instanceof Array)}catch(t){e=!0}return function(t,n){return o(t,n),e?t.__proto__=n:r(t,n),t}}({},!1):void 0),check:o}},function(t,e){t.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},function(t,e,n){var r=n(4),i=n(75).set;t.exports=function(t,e,n){var o,a=e.constructor;return a!==n&&"function"==typeof a&&(o=a.prototype)!==n.prototype&&r(o)&&i&&i(t,o),t}},function(t,e,n){"use strict";var r=n(23),i=n(26);t.exports=function(t){var e=String(i(this)),n="",o=r(t);if(o<0||o==1/0)throw RangeError("Count can't be negative");for(;o>0;(o>>>=1)&&(e+=e))1&o&&(n+=e);return n}},function(t,e){t.exports=Math.sign||function(t){return 0==(t=+t)||t!=t?t:t<0?-1:1}},function(t,e){var n=Math.expm1;t.exports=!n||n(10)>22025.465794806718||n(10)<22025.465794806718||-2e-17!=n(-2e-17)?function(t){return 0==(t=+t)?t:t>-1e-6&&t<1e-6?t+t*t/2:Math.exp(t)-1}:n},function(t,e,n){"use strict";var r=n(31),i=n(0),o=n(12),a=n(11),s=n(48),c=n(82),u=n(45),l=n(18),f=n(5)("iterator"),h=!([].keys&&"next"in[].keys()),p=function(){return this};t.exports=function(t,e,n,d,y,v,m){c(n,e,d);var g,_,b,E=function(t){if(!h&&t in C)return C[t];switch(t){case"keys":case"values":return function(){return new n(this,t)}}return function(){return new n(this,t)}},w=e+" Iterator",S="values"==y,I=!1,C=t.prototype,T=C[f]||C["@@iterator"]||y&&C[y],A=T||E(y),k=y?S?E("entries"):A:void 0,P="Array"==e&&C.entries||T;if(P&&(b=l(P.call(new t)))!==Object.prototype&&b.next&&(u(b,w,!0),r||"function"==typeof b[f]||a(b,f,p)),S&&T&&"values"!==T.name&&(I=!0,A=function(){return T.call(this)}),r&&!m||!h&&!I&&C[f]||a(C,f,A),s[e]=A,s[w]=p,y)if(g={values:S?A:E("values"),keys:v?A:E("keys"),entries:k},m)for(_ in g)_ in C||o(C,_,g[_]);else i(i.P+i.F*(h||I),e,g);return g}},function(t,e,n){"use strict";var r=n(38),i=n(34),o=n(45),a={};n(11)(a,n(5)("iterator"),(function(){return this})),t.exports=function(t,e,n){t.prototype=r(a,{next:i(1,n)}),o(t,e+" Iterator")}},function(t,e,n){var r=n(59),i=n(26);t.exports=function(t,e,n){if(r(e))throw TypeError("String#"+n+" doesn't accept regex!");return String(i(t))}},function(t,e,n){var r=n(5)("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(n){try{return e[r]=!1,!"/./"[t](e)}catch(t){}}return!0}},function(t,e,n){var r=n(48),i=n(5)("iterator"),o=Array.prototype;t.exports=function(t){return void 0!==t&&(r.Array===t||o[i]===t)}},function(t,e,n){"use strict";var r=n(8),i=n(34);t.exports=function(t,e,n){e in t?r.f(t,e,i(0,n)):t[e]=n}},function(t,e,n){var r=n(46),i=n(5)("iterator"),o=n(48);t.exports=n(20).getIteratorMethod=function(t){if(null!=t)return t[i]||t["@@iterator"]||o[r(t)]}},function(t,e,n){var r=n(230);t.exports=function(t,e){return new(r(t))(e)}},function(t,e,n){"use strict";var r=n(9),i=n(37),o=n(6);t.exports=function(t){for(var e=r(this),n=o(e.length),a=arguments.length,s=i(a>1?arguments[1]:void 0,n),c=a>2?arguments[2]:void 0,u=void 0===c?n:i(c,n);u>s;)e[s++]=t;return e}},function(t,e,n){"use strict";var r=n(33),i=n(117),o=n(48),a=n(16);t.exports=n(81)(Array,"Array",(function(t,e){this._t=a(t),this._i=0,this._k=e}),(function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,i(1)):i(0,"keys"==e?n:"values"==e?t[n]:[n,t[n]])}),"values"),o.Arguments=o.Array,r("keys"),r("values"),r("entries")},function(t,e,n){"use strict";var r,i,o=n(52),a=RegExp.prototype.exec,s=String.prototype.replace,c=a,u=(r=/a/,i=/b*/g,a.call(r,"a"),a.call(i,"a"),0!==r.lastIndex||0!==i.lastIndex),l=void 0!==/()??/.exec("")[1];(u||l)&&(c=function(t){var e,n,r,i,c=this;return l&&(n=new RegExp("^"+c.source+"$(?!\\s)",o.call(c))),u&&(e=c.lastIndex),r=a.call(c,t),u&&r&&(c.lastIndex=c.global?r.index+r[0].length:e),l&&r&&r.length>1&&s.call(r[0],n,(function(){for(i=1;i<arguments.length-2;i++)void 0===arguments[i]&&(r[i]=void 0)})),r}),t.exports=c},function(t,e,n){"use strict";var r=n(58)(!0);t.exports=function(t,e,n){return e+(n?r(t,e).length:1)}},function(t,e,n){var r,i,o,a=n(21),s=n(107),c=n(74),u=n(70),l=n(2),f=l.process,h=l.setImmediate,p=l.clearImmediate,d=l.MessageChannel,y=l.Dispatch,v=0,m={},g=function(){var t=+this;if(m.hasOwnProperty(t)){var e=m[t];delete m[t],e()}},_=function(t){g.call(t.data)};h&&p||(h=function(t){for(var e=[],n=1;arguments.length>n;)e.push(arguments[n++]);return m[++v]=function(){s("function"==typeof t?t:Function(t),e)},r(v),v},p=function(t){delete m[t]},"process"==n(22)(f)?r=function(t){f.nextTick(a(g,t,1))}:y&&y.now?r=function(t){y.now(a(g,t,1))}:d?(o=(i=new d).port2,i.port1.onmessage=_,r=a(o.postMessage,o,1)):l.addEventListener&&"function"==typeof postMessage&&!l.importScripts?(r=function(t){l.postMessage(t+"","*")},l.addEventListener("message",_,!1)):r="onreadystatechange"in u("script")?function(t){c.appendChild(u("script")).onreadystatechange=function(){c.removeChild(this),g.call(t)}}:function(t){setTimeout(a(g,t,1),0)}),t.exports={set:h,clear:p}},function(t,e,n){var r=n(2),i=n(93).set,o=r.MutationObserver||r.WebKitMutationObserver,a=r.process,s=r.Promise,c="process"==n(22)(a);t.exports=function(){var t,e,n,u=function(){var r,i;for(c&&(r=a.domain)&&r.exit();t;){i=t.fn,t=t.next;try{i()}catch(r){throw t?n():e=void 0,r}}e=void 0,r&&r.enter()};if(c)n=function(){a.nextTick(u)};else if(!o||r.navigator&&r.navigator.standalone)if(s&&s.resolve){var l=s.resolve(void 0);n=function(){l.then(u)}}else n=function(){i.call(r,u)};else{var f=!0,h=document.createTextNode("");new o(u).observe(h,{characterData:!0}),n=function(){h.data=f=!f}}return function(r){var i={fn:r,next:void 0};e&&(e.next=i),t||(t=i,n()),e=i}}},function(t,e,n){"use strict";var r=n(10);function i(t){var e,n;this.promise=new t((function(t,r){if(void 0!==e||void 0!==n)throw TypeError("Bad Promise constructor");e=t,n=r})),this.resolve=r(e),this.reject=r(n)}t.exports.f=function(t){return new i(t)}},function(t,e,n){"use strict";var r=n(2),i=n(7),o=n(31),a=n(65),s=n(11),c=n(43),u=n(3),l=n(41),f=n(23),h=n(6),p=n(127),d=n(39).f,y=n(8).f,v=n(89),m=n(45),g=r.ArrayBuffer,_=r.DataView,b=r.Math,E=r.RangeError,w=r.Infinity,S=g,I=b.abs,C=b.pow,T=b.floor,A=b.log,k=b.LN2,P=i?"_b":"buffer",R=i?"_l":"byteLength",O=i?"_o":"byteOffset";function D(t,e,n){var r,i,o,a=new Array(n),s=8*n-e-1,c=(1<<s)-1,u=c>>1,l=23===e?C(2,-24)-C(2,-77):0,f=0,h=t<0||0===t&&1/t<0?1:0;for((t=I(t))!=t||t===w?(i=t!=t?1:0,r=c):(r=T(A(t)/k),t*(o=C(2,-r))<1&&(r--,o*=2),(t+=r+u>=1?l/o:l*C(2,1-u))*o>=2&&(r++,o/=2),r+u>=c?(i=0,r=c):r+u>=1?(i=(t*o-1)*C(2,e),r+=u):(i=t*C(2,u-1)*C(2,e),r=0));e>=8;a[f++]=255&i,i/=256,e-=8);for(r=r<<e|i,s+=e;s>0;a[f++]=255&r,r/=256,s-=8);return a[--f]|=128*h,a}function x(t,e,n){var r,i=8*n-e-1,o=(1<<i)-1,a=o>>1,s=i-7,c=n-1,u=t[c--],l=127&u;for(u>>=7;s>0;l=256*l+t[c],c--,s-=8);for(r=l&(1<<-s)-1,l>>=-s,s+=e;s>0;r=256*r+t[c],c--,s-=8);if(0===l)l=1-a;else{if(l===o)return r?NaN:u?-w:w;r+=C(2,e),l-=a}return(u?-1:1)*r*C(2,l-e)}function U(t){return t[3]<<24|t[2]<<16|t[1]<<8|t[0]}function N(t){return[255&t]}function B(t){return[255&t,t>>8&255]}function M(t){return[255&t,t>>8&255,t>>16&255,t>>24&255]}function L(t){return D(t,52,8)}function j(t){return D(t,23,4)}function F(t,e,n){y(t.prototype,e,{get:function(){return this[n]}})}function H(t,e,n,r){var i=p(+n);if(i+e>t[R])throw E("Wrong index!");var o=t[P]._b,a=i+t[O],s=o.slice(a,a+e);return r?s:s.reverse()}function G(t,e,n,r,i,o){var a=p(+n);if(a+e>t[R])throw E("Wrong index!");for(var s=t[P]._b,c=a+t[O],u=r(+i),l=0;l<e;l++)s[c+l]=u[o?l:e-l-1]}if(a.ABV){if(!u((function(){g(1)}))||!u((function(){new g(-1)}))||u((function(){return new g,new g(1.5),new g(NaN),"ArrayBuffer"!=g.name}))){for(var V,Y=(g=function(t){return l(this,g),new S(p(t))}).prototype=S.prototype,W=d(S),q=0;W.length>q;)(V=W[q++])in g||s(g,V,S[V]);o||(Y.constructor=g)}var X=new _(new g(2)),$=_.prototype.setInt8;X.setInt8(0,2147483648),X.setInt8(1,2147483649),!X.getInt8(0)&&X.getInt8(1)||c(_.prototype,{setInt8:function(t,e){$.call(this,t,e<<24>>24)},setUint8:function(t,e){$.call(this,t,e<<24>>24)}},!0)}else g=function(t){l(this,g,"ArrayBuffer");var e=p(t);this._b=v.call(new Array(e),0),this[R]=e},_=function(t,e,n){l(this,_,"DataView"),l(t,g,"DataView");var r=t[R],i=f(e);if(i<0||i>r)throw E("Wrong offset!");if(i+(n=void 0===n?r-i:h(n))>r)throw E("Wrong length!");this[P]=t,this[O]=i,this[R]=n},i&&(F(g,"byteLength","_l"),F(_,"buffer","_b"),F(_,"byteLength","_l"),F(_,"byteOffset","_o")),c(_.prototype,{getInt8:function(t){return H(this,1,t)[0]<<24>>24},getUint8:function(t){return H(this,1,t)[0]},getInt16:function(t){var e=H(this,2,t,arguments[1]);return(e[1]<<8|e[0])<<16>>16},getUint16:function(t){var e=H(this,2,t,arguments[1]);return e[1]<<8|e[0]},getInt32:function(t){return U(H(this,4,t,arguments[1]))},getUint32:function(t){return U(H(this,4,t,arguments[1]))>>>0},getFloat32:function(t){return x(H(this,4,t,arguments[1]),23,4)},getFloat64:function(t){return x(H(this,8,t,arguments[1]),52,8)},setInt8:function(t,e){G(this,1,t,N,e)},setUint8:function(t,e){G(this,1,t,N,e)},setInt16:function(t,e){G(this,2,t,B,e,arguments[2])},setUint16:function(t,e){G(this,2,t,B,e,arguments[2])},setInt32:function(t,e){G(this,4,t,M,e,arguments[2])},setUint32:function(t,e){G(this,4,t,M,e,arguments[2])},setFloat32:function(t,e){G(this,4,t,j,e,arguments[2])},setFloat64:function(t,e){G(this,8,t,L,e,arguments[2])}});m(g,"ArrayBuffer"),m(_,"DataView"),s(_.prototype,a.VIEW,!0),e.ArrayBuffer=g,e.DataView=_},function(t,e,n){const r=n(54)("noble"),i=n(19),o=n(14),a=n(98),s=n(346),c=n(348),u=n(350);function l(t){this.initialized=!1,this.address="unknown",this._state="unknown",this._bindings=t,this._peripherals={},this._services={},this._characteristics={},this._descriptors={},this._discoveredPeripheralUUids={},this._bindings.on("stateChange",this.onStateChange.bind(this)),this._bindings.on("addressChange",this.onAddressChange.bind(this)),this._bindings.on("scanParametersSet",this.onScanParametersSet.bind(this)),this._bindings.on("scanStart",this.onScanStart.bind(this)),this._bindings.on("scanStop",this.onScanStop.bind(this)),this._bindings.on("discover",this.onDiscover.bind(this)),this._bindings.on("connect",this.onConnect.bind(this)),this._bindings.on("disconnect",this.onDisconnect.bind(this)),this._bindings.on("rssiUpdate",this.onRssiUpdate.bind(this)),this._bindings.on("servicesDiscover",this.onServicesDiscover.bind(this)),this._bindings.on("servicesDiscovered",this.onServicesDiscovered.bind(this)),this._bindings.on("includedServicesDiscover",this.onIncludedServicesDiscover.bind(this)),this._bindings.on("characteristicsDiscover",this.onCharacteristicsDiscover.bind(this)),this._bindings.on("characteristicsDiscovered",this.onCharacteristicsDiscovered.bind(this)),this._bindings.on("read",this.onRead.bind(this)),this._bindings.on("write",this.onWrite.bind(this)),this._bindings.on("broadcast",this.onBroadcast.bind(this)),this._bindings.on("notify",this.onNotify.bind(this)),this._bindings.on("descriptorsDiscover",this.onDescriptorsDiscover.bind(this)),this._bindings.on("valueRead",this.onValueRead.bind(this)),this._bindings.on("valueWrite",this.onValueWrite.bind(this)),this._bindings.on("handleRead",this.onHandleRead.bind(this)),this._bindings.on("handleWrite",this.onHandleWrite.bind(this)),this._bindings.on("handleNotify",this.onHandleNotify.bind(this)),this._bindings.on("onMtu",this.onMtu.bind(this)),this.on("warning",t=>{1===this.listeners("warning").length&&console.warn("noble: "+t)}),this.on("newListener",t=>{"stateChange"!==t||this.initialized||(this.initialized=!0,process.nextTick(()=>{try{this._bindings.init()}catch(t){this.emit("warning","Initialization of USB device failed: "+t.message)}}))}),Object.defineProperties(this,{state:{get:function(){return this.initialized||(this.initialized=!0,this._bindings.init()),this._state}}})}o.inherits(l,i.EventEmitter),l.prototype.onStateChange=function(t){r("stateChange "+t),this._state=t,this.emit("stateChange",t)},l.prototype.onAddressChange=function(t){r("addressChange "+t),this.address=t},l.prototype.setScanParameters=function(t,e,n){n&&this.once("scanParametersSet",n),this._bindings.setScanParameters(t,e)},l.prototype.onScanParametersSet=function(){r("scanParametersSet"),this.emit("scanParametersSet")};l.prototype.startScanning=function(t,e,n){"function"==typeof t&&this.emit("warning","calling startScanning(callback) is deprecated"),"function"==typeof e&&this.emit("warning","calling startScanning(serviceUuids, callback) is deprecated");const r=function(r){if("poweredOn"!==r){const t=new Error(`Could not start scanning, state is ${r} (not poweredOn)`);if("function"!=typeof n)throw t;n(t)}else n&&this.once("scanStart",t=>{n(null,t)}),this._discoveredPeripheralUUids={},this._allowDuplicates=e,this._bindings.startScanning(t,e)};this.initialized?r.call(this,this._state):(this.initialized=!0,this._bindings.init(),this.once("stateChange",r.bind(this)))},l.prototype.startScanningAsync=function(t,e){return o.promisify(n=>this.startScanning(t,e,n))()},l.prototype.onScanStart=function(t){r("scanStart"),this.emit("scanStart",t)};const f=function(t){t&&this.once("scanStop",t),this._bindings&&this.initialized&&this._bindings.stopScanning()};l.prototype.stopScanning=f,l.prototype.stopScanningAsync=o.promisify(f),l.prototype.onScanStop=function(){r("scanStop"),this.emit("scanStop")},l.prototype.reset=function(){this._bindings.reset()},l.prototype.onDiscover=function(t,e,n,r,i,o,s){let c=this._peripherals[t];if(c){for(const t in i)void 0!==i[t]&&(c.advertisement[t]=i[t]);c.connectable=r,c.scannable=s,c.rssi=o}else c=new a(this,t,e,n,r,i,o,s),this._peripherals[t]=c,this._services[t]={},this._characteristics[t]={},this._descriptors[t]={};const u=!0===this._discoveredPeripheralUUids[t];u||(this._discoveredPeripheralUUids[t]=!0),!this._allowDuplicates&&u&&(s||r)||this.emit("discover",c)},l.prototype.connect=function(t,e){this._bindings.connect(t,e)},l.prototype.onConnect=function(t,e){const n=this._peripherals[t];n?(n.state=e?"error":"connected",n.emit("connect",e)):this.emit("warning",`unknown peripheral ${t} connected!`)},l.prototype.cancelConnect=function(t,e){this._bindings.cancelConnect(t,e)},l.prototype.disconnect=function(t){this._bindings.disconnect(t)},l.prototype.onDisconnect=function(t,e){const n=this._peripherals[t];n?(n.state="disconnected",n.emit("disconnect",e)):this.emit("warning",`unknown peripheral ${t} disconnected!`)},l.prototype.updateRssi=function(t){this._bindings.updateRssi(t)},l.prototype.onRssiUpdate=function(t,e){const n=this._peripherals[t];n?(n.rssi=e,n.emit("rssiUpdate",e)):this.emit("warning",`unknown peripheral ${t} RSSI update!`)},l.prototype.addServices=function(t,e){const n=[];for(let r=0;r<e.length;r++){const i=this.addService(t,e[r]);n.push(i)}return n},l.prototype.addService=function(t,e){const n=this._peripherals[t];this._bindings.addService&&this._bindings.addService(t,e),n.services||(n.services=[]);const r=new s(this,t,e.uuid);return this._services[t][e.uuid]=r,this._characteristics[t][e.uuid]={},this._descriptors[t][e.uuid]={},n.services.push(r),r},l.prototype.onServicesDiscovered=function(t,e){const n=this._peripherals[t];n&&n.emit("servicesDiscovered",n,e)},l.prototype.discoverServices=function(t,e){this._bindings.discoverServices(t,e)},l.prototype.onServicesDiscover=function(t,e){const n=this._peripherals[t];if(n){const r=[];for(let n=0;n<e.length;n++){const i=e[n],o=new s(this,t,i);this._services[t][i]=o,this._characteristics[t][i]={},this._descriptors[t][i]={},r.push(o)}n.services=r,n.emit("servicesDiscover",r)}else this.emit("warning",`unknown peripheral ${t} services discover!`)},l.prototype.discoverIncludedServices=function(t,e,n){this._bindings.discoverIncludedServices(t,e,n)},l.prototype.onIncludedServicesDiscover=function(t,e,n){const r=this._services[t][e];r?(r.includedServiceUuids=n,r.emit("includedServicesDiscover",n)):this.emit("warning",`unknown peripheral ${t}, ${e} included services discover!`)},l.prototype.addCharacteristics=function(t,e,n){this._bindings.addCharacteristics&&this._bindings.addCharacteristics(t,e,n);const r=this._services[t][e];if(!r)return void this.emit("warning",`unknown service ${t}, ${e} characteristics discover!`);const i=[];for(let r=0;r<n.length;r++){const o=n[r].uuid,a=new c(this,t,e,o,n[r].properties);this._characteristics[t][e][o]=a,this._descriptors[t][e][o]={},i.push(a)}return r.characteristics=i,i},l.prototype.onCharacteristicsDiscovered=function(t,e,n){this._services[t][e].emit("characteristicsDiscovered",n)},l.prototype.discoverCharacteristics=function(t,e,n){this._bindings.discoverCharacteristics(t,e,n)},l.prototype.onCharacteristicsDiscover=function(t,e,n){const r=this._services[t][e];if(r){const i=[];for(let r=0;r<n.length;r++){const o=n[r].uuid,a=new c(this,t,e,o,n[r].properties);this._characteristics[t][e][o]=a,this._descriptors[t][e][o]={},i.push(a)}r.characteristics=i,r.emit("characteristicsDiscover",i)}else this.emit("warning",`unknown peripheral ${t}, ${e} characteristics discover!`)},l.prototype.read=function(t,e,n){this._bindings.read(t,e,n)},l.prototype.onRead=function(t,e,n,r,i){const o=this._characteristics[t][e][n];o?(o.emit("data",r,i),o.emit("read",r,i)):this.emit("warning",`unknown peripheral ${t}, ${e}, ${n} read!`)},l.prototype.write=function(t,e,n,r,i){this._bindings.write(t,e,n,r,i)},l.prototype.onWrite=function(t,e,n){const r=this._characteristics[t][e][n];r?r.emit("write"):this.emit("warning",`unknown peripheral ${t}, ${e}, ${n} write!`)},l.prototype.broadcast=function(t,e,n,r){this._bindings.broadcast(t,e,n,r)},l.prototype.onBroadcast=function(t,e,n,r){const i=this._characteristics[t][e][n];i?i.emit("broadcast",r):this.emit("warning",`unknown peripheral ${t}, ${e}, ${n} broadcast!`)},l.prototype.notify=function(t,e,n,r){this._bindings.notify(t,e,n,r)},l.prototype.onNotify=function(t,e,n,r){const i=this._characteristics[t][e][n];i?i.emit("notify",r):this.emit("warning",`unknown peripheral ${t}, ${e}, ${n} notify!`)},l.prototype.discoverDescriptors=function(t,e,n){this._bindings.discoverDescriptors(t,e,n)},l.prototype.onDescriptorsDiscover=function(t,e,n,r){const i=this._characteristics[t][e][n];if(i){const o=[];for(let i=0;i<r.length;i++){const a=r[i],s=new u(this,t,e,n,a);this._descriptors[t][e][n][a]=s,o.push(s)}i.descriptors=o,i.emit("descriptorsDiscover",o)}else this.emit("warning",`unknown peripheral ${t}, ${e}, ${n} descriptors discover!`)},l.prototype.readValue=function(t,e,n,r){this._bindings.readValue(t,e,n,r)},l.prototype.onValueRead=function(t,e,n,r,i){const o=this._descriptors[t][e][n][r];o?o.emit("valueRead",i):this.emit("warning",`unknown peripheral ${t}, ${e}, ${n}, ${r} value read!`)},l.prototype.writeValue=function(t,e,n,r,i){this._bindings.writeValue(t,e,n,r,i)},l.prototype.onValueWrite=function(t,e,n,r){const i=this._descriptors[t][e][n][r];i?i.emit("valueWrite"):this.emit("warning",`unknown peripheral ${t}, ${e}, ${n}, ${r} value write!`)},l.prototype.readHandle=function(t,e){this._bindings.readHandle(t,e)},l.prototype.onHandleRead=function(t,e,n){const r=this._peripherals[t];r?r.emit("handleRead"+e,n):this.emit("warning",`unknown peripheral ${t} handle read!`)},l.prototype.writeHandle=function(t,e,n,r){this._bindings.writeHandle(t,e,n,r)},l.prototype.onHandleWrite=function(t,e){const n=this._peripherals[t];n?n.emit("handleWrite"+e):this.emit("warning",`unknown peripheral ${t} handle write!`)},l.prototype.onHandleNotify=function(t,e,n){const r=this._peripherals[t];r?r.emit("handleNotify",e,n):this.emit("warning",`unknown peripheral ${t} handle notify!`)},l.prototype.onMtu=function(t,e){const n=this._peripherals[t];n&&e&&(n.mtu=e)},t.exports=l},function(t,e,n){const r=n(19),i=n(14);function o(t,e,n,r,i,o,a,s){this._noble=t,this.id=e,this.uuid=e,this.address=n,this.addressType=r,this.connectable=i,this.scannable=s,this.advertisement=o,this.rssi=a,this.services=null,this.mtu=null,this.state="disconnected"}i.inherits(o,r.EventEmitter),o.prototype.toString=function(){return JSON.stringify({id:this.id,address:this.address,addressType:this.addressType,connectable:this.connectable,advertisement:this.advertisement,rssi:this.rssi,mtu:this.mtu,state:this.state})};o.prototype.connect=function(t,e){"function"==typeof t&&(e=t,t=void 0),e&&this.once("connect",t=>{e(t)}),"connected"===this.state?this.emit("connect",new Error("Peripheral already connected")):(this.state="connecting",this._noble.connect(this.id,t))},o.prototype.connectAsync=function(t){return i.promisify(e=>this.connect(t,e))()},o.prototype.cancelConnect=function(t){"connecting"===this.state&&(this.emit("connect",new Error("connection canceled!")),this._noble.cancelConnect(this.id,t))};const a=function(t){t&&this.once("disconnect",()=>{t(null)}),this.state="disconnecting",this._noble.disconnect(this.id)};o.prototype.disconnect=a,o.prototype.disconnectAsync=i.promisify(a);const s=function(t){t&&this.once("rssiUpdate",e=>{t(null,e)}),this._noble.updateRssi(this.id)};o.prototype.updateRssi=s,o.prototype.updateRssiAsync=i.promisify(s);o.prototype.discoverServices=function(t,e){e&&this.once("servicesDiscover",t=>{e(null,t)}),this._noble.discoverServices(this.id,t)},o.prototype.discoverServicesAsync=function(t){return i.promisify(e=>this.discoverServices(t,e))()};o.prototype.discoverSomeServicesAndCharacteristics=function(t,e,n){this.discoverServices(t,(r,i)=>{if(!r&&i.length<t.length&&(r="Could not find all requested services"),r)return void n(r,null,null);let o=0;const a=[];for(const t in i){i[t].discoverCharacteristics(e,(t,e)=>{if(o++,null===t)for(const t in e){const n=e[t];a.push(n)}o===i.length&&n&&n(null,i,a)})}})},o.prototype.discoverSomeServicesAndCharacteristicsAsync=function(t,e){return new Promise((n,r)=>this.discoverSomeServicesAndCharacteristics(t,e,(t,e,i)=>t?r(t):n({services:e,characteristics:i})))};o.prototype.discoverAllServicesAndCharacteristics=function(t){this.discoverSomeServicesAndCharacteristics([],[],t)},o.prototype.discoverAllServicesAndCharacteristicsAsync=function(){return new Promise((t,e)=>this.discoverAllServicesAndCharacteristics((n,r,i)=>n?e(n):t({services:r,characteristics:i})))};const c=function(t,e){e&&this.once("handleRead"+t,t=>{e(null,t)}),this._noble.readHandle(this.id,t)};o.prototype.readHandle=c,o.prototype.readHandleAsync=i.promisify(c);const u=function(t,e,n,r){if(!(e instanceof Buffer))throw new Error("data must be a Buffer");r&&this.once("handleWrite"+t,()=>{r(null)}),this._noble.writeHandle(this.id,t,e,n)};o.prototype.writeHandle=u,o.prototype.writeHandleAsync=i.promisify(u),t.exports=o},function(t,e,n){t.exports=!n(7)&&!n(3)((function(){return 7!=Object.defineProperty(n(70)("div"),"a",{get:function(){return 7}}).a}))},function(t,e,n){e.f=n(5)},function(t,e,n){var r=n(15),i=n(16),o=n(55)(!1),a=n(72)("IE_PROTO");t.exports=function(t,e){var n,s=i(t),c=0,u=[];for(n in s)n!=a&&r(s,n)&&u.push(n);for(;e.length>c;)r(s,n=e[c++])&&(~o(u,n)||u.push(n));return u}},function(t,e,n){var r=n(8),i=n(1),o=n(36);t.exports=n(7)?Object.defineProperties:function(t,e){i(t);for(var n,a=o(e),s=a.length,c=0;s>c;)r.f(t,n=a[c++],e[n]);return t}},function(t,e,n){var r=n(16),i=n(39).f,o={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.f=function(t){return a&&"[object Window]"==o.call(t)?function(t){try{return i(t)}catch(t){return a.slice()}}(t):i(r(t))}},function(t,e,n){"use strict";var r=n(7),i=n(36),o=n(56),a=n(51),s=n(9),c=n(50),u=Object.assign;t.exports=!u||n(3)((function(){var t={},e={},n=Symbol(),r="abcdefghijklmnopqrst";return t[n]=7,r.split("").forEach((function(t){e[t]=t})),7!=u({},t)[n]||Object.keys(u({},e)).join("")!=r}))?function(t,e){for(var n=s(t),u=arguments.length,l=1,f=o.f,h=a.f;u>l;)for(var p,d=c(arguments[l++]),y=f?i(d).concat(f(d)):i(d),v=y.length,m=0;v>m;)p=y[m++],r&&!h.call(d,p)||(n[p]=d[p]);return n}:u},function(t,e){t.exports=Object.is||function(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e}},function(t,e,n){"use strict";var r=n(10),i=n(4),o=n(107),a=[].slice,s={},c=function(t,e,n){if(!(e in s)){for(var r=[],i=0;i<e;i++)r[i]="a["+i+"]";s[e]=Function("F,a","return new F("+r.join(",")+")")}return s[e](t,n)};t.exports=Function.bind||function(t){var e=r(this),n=a.call(arguments,1),s=function(){var r=n.concat(a.call(arguments));return this instanceof s?c(e,r.length,r):o(e,r,t)};return i(e.prototype)&&(s.prototype=e.prototype),s}},function(t,e){t.exports=function(t,e,n){var r=void 0===n;switch(e.length){case 0:return r?t():t.call(n);case 1:return r?t(e[0]):t.call(n,e[0]);case 2:return r?t(e[0],e[1]):t.call(n,e[0],e[1]);case 3:return r?t(e[0],e[1],e[2]):t.call(n,e[0],e[1],e[2]);case 4:return r?t(e[0],e[1],e[2],e[3]):t.call(n,e[0],e[1],e[2],e[3])}return t.apply(n,e)}},function(t,e,n){var r=n(2).parseInt,i=n(47).trim,o=n(76),a=/^[-+]?0[xX]/;t.exports=8!==r(o+"08")||22!==r(o+"0x16")?function(t,e){var n=i(String(t),3);return r(n,e>>>0||(a.test(n)?16:10))}:r},function(t,e,n){var r=n(2).parseFloat,i=n(47).trim;t.exports=1/r(n(76)+"-0")!=-1/0?function(t){var e=i(String(t),3),n=r(e);return 0===n&&"-"==e.charAt(0)?-0:n}:r},function(t,e,n){var r=n(22);t.exports=function(t,e){if("number"!=typeof t&&"Number"!=r(t))throw TypeError(e);return+t}},function(t,e,n){var r=n(4),i=Math.floor;t.exports=function(t){return!r(t)&&isFinite(t)&&i(t)===t}},function(t,e){t.exports=Math.log1p||function(t){return(t=+t)>-1e-8&&t<1e-8?t-t*t/2:Math.log(1+t)}},function(t,e,n){var r=n(79),i=Math.pow,o=i(2,-52),a=i(2,-23),s=i(2,127)*(2-a),c=i(2,-126);t.exports=Math.fround||function(t){var e,n,i=Math.abs(t),u=r(t);return i<c?u*(i/c/a+1/o-1/o)*c*a:(n=(e=(1+a/o)*i)-(e-i))>s||n!=n?u*(1/0):u*n}},function(t,e,n){var r=n(1);t.exports=function(t,e,n,i){try{return i?e(r(n)[0],n[1]):e(n)}catch(e){var o=t.return;throw void 0!==o&&r(o.call(t)),e}}},function(t,e,n){var r=n(10),i=n(9),o=n(50),a=n(6);t.exports=function(t,e,n,s,c){r(e);var u=i(t),l=o(u),f=a(u.length),h=c?f-1:0,p=c?-1:1;if(n<2)for(;;){if(h in l){s=l[h],h+=p;break}if(h+=p,c?h<0:f<=h)throw TypeError("Reduce of empty array with no initial value")}for(;c?h>=0:f>h;h+=p)h in l&&(s=e(s,l[h],h,u));return s}},function(t,e,n){"use strict";var r=n(9),i=n(37),o=n(6);t.exports=[].copyWithin||function(t,e){var n=r(this),a=o(n.length),s=i(t,a),c=i(e,a),u=arguments.length>2?arguments[2]:void 0,l=Math.min((void 0===u?a:i(u,a))-c,a-s),f=1;for(c<s&&s<c+l&&(f=-1,c+=l-1,s+=l-1);l-- >0;)c in n?n[s]=n[c]:delete n[s],s+=f,c+=f;return n}},function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},function(t,e,n){"use strict";var r=n(91);n(0)({target:"RegExp",proto:!0,forced:r!==/./.exec},{exec:r})},function(t,e,n){n(7)&&"g"!=/./g.flags&&n(8).f(RegExp.prototype,"flags",{configurable:!0,get:n(52)})},function(t,e){t.exports=function(t){try{return{e:!1,v:t()}}catch(t){return{e:!0,v:t}}}},function(t,e,n){var r=n(1),i=n(4),o=n(95);t.exports=function(t,e){if(r(t),i(e)&&e.constructor===t)return e;var n=o.f(t);return(0,n.resolve)(e),n.promise}},function(t,e,n){"use strict";var r=n(123),i=n(44);t.exports=n(64)("Map",(function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}}),{get:function(t){var e=r.getEntry(i(this,"Map"),t);return e&&e.v},set:function(t,e){return r.def(i(this,"Map"),0===t?0:t,e)}},r,!0)},function(t,e,n){"use strict";var r=n(8).f,i=n(38),o=n(43),a=n(21),s=n(41),c=n(42),u=n(81),l=n(117),f=n(40),h=n(7),p=n(32).fastKey,d=n(44),y=h?"_s":"size",v=function(t,e){var n,r=p(e);if("F"!==r)return t._i[r];for(n=t._f;n;n=n.n)if(n.k==e)return n};t.exports={getConstructor:function(t,e,n,u){var l=t((function(t,r){s(t,l,e,"_i"),t._t=e,t._i=i(null),t._f=void 0,t._l=void 0,t[y]=0,null!=r&&c(r,n,t[u],t)}));return o(l.prototype,{clear:function(){for(var t=d(this,e),n=t._i,r=t._f;r;r=r.n)r.r=!0,r.p&&(r.p=r.p.n=void 0),delete n[r.i];t._f=t._l=void 0,t[y]=0},delete:function(t){var n=d(this,e),r=v(n,t);if(r){var i=r.n,o=r.p;delete n._i[r.i],r.r=!0,o&&(o.n=i),i&&(i.p=o),n._f==r&&(n._f=i),n._l==r&&(n._l=o),n[y]--}return!!r},forEach:function(t){d(this,e);for(var n,r=a(t,arguments.length>1?arguments[1]:void 0,3);n=n?n.n:this._f;)for(r(n.v,n.k,this);n&&n.r;)n=n.p},has:function(t){return!!v(d(this,e),t)}}),h&&r(l.prototype,"size",{get:function(){return d(this,e)[y]}}),l},def:function(t,e,n){var r,i,o=v(t,e);return o?o.v=n:(t._l=o={i:i=p(e,!0),k:e,v:n,p:r=t._l,n:void 0,r:!1},t._f||(t._f=o),r&&(r.n=o),t[y]++,"F"!==i&&(t._i[i]=o)),t},getEntry:v,setStrong:function(t,e,n){u(t,e,(function(t,n){this._t=d(t,e),this._k=n,this._l=void 0}),(function(){for(var t=this._k,e=this._l;e&&e.r;)e=e.p;return this._t&&(this._l=e=e?e.n:this._t._f)?l(0,"keys"==t?e.k:"values"==t?e.v:[e.k,e.v]):(this._t=void 0,l(1))}),n?"entries":"values",!n,!0),f(e)}}},function(t,e,n){"use strict";var r=n(123),i=n(44);t.exports=n(64)("Set",(function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}}),{add:function(t){return r.def(i(this,"Set"),t=0===t?0:t,t)}},r)},function(t,e,n){"use strict";var r,i=n(2),o=n(28)(0),a=n(12),s=n(32),c=n(104),u=n(126),l=n(4),f=n(44),h=n(44),p=!i.ActiveXObject&&"ActiveXObject"in i,d=s.getWeak,y=Object.isExtensible,v=u.ufstore,m=function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},g={get:function(t){if(l(t)){var e=d(t);return!0===e?v(f(this,"WeakMap")).get(t):e?e[this._i]:void 0}},set:function(t,e){return u.def(f(this,"WeakMap"),t,e)}},_=t.exports=n(64)("WeakMap",m,g,u,!0,!0);h&&p&&(c((r=u.getConstructor(m,"WeakMap")).prototype,g),s.NEED=!0,o(["delete","has","get","set"],(function(t){var e=_.prototype,n=e[t];a(e,t,(function(e,i){if(l(e)&&!y(e)){this._f||(this._f=new r);var o=this._f[t](e,i);return"set"==t?this:o}return n.call(this,e,i)}))})))},function(t,e,n){"use strict";var r=n(43),i=n(32).getWeak,o=n(1),a=n(4),s=n(41),c=n(42),u=n(28),l=n(15),f=n(44),h=u(5),p=u(6),d=0,y=function(t){return t._l||(t._l=new v)},v=function(){this.a=[]},m=function(t,e){return h(t.a,(function(t){return t[0]===e}))};v.prototype={get:function(t){var e=m(this,t);if(e)return e[1]},has:function(t){return!!m(this,t)},set:function(t,e){var n=m(this,t);n?n[1]=e:this.a.push([t,e])},delete:function(t){var e=p(this.a,(function(e){return e[0]===t}));return~e&&this.a.splice(e,1),!!~e}},t.exports={getConstructor:function(t,e,n,o){var u=t((function(t,r){s(t,u,e,"_i"),t._t=e,t._i=d++,t._l=void 0,null!=r&&c(r,n,t[o],t)}));return r(u.prototype,{delete:function(t){if(!a(t))return!1;var n=i(t);return!0===n?y(f(this,e)).delete(t):n&&l(n,this._i)&&delete n[this._i]},has:function(t){if(!a(t))return!1;var n=i(t);return!0===n?y(f(this,e)).has(t):n&&l(n,this._i)}}),u},def:function(t,e,n){var r=i(o(e),!0);return!0===r?y(t).set(e,n):r[t._i]=n,t},ufstore:y}},function(t,e,n){var r=n(23),i=n(6);t.exports=function(t){if(void 0===t)return 0;var e=r(t),n=i(e);if(e!==n)throw RangeError("Wrong length!");return n}},function(t,e,n){var r=n(39),i=n(56),o=n(1),a=n(2).Reflect;t.exports=a&&a.ownKeys||function(t){var e=r.f(o(t)),n=i.f;return n?e.concat(n(t)):e}},function(t,e,n){"use strict";var r=n(57),i=n(4),o=n(6),a=n(21),s=n(5)("isConcatSpreadable");t.exports=function t(e,n,c,u,l,f,h,p){for(var d,y,v=l,m=0,g=!!h&&a(h,p,3);m<u;){if(m in c){if(d=g?g(c[m],m,n):c[m],y=!1,i(d)&&(y=void 0!==(y=d[s])?!!y:r(d)),y&&f>0)v=t(e,n,d,o(d.length),v,f-1)-1;else{if(v>=9007199254740991)throw TypeError();e[v]=d}v++}m++}return v}},function(t,e,n){var r=n(6),i=n(78),o=n(26);t.exports=function(t,e,n,a){var s=String(o(t)),c=s.length,u=void 0===n?" ":String(n),l=r(e);if(l<=c||""==u)return s;var f=l-c,h=i.call(u,Math.ceil(f/u.length));return h.length>f&&(h=h.slice(0,f)),a?h+s:s+h}},function(t,e,n){var r=n(7),i=n(36),o=n(16),a=n(51).f;t.exports=function(t){return function(e){for(var n,s=o(e),c=i(s),u=c.length,l=0,f=[];u>l;)n=c[l++],r&&!a.call(s,n)||f.push(t?[n,s[n]]:s[n]);return f}}},function(t,e,n){var r=n(46),i=n(133);t.exports=function(t){return function(){if(r(this)!=t)throw TypeError(t+"#toJSON isn't generic");return i(this)}}},function(t,e,n){var r=n(42);t.exports=function(t,e){var n=[];return r(t,!1,n.push,n,e),n}},function(t,e){t.exports=Math.scale||function(t,e,n,r,i){return 0===arguments.length||t!=t||e!=e||n!=n||r!=r||i!=i?NaN:t===1/0||t===-1/0?t:(t-e)*(i-r)/(n-e)+r}},function(t,e,n){t.exports=function(t){function e(t){let n,i,o,a=null;function s(...t){if(!s.enabled)return;const r=s,i=Number(new Date),o=i-(n||i);r.diff=o,r.prev=n,r.curr=i,n=i,t[0]=e.coerce(t[0]),"string"!=typeof t[0]&&t.unshift("%O");let a=0;t[0]=t[0].replace(/%([a-zA-Z%])/g,(n,i)=>{if("%%"===n)return"%";a++;const o=e.formatters[i];if("function"==typeof o){const e=t[a];n=o.call(r,e),t.splice(a,1),a--}return n}),e.formatArgs.call(r,t);(r.log||e.log).apply(r,t)}return s.namespace=t,s.useColors=e.useColors(),s.color=e.selectColor(t),s.extend=r,s.destroy=e.destroy,Object.defineProperty(s,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==a?a:(i!==e.namespaces&&(i=e.namespaces,o=e.enabled(t)),o),set:t=>{a=t}}),"function"==typeof e.init&&e.init(s),s}function r(t,n){const r=e(this.namespace+(void 0===n?":":n)+t);return r.log=this.log,r}function i(t){return t.toString().substring(2,t.toString().length-2).replace(/\.\*\?$/,"*")}return e.debug=e,e.default=e,e.coerce=function(t){if(t instanceof Error)return t.stack||t.message;return t},e.disable=function(){const t=[...e.names.map(i),...e.skips.map(i).map(t=>"-"+t)].join(",");return e.enable(""),t},e.enable=function(t){let n;e.save(t),e.namespaces=t,e.names=[],e.skips=[];const r=("string"==typeof t?t:"").split(/[\s,]+/),i=r.length;for(n=0;n<i;n++)r[n]&&("-"===(t=r[n].replace(/\*/g,".*?"))[0]?e.skips.push(new RegExp("^"+t.slice(1)+"$")):e.names.push(new RegExp("^"+t+"$")))},e.enabled=function(t){if("*"===t[t.length-1])return!0;let n,r;for(n=0,r=e.skips.length;n<r;n++)if(e.skips[n].test(t))return!1;for(n=0,r=e.names.length;n<r;n++)if(e.names[n].test(t))return!0;return!1},e.humanize=n(341),e.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(t).forEach(n=>{e[n]=t[n]}),e.names=[],e.skips=[],e.formatters={},e.selectColor=function(t){let n=0;for(let e=0;e<t.length;e++)n=(n<<5)-n+t.charCodeAt(e),n|=0;return e.colors[Math.abs(n)%e.colors.length]},e.enable(e.load()),e}},function(t,e,n){const r=n(97);t.exports=function(t){return new r(t)}},function(t,e,n){const r=n(19),i=n(14),o=n(352),a=n(356),s=n(357),c=n(358),u=n(361),l=function(t){this._state=null,this._addresses={},this._addresseTypes={},this._connectable={},this._isExtended="extended"in t&&t.extended,this.scannable={},this._pendingConnectionUuid=null,this._connectionQueue=[],this._handles={},this._gatts={},this._aclStreams={},this._signalings={},this._hci=new c(t),this._gap=new s(this._hci)};i.inherits(l,r.EventEmitter),l.prototype.setScanParameters=function(t,e){this._gap.setScanParameters(t,e)},l.prototype.startScanning=function(t,e){this._scanServiceUuids=t||[],this._gap.startScanning(e)},l.prototype.stopScanning=function(){this._gap.stopScanning()},l.prototype.connect=function(t,e){const n=this._addresses[t],r=this._addresseTypes[t];this._pendingConnectionUuid?this._connectionQueue.push({id:t,params:e}):(this._pendingConnectionUuid=t,this._hci.createLeConn(n,r,e))},l.prototype.disconnect=function(t){this._hci.disconnect(this._handles[t])},l.prototype.cancelConnect=function(t){this._connectionQueue=this._connectionQueue.filter(e=>e.id!==t),this._hci.cancelConnect(this._handles[t])},l.prototype.reset=function(){this._hci.reset()},l.prototype.updateRssi=function(t){this._hci.readRssi(this._handles[t])},l.prototype.init=function(){this.onSigIntBinded=this.onSigInt.bind(this),this._gap.on("scanParametersSet",this.onScanParametersSet.bind(this)),this._gap.on("scanStart",this.onScanStart.bind(this)),this._gap.on("scanStop",this.onScanStop.bind(this)),this._gap.on("discover",this.onDiscover.bind(this)),this._hci.on("stateChange",this.onStateChange.bind(this)),this._hci.on("addressChange",this.onAddressChange.bind(this)),this._hci.on("leConnComplete",this.onLeConnComplete.bind(this)),this._hci.on("leConnUpdateComplete",this.onLeConnUpdateComplete.bind(this)),this._hci.on("rssiRead",this.onRssiRead.bind(this)),this._hci.on("disconnComplete",this.onDisconnComplete.bind(this)),this._hci.on("encryptChange",this.onEncryptChange.bind(this)),this._hci.on("aclDataPkt",this.onAclDataPkt.bind(this)),this._hci.init(),process.on("SIGINT",this.onSigIntBinded),process.on("exit",this.onExit.bind(this))},l.prototype.onSigInt=function(){const t=process.listeners("SIGINT");t[t.length-1]===this.onSigIntBinded&&process.exit(1)},l.prototype.onExit=function(){this.stopScanning();for(const t in this._aclStreams)this._hci.disconnect(t)},l.prototype.onStateChange=function(t){this._state!==t&&(this._state=t,"unauthorized"===t?(console.log("noble warning: adapter state unauthorized, please run as root or with sudo"),console.log("               or see README for information on running without root/sudo:"),console.log("               https://github.com/sandeepmistry/noble#running-on-linux")):"unsupported"===t&&(console.log("noble warning: adapter does not support Bluetooth Low Energy (BLE, Bluetooth Smart)."),console.log("               Try to run with environment variable:"),console.log("               [sudo] NOBLE_HCI_DEVICE_ID=x node ...")),this.emit("stateChange",t))},l.prototype.onAddressChange=function(t){this.emit("addressChange",t)},l.prototype.onScanParametersSet=function(){this.emit("scanParametersSet")},l.prototype.onScanStart=function(t){this.emit("scanStart",t)},l.prototype.onScanStop=function(){this.emit("scanStop")},l.prototype.onDiscover=function(t,e,n,r,i,o,a){if(void 0===this._scanServiceUuids)return;let s=i.serviceUuids||[];const c=i.serviceData||[];let u=0===this._scanServiceUuids.length;if(!u){let t;for(t in s=s.slice(),c)s.push(c[t].uuid);for(t in s)if(u=-1!==this._scanServiceUuids.indexOf(s[t]),u)break}if(u){const t=e.split(":").join("");this._addresses[t]=e,this._addresseTypes[t]=n,this._connectable[t]=r,this.scannable[t]=a,this.emit("discover",t,e,n,r,i,o,a)}},l.prototype.onLeConnComplete=function(t,e,n,r,i,s,l,f,h){if(0!==n&&void 0!==n)return;let p=null,d=null;if(0===t){p=i.split(":").join("").toLowerCase();const t=new o(this._hci,e,this._hci.addressType,this._hci.address,r,i),n=new a(i,t),s=new u(e,t);this._gatts[p]=this._gatts[e]=n,this._signalings[p]=this._signalings[e]=s,this._aclStreams[e]=t,this._handles[p]=e,this._handles[e]=p,this._gatts[e].on("mtu",this.onMtu.bind(this)),this._gatts[e].on("servicesDiscover",this.onServicesDiscovered.bind(this)),this._gatts[e].on("servicesDiscovered",this.onServicesDiscoveredEX.bind(this)),this._gatts[e].on("includedServicesDiscover",this.onIncludedServicesDiscovered.bind(this)),this._gatts[e].on("characteristicsDiscover",this.onCharacteristicsDiscovered.bind(this)),this._gatts[e].on("characteristicsDiscovered",this.onCharacteristicsDiscoveredEX.bind(this)),this._gatts[e].on("read",this.onRead.bind(this)),this._gatts[e].on("write",this.onWrite.bind(this)),this._gatts[e].on("broadcast",this.onBroadcast.bind(this)),this._gatts[e].on("notify",this.onNotify.bind(this)),this._gatts[e].on("notification",this.onNotification.bind(this)),this._gatts[e].on("descriptorsDiscover",this.onDescriptorsDiscovered.bind(this)),this._gatts[e].on("valueRead",this.onValueRead.bind(this)),this._gatts[e].on("valueWrite",this.onValueWrite.bind(this)),this._gatts[e].on("handleRead",this.onHandleRead.bind(this)),this._gatts[e].on("handleWrite",this.onHandleWrite.bind(this)),this._gatts[e].on("handleNotify",this.onHandleNotify.bind(this)),this._signalings[e].on("connectionParameterUpdateRequest",this.onConnectionParameterUpdateRequest.bind(this)),this._gatts[e].exchangeMtu()}else{p=this._pendingConnectionUuid;let e=c.STATUS_MAPPER[t]||"HCI Error: Unknown";e+=` (0x${t.toString(16)})`,d=new Error(e)}if(this.emit("connect",p,d),this._connectionQueue.length>0){const t=this._connectionQueue.shift(),e=t.id;i=this._addresses[e],r=this._addresseTypes[e],this._pendingConnectionUuid=e,this._hci.createLeConn(i,r,t.params)}else this._pendingConnectionUuid=null},l.prototype.onLeConnUpdateComplete=function(t,e,n,r){},l.prototype.onDisconnComplete=function(t,e){const n=this._handles[t];n?(this._aclStreams[t].push(null,null),this._gatts[t].removeAllListeners(),this._signalings[t].removeAllListeners(),delete this._gatts[n],delete this._gatts[t],delete this._signalings[n],delete this._signalings[t],delete this._aclStreams[t],delete this._handles[n],delete this._handles[t],this.emit("disconnect",n,e)):console.warn(`noble warning: unknown handle ${t} disconnected!`)},l.prototype.onEncryptChange=function(t,e){const n=this._aclStreams[t];n&&n.pushEncrypt(e)},l.prototype.onMtu=function(t,e){const n=t.split(":").join("").toLowerCase();this.emit("onMtu",n,e)},l.prototype.onRssiRead=function(t,e){this.emit("rssiUpdate",this._handles[t],e)},l.prototype.onAclDataPkt=function(t,e,n){const r=this._aclStreams[t];r&&r.push(e,n)},l.prototype.addService=function(t,e){const n=this._handles[t],r=this._gatts[n];r?r.addService(e):console.warn("noble warning: unknown peripheral "+t)},l.prototype.discoverServices=function(t,e){const n=this._handles[t],r=this._gatts[n];r?r.discoverServices(e||[]):console.warn("noble warning: unknown peripheral "+t)},l.prototype.onServicesDiscovered=function(t,e){const n=t.split(":").join("").toLowerCase();this.emit("servicesDiscover",n,e)},l.prototype.onServicesDiscoveredEX=function(t,e){const n=t.split(":").join("").toLowerCase();this.emit("servicesDiscovered",n,e)},l.prototype.discoverIncludedServices=function(t,e,n){const r=this._handles[t],i=this._gatts[r];i?i.discoverIncludedServices(e,n||[]):console.warn("noble warning: unknown peripheral "+t)},l.prototype.onIncludedServicesDiscovered=function(t,e,n){const r=t.split(":").join("").toLowerCase();this.emit("includedServicesDiscover",r,e,n)},l.prototype.addCharacteristics=function(t,e,n){const r=this._handles[t],i=this._gatts[r];i?i.addCharacteristics(e,n):console.warn("noble warning: unknown peripheral "+t)},l.prototype.discoverCharacteristics=function(t,e,n){const r=this._handles[t],i=this._gatts[r];i?i.discoverCharacteristics(e,n||[]):console.warn("noble warning: unknown peripheral "+t)},l.prototype.onCharacteristicsDiscovered=function(t,e,n){const r=t.split(":").join("").toLowerCase();this.emit("characteristicsDiscover",r,e,n)},l.prototype.onCharacteristicsDiscoveredEX=function(t,e,n){const r=t.split(":").join("").toLowerCase();this.emit("characteristicsDiscovered",r,e,n)},l.prototype.read=function(t,e,n){const r=this._handles[t],i=this._gatts[r];i?i.read(e,n):console.warn("noble warning: unknown peripheral "+t)},l.prototype.onRead=function(t,e,n,r){const i=t.split(":").join("").toLowerCase();this.emit("read",i,e,n,r,!1)},l.prototype.write=function(t,e,n,r,i){const o=this._handles[t],a=this._gatts[o];a?a.write(e,n,r,i):console.warn("noble warning: unknown peripheral "+t)},l.prototype.onWrite=function(t,e,n){const r=t.split(":").join("").toLowerCase();this.emit("write",r,e,n)},l.prototype.broadcast=function(t,e,n,r){const i=this._handles[t],o=this._gatts[i];o?o.broadcast(e,n,r):console.warn("noble warning: unknown peripheral "+t)},l.prototype.onBroadcast=function(t,e,n,r){const i=t.split(":").join("").toLowerCase();this.emit("broadcast",i,e,n,r)},l.prototype.notify=function(t,e,n,r){const i=this._handles[t],o=this._gatts[i];o?o.notify(e,n,r):console.warn("noble warning: unknown peripheral "+t)},l.prototype.onNotify=function(t,e,n,r){const i=t.split(":").join("").toLowerCase();this.emit("notify",i,e,n,r)},l.prototype.onNotification=function(t,e,n,r){const i=t.split(":").join("").toLowerCase();this.emit("read",i,e,n,r,!0)},l.prototype.discoverDescriptors=function(t,e,n){const r=this._handles[t],i=this._gatts[r];i?i.discoverDescriptors(e,n):console.warn("noble warning: unknown peripheral "+t)},l.prototype.onDescriptorsDiscovered=function(t,e,n,r){const i=t.split(":").join("").toLowerCase();this.emit("descriptorsDiscover",i,e,n,r)},l.prototype.readValue=function(t,e,n,r){const i=this._handles[t],o=this._gatts[i];o?o.readValue(e,n,r):console.warn("noble warning: unknown peripheral "+t)},l.prototype.onValueRead=function(t,e,n,r,i){const o=t.split(":").join("").toLowerCase();this.emit("valueRead",o,e,n,r,i)},l.prototype.writeValue=function(t,e,n,r,i){const o=this._handles[t],a=this._gatts[o];a?a.writeValue(e,n,r,i):console.warn("noble warning: unknown peripheral "+t)},l.prototype.onValueWrite=function(t,e,n,r){const i=t.split(":").join("").toLowerCase();this.emit("valueWrite",i,e,n,r)},l.prototype.readHandle=function(t,e){const n=this._handles[t],r=this._gatts[n];r?r.readHandle(e):console.warn("noble warning: unknown peripheral "+t)},l.prototype.onHandleRead=function(t,e,n){const r=t.split(":").join("").toLowerCase();this.emit("handleRead",r,e,n)},l.prototype.writeHandle=function(t,e,n,r){const i=this._handles[t],o=this._gatts[i];o?o.writeHandle(e,n,r):console.warn("noble warning: unknown peripheral "+t)},l.prototype.onHandleWrite=function(t,e){const n=t.split(":").join("").toLowerCase();this.emit("handleWrite",n,e)},l.prototype.onHandleNotify=function(t,e,n){const r=t.split(":").join("").toLowerCase();this.emit("handleNotify",r,e,n)},l.prototype.onConnectionParameterUpdateRequest=function(t,e,n,r,i){this._hci.connUpdateLe(t,e,n,r,i)},t.exports=l},function(t,e,n){"use strict";if(n(139),n(336),n(337),global._babelPolyfill)throw new Error("only one instance of babel-polyfill is allowed");global._babelPolyfill=!0;function r(t,e,n){t[e]||Object.defineProperty(t,e,{writable:!0,configurable:!0,value:n})}r(String.prototype,"padLeft","".padStart),r(String.prototype,"padRight","".padEnd),"pop,reverse,shift,keys,values,entries,indexOf,every,some,forEach,map,filter,find,findIndex,includes,join,slice,concat,push,splice,unshift,sort,lastIndexOf,reduce,reduceRight,copyWithin,fill".split(",").forEach((function(t){[][t]&&r(Array,t,Function.call.bind([][t]))}))},function(t,e,n){n(140),n(143),n(144),n(145),n(146),n(147),n(148),n(149),n(150),n(151),n(152),n(153),n(154),n(155),n(156),n(157),n(158),n(159),n(160),n(161),n(162),n(163),n(164),n(165),n(166),n(167),n(168),n(169),n(170),n(171),n(172),n(173),n(174),n(175),n(176),n(177),n(178),n(179),n(180),n(181),n(182),n(183),n(184),n(185),n(186),n(187),n(188),n(189),n(190),n(191),n(192),n(193),n(194),n(195),n(196),n(197),n(198),n(199),n(200),n(201),n(202),n(203),n(204),n(205),n(206),n(207),n(208),n(209),n(210),n(211),n(212),n(213),n(214),n(215),n(216),n(217),n(218),n(220),n(221),n(223),n(224),n(225),n(226),n(227),n(228),n(229),n(231),n(232),n(233),n(234),n(235),n(236),n(237),n(238),n(239),n(240),n(241),n(242),n(243),n(90),n(244),n(118),n(245),n(119),n(246),n(247),n(248),n(249),n(250),n(122),n(124),n(125),n(251),n(252),n(253),n(254),n(255),n(256),n(257),n(258),n(259),n(260),n(261),n(262),n(263),n(264),n(265),n(266),n(267),n(268),n(269),n(270),n(271),n(272),n(273),n(274),n(275),n(276),n(277),n(278),n(279),n(280),n(281),n(282),n(283),n(284),n(285),n(286),n(287),n(288),n(289),n(290),n(291),n(292),n(293),n(294),n(295),n(296),n(297),n(298),n(299),n(300),n(301),n(302),n(303),n(304),n(305),n(306),n(307),n(308),n(309),n(310),n(311),n(312),n(313),n(314),n(315),n(316),n(317),n(318),n(319),n(320),n(321),n(322),n(323),n(324),n(325),n(326),n(327),n(328),n(329),n(330),n(331),n(332),n(333),n(334),n(335),t.exports=n(20)},function(t,e,n){"use strict";var r=n(2),i=n(15),o=n(7),a=n(0),s=n(12),c=n(32).KEY,u=n(3),l=n(49),f=n(45),h=n(35),p=n(5),d=n(100),y=n(71),v=n(142),m=n(57),g=n(1),_=n(4),b=n(9),E=n(16),w=n(25),S=n(34),I=n(38),C=n(103),T=n(17),A=n(56),k=n(8),P=n(36),R=T.f,O=k.f,D=C.f,x=r.Symbol,U=r.JSON,N=U&&U.stringify,B=p("_hidden"),M=p("toPrimitive"),L={}.propertyIsEnumerable,j=l("symbol-registry"),F=l("symbols"),H=l("op-symbols"),G=Object.prototype,V="function"==typeof x&&!!A.f,Y=r.QObject,W=!Y||!Y.prototype||!Y.prototype.findChild,q=o&&u((function(){return 7!=I(O({},"a",{get:function(){return O(this,"a",{value:7}).a}})).a}))?function(t,e,n){var r=R(G,e);r&&delete G[e],O(t,e,n),r&&t!==G&&O(G,e,r)}:O,X=function(t){var e=F[t]=I(x.prototype);return e._k=t,e},$=V&&"symbol"==typeof x.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof x},Q=function(t,e,n){return t===G&&Q(H,e,n),g(t),e=w(e,!0),g(n),i(F,e)?(n.enumerable?(i(t,B)&&t[B][e]&&(t[B][e]=!1),n=I(n,{enumerable:S(0,!1)})):(i(t,B)||O(t,B,S(1,{})),t[B][e]=!0),q(t,e,n)):O(t,e,n)},Z=function(t,e){g(t);for(var n,r=v(e=E(e)),i=0,o=r.length;o>i;)Q(t,n=r[i++],e[n]);return t},z=function(t){var e=L.call(this,t=w(t,!0));return!(this===G&&i(F,t)&&!i(H,t))&&(!(e||!i(this,t)||!i(F,t)||i(this,B)&&this[B][t])||e)},K=function(t,e){if(t=E(t),e=w(e,!0),t!==G||!i(F,e)||i(H,e)){var n=R(t,e);return!n||!i(F,e)||i(t,B)&&t[B][e]||(n.enumerable=!0),n}},J=function(t){for(var e,n=D(E(t)),r=[],o=0;n.length>o;)i(F,e=n[o++])||e==B||e==c||r.push(e);return r},tt=function(t){for(var e,n=t===G,r=D(n?H:E(t)),o=[],a=0;r.length>a;)!i(F,e=r[a++])||n&&!i(G,e)||o.push(F[e]);return o};V||(s((x=function(){if(this instanceof x)throw TypeError("Symbol is not a constructor!");var t=h(arguments.length>0?arguments[0]:void 0),e=function(n){this===G&&e.call(H,n),i(this,B)&&i(this[B],t)&&(this[B][t]=!1),q(this,t,S(1,n))};return o&&W&&q(G,t,{configurable:!0,set:e}),X(t)}).prototype,"toString",(function(){return this._k})),T.f=K,k.f=Q,n(39).f=C.f=J,n(51).f=z,A.f=tt,o&&!n(31)&&s(G,"propertyIsEnumerable",z,!0),d.f=function(t){return X(p(t))}),a(a.G+a.W+a.F*!V,{Symbol:x});for(var et="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),nt=0;et.length>nt;)p(et[nt++]);for(var rt=P(p.store),it=0;rt.length>it;)y(rt[it++]);a(a.S+a.F*!V,"Symbol",{for:function(t){return i(j,t+="")?j[t]:j[t]=x(t)},keyFor:function(t){if(!$(t))throw TypeError(t+" is not a symbol!");for(var e in j)if(j[e]===t)return e},useSetter:function(){W=!0},useSimple:function(){W=!1}}),a(a.S+a.F*!V,"Object",{create:function(t,e){return void 0===e?I(t):Z(I(t),e)},defineProperty:Q,defineProperties:Z,getOwnPropertyDescriptor:K,getOwnPropertyNames:J,getOwnPropertySymbols:tt});var ot=u((function(){A.f(1)}));a(a.S+a.F*ot,"Object",{getOwnPropertySymbols:function(t){return A.f(b(t))}}),U&&a(a.S+a.F*(!V||u((function(){var t=x();return"[null]"!=N([t])||"{}"!=N({a:t})||"{}"!=N(Object(t))}))),"JSON",{stringify:function(t){for(var e,n,r=[t],i=1;arguments.length>i;)r.push(arguments[i++]);if(n=e=r[1],(_(e)||void 0!==t)&&!$(t))return m(e)||(e=function(t,e){if("function"==typeof n&&(e=n.call(this,t,e)),!$(e))return e}),r[1]=e,N.apply(U,r)}}),x.prototype[M]||n(11)(x.prototype,M,x.prototype.valueOf),f(x,"Symbol"),f(Math,"Math",!0),f(r.JSON,"JSON",!0)},function(t,e,n){t.exports=n(49)("native-function-to-string",Function.toString)},function(t,e,n){var r=n(36),i=n(56),o=n(51);t.exports=function(t){var e=r(t),n=i.f;if(n)for(var a,s=n(t),c=o.f,u=0;s.length>u;)c.call(t,a=s[u++])&&e.push(a);return e}},function(t,e,n){var r=n(0);r(r.S,"Object",{create:n(38)})},function(t,e,n){var r=n(0);r(r.S+r.F*!n(7),"Object",{defineProperty:n(8).f})},function(t,e,n){var r=n(0);r(r.S+r.F*!n(7),"Object",{defineProperties:n(102)})},function(t,e,n){var r=n(16),i=n(17).f;n(27)("getOwnPropertyDescriptor",(function(){return function(t,e){return i(r(t),e)}}))},function(t,e,n){var r=n(9),i=n(18);n(27)("getPrototypeOf",(function(){return function(t){return i(r(t))}}))},function(t,e,n){var r=n(9),i=n(36);n(27)("keys",(function(){return function(t){return i(r(t))}}))},function(t,e,n){n(27)("getOwnPropertyNames",(function(){return n(103).f}))},function(t,e,n){var r=n(4),i=n(32).onFreeze;n(27)("freeze",(function(t){return function(e){return t&&r(e)?t(i(e)):e}}))},function(t,e,n){var r=n(4),i=n(32).onFreeze;n(27)("seal",(function(t){return function(e){return t&&r(e)?t(i(e)):e}}))},function(t,e,n){var r=n(4),i=n(32).onFreeze;n(27)("preventExtensions",(function(t){return function(e){return t&&r(e)?t(i(e)):e}}))},function(t,e,n){var r=n(4);n(27)("isFrozen",(function(t){return function(e){return!r(e)||!!t&&t(e)}}))},function(t,e,n){var r=n(4);n(27)("isSealed",(function(t){return function(e){return!r(e)||!!t&&t(e)}}))},function(t,e,n){var r=n(4);n(27)("isExtensible",(function(t){return function(e){return!!r(e)&&(!t||t(e))}}))},function(t,e,n){var r=n(0);r(r.S+r.F,"Object",{assign:n(104)})},function(t,e,n){var r=n(0);r(r.S,"Object",{is:n(105)})},function(t,e,n){var r=n(0);r(r.S,"Object",{setPrototypeOf:n(75).set})},function(t,e,n){"use strict";var r=n(46),i={};i[n(5)("toStringTag")]="z",i+""!="[object z]"&&n(12)(Object.prototype,"toString",(function(){return"[object "+r(this)+"]"}),!0)},function(t,e,n){var r=n(0);r(r.P,"Function",{bind:n(106)})},function(t,e,n){var r=n(8).f,i=Function.prototype,o=/^\s*function ([^ (]*)/;"name"in i||n(7)&&r(i,"name",{configurable:!0,get:function(){try{return(""+this).match(o)[1]}catch(t){return""}}})},function(t,e,n){"use strict";var r=n(4),i=n(18),o=n(5)("hasInstance"),a=Function.prototype;o in a||n(8).f(a,o,{value:function(t){if("function"!=typeof this||!r(t))return!1;if(!r(this.prototype))return t instanceof this;for(;t=i(t);)if(this.prototype===t)return!0;return!1}})},function(t,e,n){var r=n(0),i=n(108);r(r.G+r.F*(parseInt!=i),{parseInt:i})},function(t,e,n){var r=n(0),i=n(109);r(r.G+r.F*(parseFloat!=i),{parseFloat:i})},function(t,e,n){"use strict";var r=n(2),i=n(15),o=n(22),a=n(77),s=n(25),c=n(3),u=n(39).f,l=n(17).f,f=n(8).f,h=n(47).trim,p=r.Number,d=p,y=p.prototype,v="Number"==o(n(38)(y)),m="trim"in String.prototype,g=function(t){var e=s(t,!1);if("string"==typeof e&&e.length>2){var n,r,i,o=(e=m?e.trim():h(e,3)).charCodeAt(0);if(43===o||45===o){if(88===(n=e.charCodeAt(2))||120===n)return NaN}else if(48===o){switch(e.charCodeAt(1)){case 66:case 98:r=2,i=49;break;case 79:case 111:r=8,i=55;break;default:return+e}for(var a,c=e.slice(2),u=0,l=c.length;u<l;u++)if((a=c.charCodeAt(u))<48||a>i)return NaN;return parseInt(c,r)}}return+e};if(!p(" 0o1")||!p("0b1")||p("+0x1")){p=function(t){var e=arguments.length<1?0:t,n=this;return n instanceof p&&(v?c((function(){y.valueOf.call(n)})):"Number"!=o(n))?a(new d(g(e)),n,p):g(e)};for(var _,b=n(7)?u(d):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),E=0;b.length>E;E++)i(d,_=b[E])&&!i(p,_)&&f(p,_,l(d,_));p.prototype=y,y.constructor=p,n(12)(r,"Number",p)}},function(t,e,n){"use strict";var r=n(0),i=n(23),o=n(110),a=n(78),s=1..toFixed,c=Math.floor,u=[0,0,0,0,0,0],l="Number.toFixed: incorrect invocation!",f=function(t,e){for(var n=-1,r=e;++n<6;)r+=t*u[n],u[n]=r%1e7,r=c(r/1e7)},h=function(t){for(var e=6,n=0;--e>=0;)n+=u[e],u[e]=c(n/t),n=n%t*1e7},p=function(){for(var t=6,e="";--t>=0;)if(""!==e||0===t||0!==u[t]){var n=String(u[t]);e=""===e?n:e+a.call("0",7-n.length)+n}return e},d=function(t,e,n){return 0===e?n:e%2==1?d(t,e-1,n*t):d(t*t,e/2,n)};r(r.P+r.F*(!!s&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!n(3)((function(){s.call({})}))),"Number",{toFixed:function(t){var e,n,r,s,c=o(this,l),u=i(t),y="",v="0";if(u<0||u>20)throw RangeError(l);if(c!=c)return"NaN";if(c<=-1e21||c>=1e21)return String(c);if(c<0&&(y="-",c=-c),c>1e-21)if(n=(e=function(t){for(var e=0,n=t;n>=4096;)e+=12,n/=4096;for(;n>=2;)e+=1,n/=2;return e}(c*d(2,69,1))-69)<0?c*d(2,-e,1):c/d(2,e,1),n*=4503599627370496,(e=52-e)>0){for(f(0,n),r=u;r>=7;)f(1e7,0),r-=7;for(f(d(10,r,1),0),r=e-1;r>=23;)h(1<<23),r-=23;h(1<<r),f(1,1),h(2),v=p()}else f(0,n),f(1<<-e,0),v=p()+a.call("0",u);return v=u>0?y+((s=v.length)<=u?"0."+a.call("0",u-s)+v:v.slice(0,s-u)+"."+v.slice(s-u)):y+v}})},function(t,e,n){"use strict";var r=n(0),i=n(3),o=n(110),a=1..toPrecision;r(r.P+r.F*(i((function(){return"1"!==a.call(1,void 0)}))||!i((function(){a.call({})}))),"Number",{toPrecision:function(t){var e=o(this,"Number#toPrecision: incorrect invocation!");return void 0===t?a.call(e):a.call(e,t)}})},function(t,e,n){var r=n(0);r(r.S,"Number",{EPSILON:Math.pow(2,-52)})},function(t,e,n){var r=n(0),i=n(2).isFinite;r(r.S,"Number",{isFinite:function(t){return"number"==typeof t&&i(t)}})},function(t,e,n){var r=n(0);r(r.S,"Number",{isInteger:n(111)})},function(t,e,n){var r=n(0);r(r.S,"Number",{isNaN:function(t){return t!=t}})},function(t,e,n){var r=n(0),i=n(111),o=Math.abs;r(r.S,"Number",{isSafeInteger:function(t){return i(t)&&o(t)<=9007199254740991}})},function(t,e,n){var r=n(0);r(r.S,"Number",{MAX_SAFE_INTEGER:9007199254740991})},function(t,e,n){var r=n(0);r(r.S,"Number",{MIN_SAFE_INTEGER:-9007199254740991})},function(t,e,n){var r=n(0),i=n(109);r(r.S+r.F*(Number.parseFloat!=i),"Number",{parseFloat:i})},function(t,e,n){var r=n(0),i=n(108);r(r.S+r.F*(Number.parseInt!=i),"Number",{parseInt:i})},function(t,e,n){var r=n(0),i=n(112),o=Math.sqrt,a=Math.acosh;r(r.S+r.F*!(a&&710==Math.floor(a(Number.MAX_VALUE))&&a(1/0)==1/0),"Math",{acosh:function(t){return(t=+t)<1?NaN:t>94906265.62425156?Math.log(t)+Math.LN2:i(t-1+o(t-1)*o(t+1))}})},function(t,e,n){var r=n(0),i=Math.asinh;r(r.S+r.F*!(i&&1/i(0)>0),"Math",{asinh:function t(e){return isFinite(e=+e)&&0!=e?e<0?-t(-e):Math.log(e+Math.sqrt(e*e+1)):e}})},function(t,e,n){var r=n(0),i=Math.atanh;r(r.S+r.F*!(i&&1/i(-0)<0),"Math",{atanh:function(t){return 0==(t=+t)?t:Math.log((1+t)/(1-t))/2}})},function(t,e,n){var r=n(0),i=n(79);r(r.S,"Math",{cbrt:function(t){return i(t=+t)*Math.pow(Math.abs(t),1/3)}})},function(t,e,n){var r=n(0);r(r.S,"Math",{clz32:function(t){return(t>>>=0)?31-Math.floor(Math.log(t+.5)*Math.LOG2E):32}})},function(t,e,n){var r=n(0),i=Math.exp;r(r.S,"Math",{cosh:function(t){return(i(t=+t)+i(-t))/2}})},function(t,e,n){var r=n(0),i=n(80);r(r.S+r.F*(i!=Math.expm1),"Math",{expm1:i})},function(t,e,n){var r=n(0);r(r.S,"Math",{fround:n(113)})},function(t,e,n){var r=n(0),i=Math.abs;r(r.S,"Math",{hypot:function(t,e){for(var n,r,o=0,a=0,s=arguments.length,c=0;a<s;)c<(n=i(arguments[a++]))?(o=o*(r=c/n)*r+1,c=n):o+=n>0?(r=n/c)*r:n;return c===1/0?1/0:c*Math.sqrt(o)}})},function(t,e,n){var r=n(0),i=Math.imul;r(r.S+r.F*n(3)((function(){return-5!=i(4294967295,5)||2!=i.length})),"Math",{imul:function(t,e){var n=+t,r=+e,i=65535&n,o=65535&r;return 0|i*o+((65535&n>>>16)*o+i*(65535&r>>>16)<<16>>>0)}})},function(t,e,n){var r=n(0);r(r.S,"Math",{log10:function(t){return Math.log(t)*Math.LOG10E}})},function(t,e,n){var r=n(0);r(r.S,"Math",{log1p:n(112)})},function(t,e,n){var r=n(0);r(r.S,"Math",{log2:function(t){return Math.log(t)/Math.LN2}})},function(t,e,n){var r=n(0);r(r.S,"Math",{sign:n(79)})},function(t,e,n){var r=n(0),i=n(80),o=Math.exp;r(r.S+r.F*n(3)((function(){return-2e-17!=!Math.sinh(-2e-17)})),"Math",{sinh:function(t){return Math.abs(t=+t)<1?(i(t)-i(-t))/2:(o(t-1)-o(-t-1))*(Math.E/2)}})},function(t,e,n){var r=n(0),i=n(80),o=Math.exp;r(r.S,"Math",{tanh:function(t){var e=i(t=+t),n=i(-t);return e==1/0?1:n==1/0?-1:(e-n)/(o(t)+o(-t))}})},function(t,e,n){var r=n(0);r(r.S,"Math",{trunc:function(t){return(t>0?Math.floor:Math.ceil)(t)}})},function(t,e,n){var r=n(0),i=n(37),o=String.fromCharCode,a=String.fromCodePoint;r(r.S+r.F*(!!a&&1!=a.length),"String",{fromCodePoint:function(t){for(var e,n=[],r=arguments.length,a=0;r>a;){if(e=+arguments[a++],i(e,1114111)!==e)throw RangeError(e+" is not a valid code point");n.push(e<65536?o(e):o(55296+((e-=65536)>>10),e%1024+56320))}return n.join("")}})},function(t,e,n){var r=n(0),i=n(16),o=n(6);r(r.S,"String",{raw:function(t){for(var e=i(t.raw),n=o(e.length),r=arguments.length,a=[],s=0;n>s;)a.push(String(e[s++])),s<r&&a.push(String(arguments[s]));return a.join("")}})},function(t,e,n){"use strict";n(47)("trim",(function(t){return function(){return t(this,3)}}))},function(t,e,n){"use strict";var r=n(58)(!0);n(81)(String,"String",(function(t){this._t=String(t),this._i=0}),(function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=r(e,n),this._i+=t.length,{value:t,done:!1})}))},function(t,e,n){"use strict";var r=n(0),i=n(58)(!1);r(r.P,"String",{codePointAt:function(t){return i(this,t)}})},function(t,e,n){"use strict";var r=n(0),i=n(6),o=n(83),a="".endsWith;r(r.P+r.F*n(84)("endsWith"),"String",{endsWith:function(t){var e=o(this,t,"endsWith"),n=arguments.length>1?arguments[1]:void 0,r=i(e.length),s=void 0===n?r:Math.min(i(n),r),c=String(t);return a?a.call(e,c,s):e.slice(s-c.length,s)===c}})},function(t,e,n){"use strict";var r=n(0),i=n(83);r(r.P+r.F*n(84)("includes"),"String",{includes:function(t){return!!~i(this,t,"includes").indexOf(t,arguments.length>1?arguments[1]:void 0)}})},function(t,e,n){var r=n(0);r(r.P,"String",{repeat:n(78)})},function(t,e,n){"use strict";var r=n(0),i=n(6),o=n(83),a="".startsWith;r(r.P+r.F*n(84)("startsWith"),"String",{startsWith:function(t){var e=o(this,t,"startsWith"),n=i(Math.min(arguments.length>1?arguments[1]:void 0,e.length)),r=String(t);return a?a.call(e,r,n):e.slice(n,n+r.length)===r}})},function(t,e,n){"use strict";n(13)("anchor",(function(t){return function(e){return t(this,"a","name",e)}}))},function(t,e,n){"use strict";n(13)("big",(function(t){return function(){return t(this,"big","","")}}))},function(t,e,n){"use strict";n(13)("blink",(function(t){return function(){return t(this,"blink","","")}}))},function(t,e,n){"use strict";n(13)("bold",(function(t){return function(){return t(this,"b","","")}}))},function(t,e,n){"use strict";n(13)("fixed",(function(t){return function(){return t(this,"tt","","")}}))},function(t,e,n){"use strict";n(13)("fontcolor",(function(t){return function(e){return t(this,"font","color",e)}}))},function(t,e,n){"use strict";n(13)("fontsize",(function(t){return function(e){return t(this,"font","size",e)}}))},function(t,e,n){"use strict";n(13)("italics",(function(t){return function(){return t(this,"i","","")}}))},function(t,e,n){"use strict";n(13)("link",(function(t){return function(e){return t(this,"a","href",e)}}))},function(t,e,n){"use strict";n(13)("small",(function(t){return function(){return t(this,"small","","")}}))},function(t,e,n){"use strict";n(13)("strike",(function(t){return function(){return t(this,"strike","","")}}))},function(t,e,n){"use strict";n(13)("sub",(function(t){return function(){return t(this,"sub","","")}}))},function(t,e,n){"use strict";n(13)("sup",(function(t){return function(){return t(this,"sup","","")}}))},function(t,e,n){var r=n(0);r(r.S,"Date",{now:function(){return(new Date).getTime()}})},function(t,e,n){"use strict";var r=n(0),i=n(9),o=n(25);r(r.P+r.F*n(3)((function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})})),"Date",{toJSON:function(t){var e=i(this),n=o(e);return"number"!=typeof n||isFinite(n)?e.toISOString():null}})},function(t,e,n){var r=n(0),i=n(219);r(r.P+r.F*(Date.prototype.toISOString!==i),"Date",{toISOString:i})},function(t,e,n){"use strict";var r=n(3),i=Date.prototype.getTime,o=Date.prototype.toISOString,a=function(t){return t>9?t:"0"+t};t.exports=r((function(){return"0385-07-25T07:06:39.999Z"!=o.call(new Date(-50000000000001))}))||!r((function(){o.call(new Date(NaN))}))?function(){if(!isFinite(i.call(this)))throw RangeError("Invalid time value");var t=this,e=t.getUTCFullYear(),n=t.getUTCMilliseconds(),r=e<0?"-":e>9999?"+":"";return r+("00000"+Math.abs(e)).slice(r?-6:-4)+"-"+a(t.getUTCMonth()+1)+"-"+a(t.getUTCDate())+"T"+a(t.getUTCHours())+":"+a(t.getUTCMinutes())+":"+a(t.getUTCSeconds())+"."+(n>99?n:"0"+a(n))+"Z"}:o},function(t,e,n){var r=Date.prototype,i=r.toString,o=r.getTime;new Date(NaN)+""!="Invalid Date"&&n(12)(r,"toString",(function(){var t=o.call(this);return t==t?i.call(this):"Invalid Date"}))},function(t,e,n){var r=n(5)("toPrimitive"),i=Date.prototype;r in i||n(11)(i,r,n(222))},function(t,e,n){"use strict";var r=n(1),i=n(25);t.exports=function(t){if("string"!==t&&"number"!==t&&"default"!==t)throw TypeError("Incorrect hint");return i(r(this),"number"!=t)}},function(t,e,n){var r=n(0);r(r.S,"Array",{isArray:n(57)})},function(t,e,n){"use strict";var r=n(21),i=n(0),o=n(9),a=n(114),s=n(85),c=n(6),u=n(86),l=n(87);i(i.S+i.F*!n(60)((function(t){Array.from(t)})),"Array",{from:function(t){var e,n,i,f,h=o(t),p="function"==typeof this?this:Array,d=arguments.length,y=d>1?arguments[1]:void 0,v=void 0!==y,m=0,g=l(h);if(v&&(y=r(y,d>2?arguments[2]:void 0,2)),null==g||p==Array&&s(g))for(n=new p(e=c(h.length));e>m;m++)u(n,m,v?y(h[m],m):h[m]);else for(f=g.call(h),n=new p;!(i=f.next()).done;m++)u(n,m,v?a(f,y,[i.value,m],!0):i.value);return n.length=m,n}})},function(t,e,n){"use strict";var r=n(0),i=n(86);r(r.S+r.F*n(3)((function(){function t(){}return!(Array.of.call(t)instanceof t)})),"Array",{of:function(){for(var t=0,e=arguments.length,n=new("function"==typeof this?this:Array)(e);e>t;)i(n,t,arguments[t++]);return n.length=e,n}})},function(t,e,n){"use strict";var r=n(0),i=n(16),o=[].join;r(r.P+r.F*(n(50)!=Object||!n(24)(o)),"Array",{join:function(t){return o.call(i(this),void 0===t?",":t)}})},function(t,e,n){"use strict";var r=n(0),i=n(74),o=n(22),a=n(37),s=n(6),c=[].slice;r(r.P+r.F*n(3)((function(){i&&c.call(i)})),"Array",{slice:function(t,e){var n=s(this.length),r=o(this);if(e=void 0===e?n:e,"Array"==r)return c.call(this,t,e);for(var i=a(t,n),u=a(e,n),l=s(u-i),f=new Array(l),h=0;h<l;h++)f[h]="String"==r?this.charAt(i+h):this[i+h];return f}})},function(t,e,n){"use strict";var r=n(0),i=n(10),o=n(9),a=n(3),s=[].sort,c=[1,2,3];r(r.P+r.F*(a((function(){c.sort(void 0)}))||!a((function(){c.sort(null)}))||!n(24)(s)),"Array",{sort:function(t){return void 0===t?s.call(o(this)):s.call(o(this),i(t))}})},function(t,e,n){"use strict";var r=n(0),i=n(28)(0),o=n(24)([].forEach,!0);r(r.P+r.F*!o,"Array",{forEach:function(t){return i(this,t,arguments[1])}})},function(t,e,n){var r=n(4),i=n(57),o=n(5)("species");t.exports=function(t){var e;return i(t)&&("function"!=typeof(e=t.constructor)||e!==Array&&!i(e.prototype)||(e=void 0),r(e)&&null===(e=e[o])&&(e=void 0)),void 0===e?Array:e}},function(t,e,n){"use strict";var r=n(0),i=n(28)(1);r(r.P+r.F*!n(24)([].map,!0),"Array",{map:function(t){return i(this,t,arguments[1])}})},function(t,e,n){"use strict";var r=n(0),i=n(28)(2);r(r.P+r.F*!n(24)([].filter,!0),"Array",{filter:function(t){return i(this,t,arguments[1])}})},function(t,e,n){"use strict";var r=n(0),i=n(28)(3);r(r.P+r.F*!n(24)([].some,!0),"Array",{some:function(t){return i(this,t,arguments[1])}})},function(t,e,n){"use strict";var r=n(0),i=n(28)(4);r(r.P+r.F*!n(24)([].every,!0),"Array",{every:function(t){return i(this,t,arguments[1])}})},function(t,e,n){"use strict";var r=n(0),i=n(115);r(r.P+r.F*!n(24)([].reduce,!0),"Array",{reduce:function(t){return i(this,t,arguments.length,arguments[1],!1)}})},function(t,e,n){"use strict";var r=n(0),i=n(115);r(r.P+r.F*!n(24)([].reduceRight,!0),"Array",{reduceRight:function(t){return i(this,t,arguments.length,arguments[1],!0)}})},function(t,e,n){"use strict";var r=n(0),i=n(55)(!1),o=[].indexOf,a=!!o&&1/[1].indexOf(1,-0)<0;r(r.P+r.F*(a||!n(24)(o)),"Array",{indexOf:function(t){return a?o.apply(this,arguments)||0:i(this,t,arguments[1])}})},function(t,e,n){"use strict";var r=n(0),i=n(16),o=n(23),a=n(6),s=[].lastIndexOf,c=!!s&&1/[1].lastIndexOf(1,-0)<0;r(r.P+r.F*(c||!n(24)(s)),"Array",{lastIndexOf:function(t){if(c)return s.apply(this,arguments)||0;var e=i(this),n=a(e.length),r=n-1;for(arguments.length>1&&(r=Math.min(r,o(arguments[1]))),r<0&&(r=n+r);r>=0;r--)if(r in e&&e[r]===t)return r||0;return-1}})},function(t,e,n){var r=n(0);r(r.P,"Array",{copyWithin:n(116)}),n(33)("copyWithin")},function(t,e,n){var r=n(0);r(r.P,"Array",{fill:n(89)}),n(33)("fill")},function(t,e,n){"use strict";var r=n(0),i=n(28)(5),o=!0;"find"in[]&&Array(1).find((function(){o=!1})),r(r.P+r.F*o,"Array",{find:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),n(33)("find")},function(t,e,n){"use strict";var r=n(0),i=n(28)(6),o="findIndex",a=!0;o in[]&&Array(1)[o]((function(){a=!1})),r(r.P+r.F*a,"Array",{findIndex:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),n(33)(o)},function(t,e,n){n(40)("Array")},function(t,e,n){var r=n(2),i=n(77),o=n(8).f,a=n(39).f,s=n(59),c=n(52),u=r.RegExp,l=u,f=u.prototype,h=/a/g,p=/a/g,d=new u(h)!==h;if(n(7)&&(!d||n(3)((function(){return p[n(5)("match")]=!1,u(h)!=h||u(p)==p||"/a/i"!=u(h,"i")})))){u=function(t,e){var n=this instanceof u,r=s(t),o=void 0===e;return!n&&r&&t.constructor===u&&o?t:i(d?new l(r&&!o?t.source:t,e):l((r=t instanceof u)?t.source:t,r&&o?c.call(t):e),n?this:f,u)};for(var y=function(t){t in u||o(u,t,{configurable:!0,get:function(){return l[t]},set:function(e){l[t]=e}})},v=a(l),m=0;v.length>m;)y(v[m++]);f.constructor=u,u.prototype=f,n(12)(r,"RegExp",u)}n(40)("RegExp")},function(t,e,n){"use strict";n(119);var r=n(1),i=n(52),o=n(7),a=/./.toString,s=function(t){n(12)(RegExp.prototype,"toString",t,!0)};n(3)((function(){return"/a/b"!=a.call({source:"a",flags:"b"})}))?s((function(){var t=r(this);return"/".concat(t.source,"/","flags"in t?t.flags:!o&&t instanceof RegExp?i.call(t):void 0)})):"toString"!=a.name&&s((function(){return a.call(this)}))},function(t,e,n){"use strict";var r=n(1),i=n(6),o=n(92),a=n(61);n(62)("match",1,(function(t,e,n,s){return[function(n){var r=t(this),i=null==n?void 0:n[e];return void 0!==i?i.call(n,r):new RegExp(n)[e](String(r))},function(t){var e=s(n,t,this);if(e.done)return e.value;var c=r(t),u=String(this);if(!c.global)return a(c,u);var l=c.unicode;c.lastIndex=0;for(var f,h=[],p=0;null!==(f=a(c,u));){var d=String(f[0]);h[p]=d,""===d&&(c.lastIndex=o(u,i(c.lastIndex),l)),p++}return 0===p?null:h}]}))},function(t,e,n){"use strict";var r=n(1),i=n(9),o=n(6),a=n(23),s=n(92),c=n(61),u=Math.max,l=Math.min,f=Math.floor,h=/\$([$&`']|\d\d?|<[^>]*>)/g,p=/\$([$&`']|\d\d?)/g;n(62)("replace",2,(function(t,e,n,d){return[function(r,i){var o=t(this),a=null==r?void 0:r[e];return void 0!==a?a.call(r,o,i):n.call(String(o),r,i)},function(t,e){var i=d(n,t,this,e);if(i.done)return i.value;var f=r(t),h=String(this),p="function"==typeof e;p||(e=String(e));var v=f.global;if(v){var m=f.unicode;f.lastIndex=0}for(var g=[];;){var _=c(f,h);if(null===_)break;if(g.push(_),!v)break;""===String(_[0])&&(f.lastIndex=s(h,o(f.lastIndex),m))}for(var b,E="",w=0,S=0;S<g.length;S++){_=g[S];for(var I=String(_[0]),C=u(l(a(_.index),h.length),0),T=[],A=1;A<_.length;A++)T.push(void 0===(b=_[A])?b:String(b));var k=_.groups;if(p){var P=[I].concat(T,C,h);void 0!==k&&P.push(k);var R=String(e.apply(void 0,P))}else R=y(I,h,C,T,k,e);C>=w&&(E+=h.slice(w,C)+R,w=C+I.length)}return E+h.slice(w)}];function y(t,e,r,o,a,s){var c=r+t.length,u=o.length,l=p;return void 0!==a&&(a=i(a),l=h),n.call(s,l,(function(n,i){var s;switch(i.charAt(0)){case"$":return"$";case"&":return t;case"`":return e.slice(0,r);case"'":return e.slice(c);case"<":s=a[i.slice(1,-1)];break;default:var l=+i;if(0===l)return n;if(l>u){var h=f(l/10);return 0===h?n:h<=u?void 0===o[h-1]?i.charAt(1):o[h-1]+i.charAt(1):n}s=o[l-1]}return void 0===s?"":s}))}}))},function(t,e,n){"use strict";var r=n(1),i=n(105),o=n(61);n(62)("search",1,(function(t,e,n,a){return[function(n){var r=t(this),i=null==n?void 0:n[e];return void 0!==i?i.call(n,r):new RegExp(n)[e](String(r))},function(t){var e=a(n,t,this);if(e.done)return e.value;var s=r(t),c=String(this),u=s.lastIndex;i(u,0)||(s.lastIndex=0);var l=o(s,c);return i(s.lastIndex,u)||(s.lastIndex=u),null===l?-1:l.index}]}))},function(t,e,n){"use strict";var r=n(59),i=n(1),o=n(53),a=n(92),s=n(6),c=n(61),u=n(91),l=n(3),f=Math.min,h=[].push,p="length",d=!l((function(){RegExp(4294967295,"y")}));n(62)("split",2,(function(t,e,n,l){var y;return y="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1)[p]||2!="ab".split(/(?:ab)*/)[p]||4!=".".split(/(.?)(.?)/)[p]||".".split(/()()/)[p]>1||"".split(/.?/)[p]?function(t,e){var i=String(this);if(void 0===t&&0===e)return[];if(!r(t))return n.call(i,t,e);for(var o,a,s,c=[],l=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),f=0,d=void 0===e?4294967295:e>>>0,y=new RegExp(t.source,l+"g");(o=u.call(y,i))&&!((a=y.lastIndex)>f&&(c.push(i.slice(f,o.index)),o[p]>1&&o.index<i[p]&&h.apply(c,o.slice(1)),s=o[0][p],f=a,c[p]>=d));)y.lastIndex===o.index&&y.lastIndex++;return f===i[p]?!s&&y.test("")||c.push(""):c.push(i.slice(f)),c[p]>d?c.slice(0,d):c}:"0".split(void 0,0)[p]?function(t,e){return void 0===t&&0===e?[]:n.call(this,t,e)}:n,[function(n,r){var i=t(this),o=null==n?void 0:n[e];return void 0!==o?o.call(n,i,r):y.call(String(i),n,r)},function(t,e){var r=l(y,t,this,e,y!==n);if(r.done)return r.value;var u=i(t),h=String(this),p=o(u,RegExp),v=u.unicode,m=(u.ignoreCase?"i":"")+(u.multiline?"m":"")+(u.unicode?"u":"")+(d?"y":"g"),g=new p(d?u:"^(?:"+u.source+")",m),_=void 0===e?4294967295:e>>>0;if(0===_)return[];if(0===h.length)return null===c(g,h)?[h]:[];for(var b=0,E=0,w=[];E<h.length;){g.lastIndex=d?E:0;var S,I=c(g,d?h:h.slice(E));if(null===I||(S=f(s(g.lastIndex+(d?0:E)),h.length))===b)E=a(h,E,v);else{if(w.push(h.slice(b,E)),w.length===_)return w;for(var C=1;C<=I.length-1;C++)if(w.push(I[C]),w.length===_)return w;E=b=S}}return w.push(h.slice(b)),w}]}))},function(t,e,n){"use strict";var r,i,o,a,s=n(31),c=n(2),u=n(21),l=n(46),f=n(0),h=n(4),p=n(10),d=n(41),y=n(42),v=n(53),m=n(93).set,g=n(94)(),_=n(95),b=n(120),E=n(63),w=n(121),S=c.TypeError,I=c.process,C=I&&I.versions,T=C&&C.v8||"",A=c.Promise,k="process"==l(I),P=function(){},R=i=_.f,O=!!function(){try{var t=A.resolve(1),e=(t.constructor={})[n(5)("species")]=function(t){t(P,P)};return(k||"function"==typeof PromiseRejectionEvent)&&t.then(P)instanceof e&&0!==T.indexOf("6.6")&&-1===E.indexOf("Chrome/66")}catch(t){}}(),D=function(t){var e;return!(!h(t)||"function"!=typeof(e=t.then))&&e},x=function(t,e){if(!t._n){t._n=!0;var n=t._c;g((function(){for(var r=t._v,i=1==t._s,o=0,a=function(e){var n,o,a,s=i?e.ok:e.fail,c=e.resolve,u=e.reject,l=e.domain;try{s?(i||(2==t._h&&B(t),t._h=1),!0===s?n=r:(l&&l.enter(),n=s(r),l&&(l.exit(),a=!0)),n===e.promise?u(S("Promise-chain cycle")):(o=D(n))?o.call(n,c,u):c(n)):u(r)}catch(t){l&&!a&&l.exit(),u(t)}};n.length>o;)a(n[o++]);t._c=[],t._n=!1,e&&!t._h&&U(t)}))}},U=function(t){m.call(c,(function(){var e,n,r,i=t._v,o=N(t);if(o&&(e=b((function(){k?I.emit("unhandledRejection",i,t):(n=c.onunhandledrejection)?n({promise:t,reason:i}):(r=c.console)&&r.error&&r.error("Unhandled promise rejection",i)})),t._h=k||N(t)?2:1),t._a=void 0,o&&e.e)throw e.v}))},N=function(t){return 1!==t._h&&0===(t._a||t._c).length},B=function(t){m.call(c,(function(){var e;k?I.emit("rejectionHandled",t):(e=c.onrejectionhandled)&&e({promise:t,reason:t._v})}))},M=function(t){var e=this;e._d||(e._d=!0,(e=e._w||e)._v=t,e._s=2,e._a||(e._a=e._c.slice()),x(e,!0))},L=function(t){var e,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===t)throw S("Promise can't be resolved itself");(e=D(t))?g((function(){var r={_w:n,_d:!1};try{e.call(t,u(L,r,1),u(M,r,1))}catch(t){M.call(r,t)}})):(n._v=t,n._s=1,x(n,!1))}catch(t){M.call({_w:n,_d:!1},t)}}};O||(A=function(t){d(this,A,"Promise","_h"),p(t),r.call(this);try{t(u(L,this,1),u(M,this,1))}catch(t){M.call(this,t)}},(r=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=n(43)(A.prototype,{then:function(t,e){var n=R(v(this,A));return n.ok="function"!=typeof t||t,n.fail="function"==typeof e&&e,n.domain=k?I.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&x(this,!1),n.promise},catch:function(t){return this.then(void 0,t)}}),o=function(){var t=new r;this.promise=t,this.resolve=u(L,t,1),this.reject=u(M,t,1)},_.f=R=function(t){return t===A||t===a?new o(t):i(t)}),f(f.G+f.W+f.F*!O,{Promise:A}),n(45)(A,"Promise"),n(40)("Promise"),a=n(20).Promise,f(f.S+f.F*!O,"Promise",{reject:function(t){var e=R(this);return(0,e.reject)(t),e.promise}}),f(f.S+f.F*(s||!O),"Promise",{resolve:function(t){return w(s&&this===a?A:this,t)}}),f(f.S+f.F*!(O&&n(60)((function(t){A.all(t).catch(P)}))),"Promise",{all:function(t){var e=this,n=R(e),r=n.resolve,i=n.reject,o=b((function(){var n=[],o=0,a=1;y(t,!1,(function(t){var s=o++,c=!1;n.push(void 0),a++,e.resolve(t).then((function(t){c||(c=!0,n[s]=t,--a||r(n))}),i)})),--a||r(n)}));return o.e&&i(o.v),n.promise},race:function(t){var e=this,n=R(e),r=n.reject,i=b((function(){y(t,!1,(function(t){e.resolve(t).then(n.resolve,r)}))}));return i.e&&r(i.v),n.promise}})},function(t,e,n){"use strict";var r=n(126),i=n(44);n(64)("WeakSet",(function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}}),{add:function(t){return r.def(i(this,"WeakSet"),t,!0)}},r,!1,!0)},function(t,e,n){"use strict";var r=n(0),i=n(65),o=n(96),a=n(1),s=n(37),c=n(6),u=n(4),l=n(2).ArrayBuffer,f=n(53),h=o.ArrayBuffer,p=o.DataView,d=i.ABV&&l.isView,y=h.prototype.slice,v=i.VIEW;r(r.G+r.W+r.F*(l!==h),{ArrayBuffer:h}),r(r.S+r.F*!i.CONSTR,"ArrayBuffer",{isView:function(t){return d&&d(t)||u(t)&&v in t}}),r(r.P+r.U+r.F*n(3)((function(){return!new h(2).slice(1,void 0).byteLength})),"ArrayBuffer",{slice:function(t,e){if(void 0!==y&&void 0===e)return y.call(a(this),t);for(var n=a(this).byteLength,r=s(t,n),i=s(void 0===e?n:e,n),o=new(f(this,h))(c(i-r)),u=new p(this),l=new p(o),d=0;r<i;)l.setUint8(d++,u.getUint8(r++));return o}}),n(40)("ArrayBuffer")},function(t,e,n){var r=n(0);r(r.G+r.W+r.F*!n(65).ABV,{DataView:n(96).DataView})},function(t,e,n){n(29)("Int8",1,(function(t){return function(e,n,r){return t(this,e,n,r)}}))},function(t,e,n){n(29)("Uint8",1,(function(t){return function(e,n,r){return t(this,e,n,r)}}))},function(t,e,n){n(29)("Uint8",1,(function(t){return function(e,n,r){return t(this,e,n,r)}}),!0)},function(t,e,n){n(29)("Int16",2,(function(t){return function(e,n,r){return t(this,e,n,r)}}))},function(t,e,n){n(29)("Uint16",2,(function(t){return function(e,n,r){return t(this,e,n,r)}}))},function(t,e,n){n(29)("Int32",4,(function(t){return function(e,n,r){return t(this,e,n,r)}}))},function(t,e,n){n(29)("Uint32",4,(function(t){return function(e,n,r){return t(this,e,n,r)}}))},function(t,e,n){n(29)("Float32",4,(function(t){return function(e,n,r){return t(this,e,n,r)}}))},function(t,e,n){n(29)("Float64",8,(function(t){return function(e,n,r){return t(this,e,n,r)}}))},function(t,e,n){var r=n(0),i=n(10),o=n(1),a=(n(2).Reflect||{}).apply,s=Function.apply;r(r.S+r.F*!n(3)((function(){a((function(){}))})),"Reflect",{apply:function(t,e,n){var r=i(t),c=o(n);return a?a(r,e,c):s.call(r,e,c)}})},function(t,e,n){var r=n(0),i=n(38),o=n(10),a=n(1),s=n(4),c=n(3),u=n(106),l=(n(2).Reflect||{}).construct,f=c((function(){function t(){}return!(l((function(){}),[],t)instanceof t)})),h=!c((function(){l((function(){}))}));r(r.S+r.F*(f||h),"Reflect",{construct:function(t,e){o(t),a(e);var n=arguments.length<3?t:o(arguments[2]);if(h&&!f)return l(t,e,n);if(t==n){switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3])}var r=[null];return r.push.apply(r,e),new(u.apply(t,r))}var c=n.prototype,p=i(s(c)?c:Object.prototype),d=Function.apply.call(t,p,e);return s(d)?d:p}})},function(t,e,n){var r=n(8),i=n(0),o=n(1),a=n(25);i(i.S+i.F*n(3)((function(){Reflect.defineProperty(r.f({},1,{value:1}),1,{value:2})})),"Reflect",{defineProperty:function(t,e,n){o(t),e=a(e,!0),o(n);try{return r.f(t,e,n),!0}catch(t){return!1}}})},function(t,e,n){var r=n(0),i=n(17).f,o=n(1);r(r.S,"Reflect",{deleteProperty:function(t,e){var n=i(o(t),e);return!(n&&!n.configurable)&&delete t[e]}})},function(t,e,n){"use strict";var r=n(0),i=n(1),o=function(t){this._t=i(t),this._i=0;var e,n=this._k=[];for(e in t)n.push(e)};n(82)(o,"Object",(function(){var t,e=this._k;do{if(this._i>=e.length)return{value:void 0,done:!0}}while(!((t=e[this._i++])in this._t));return{value:t,done:!1}})),r(r.S,"Reflect",{enumerate:function(t){return new o(t)}})},function(t,e,n){var r=n(17),i=n(18),o=n(15),a=n(0),s=n(4),c=n(1);a(a.S,"Reflect",{get:function t(e,n){var a,u,l=arguments.length<3?e:arguments[2];return c(e)===l?e[n]:(a=r.f(e,n))?o(a,"value")?a.value:void 0!==a.get?a.get.call(l):void 0:s(u=i(e))?t(u,n,l):void 0}})},function(t,e,n){var r=n(17),i=n(0),o=n(1);i(i.S,"Reflect",{getOwnPropertyDescriptor:function(t,e){return r.f(o(t),e)}})},function(t,e,n){var r=n(0),i=n(18),o=n(1);r(r.S,"Reflect",{getPrototypeOf:function(t){return i(o(t))}})},function(t,e,n){var r=n(0);r(r.S,"Reflect",{has:function(t,e){return e in t}})},function(t,e,n){var r=n(0),i=n(1),o=Object.isExtensible;r(r.S,"Reflect",{isExtensible:function(t){return i(t),!o||o(t)}})},function(t,e,n){var r=n(0);r(r.S,"Reflect",{ownKeys:n(128)})},function(t,e,n){var r=n(0),i=n(1),o=Object.preventExtensions;r(r.S,"Reflect",{preventExtensions:function(t){i(t);try{return o&&o(t),!0}catch(t){return!1}}})},function(t,e,n){var r=n(8),i=n(17),o=n(18),a=n(15),s=n(0),c=n(34),u=n(1),l=n(4);s(s.S,"Reflect",{set:function t(e,n,s){var f,h,p=arguments.length<4?e:arguments[3],d=i.f(u(e),n);if(!d){if(l(h=o(e)))return t(h,n,s,p);d=c(0)}if(a(d,"value")){if(!1===d.writable||!l(p))return!1;if(f=i.f(p,n)){if(f.get||f.set||!1===f.writable)return!1;f.value=s,r.f(p,n,f)}else r.f(p,n,c(0,s));return!0}return void 0!==d.set&&(d.set.call(p,s),!0)}})},function(t,e,n){var r=n(0),i=n(75);i&&r(r.S,"Reflect",{setPrototypeOf:function(t,e){i.check(t,e);try{return i.set(t,e),!0}catch(t){return!1}}})},function(t,e,n){"use strict";var r=n(0),i=n(55)(!0);r(r.P,"Array",{includes:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),n(33)("includes")},function(t,e,n){"use strict";var r=n(0),i=n(129),o=n(9),a=n(6),s=n(10),c=n(88);r(r.P,"Array",{flatMap:function(t){var e,n,r=o(this);return s(t),e=a(r.length),n=c(r,0),i(n,r,r,e,0,1,t,arguments[1]),n}}),n(33)("flatMap")},function(t,e,n){"use strict";var r=n(0),i=n(129),o=n(9),a=n(6),s=n(23),c=n(88);r(r.P,"Array",{flatten:function(){var t=arguments[0],e=o(this),n=a(e.length),r=c(e,0);return i(r,e,e,n,0,void 0===t?1:s(t)),r}}),n(33)("flatten")},function(t,e,n){"use strict";var r=n(0),i=n(58)(!0),o=n(3)((function(){return"𠮷"!=="𠮷".at(0)}));r(r.P+r.F*o,"String",{at:function(t){return i(this,t)}})},function(t,e,n){"use strict";var r=n(0),i=n(130),o=n(63),a=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(o);r(r.P+r.F*a,"String",{padStart:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0,!0)}})},function(t,e,n){"use strict";var r=n(0),i=n(130),o=n(63),a=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(o);r(r.P+r.F*a,"String",{padEnd:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0,!1)}})},function(t,e,n){"use strict";n(47)("trimLeft",(function(t){return function(){return t(this,1)}}),"trimStart")},function(t,e,n){"use strict";n(47)("trimRight",(function(t){return function(){return t(this,2)}}),"trimEnd")},function(t,e,n){"use strict";var r=n(0),i=n(26),o=n(6),a=n(59),s=n(52),c=RegExp.prototype,u=function(t,e){this._r=t,this._s=e};n(82)(u,"RegExp String",(function(){var t=this._r.exec(this._s);return{value:t,done:null===t}})),r(r.P,"String",{matchAll:function(t){if(i(this),!a(t))throw TypeError(t+" is not a regexp!");var e=String(this),n="flags"in c?String(t.flags):s.call(t),r=new RegExp(t.source,~n.indexOf("g")?n:"g"+n);return r.lastIndex=o(t.lastIndex),new u(r,e)}})},function(t,e,n){n(71)("asyncIterator")},function(t,e,n){n(71)("observable")},function(t,e,n){var r=n(0),i=n(128),o=n(16),a=n(17),s=n(86);r(r.S,"Object",{getOwnPropertyDescriptors:function(t){for(var e,n,r=o(t),c=a.f,u=i(r),l={},f=0;u.length>f;)void 0!==(n=c(r,e=u[f++]))&&s(l,e,n);return l}})},function(t,e,n){var r=n(0),i=n(131)(!1);r(r.S,"Object",{values:function(t){return i(t)}})},function(t,e,n){var r=n(0),i=n(131)(!0);r(r.S,"Object",{entries:function(t){return i(t)}})},function(t,e,n){"use strict";var r=n(0),i=n(9),o=n(10),a=n(8);n(7)&&r(r.P+n(66),"Object",{__defineGetter__:function(t,e){a.f(i(this),t,{get:o(e),enumerable:!0,configurable:!0})}})},function(t,e,n){"use strict";var r=n(0),i=n(9),o=n(10),a=n(8);n(7)&&r(r.P+n(66),"Object",{__defineSetter__:function(t,e){a.f(i(this),t,{set:o(e),enumerable:!0,configurable:!0})}})},function(t,e,n){"use strict";var r=n(0),i=n(9),o=n(25),a=n(18),s=n(17).f;n(7)&&r(r.P+n(66),"Object",{__lookupGetter__:function(t){var e,n=i(this),r=o(t,!0);do{if(e=s(n,r))return e.get}while(n=a(n))}})},function(t,e,n){"use strict";var r=n(0),i=n(9),o=n(25),a=n(18),s=n(17).f;n(7)&&r(r.P+n(66),"Object",{__lookupSetter__:function(t){var e,n=i(this),r=o(t,!0);do{if(e=s(n,r))return e.set}while(n=a(n))}})},function(t,e,n){var r=n(0);r(r.P+r.R,"Map",{toJSON:n(132)("Map")})},function(t,e,n){var r=n(0);r(r.P+r.R,"Set",{toJSON:n(132)("Set")})},function(t,e,n){n(67)("Map")},function(t,e,n){n(67)("Set")},function(t,e,n){n(67)("WeakMap")},function(t,e,n){n(67)("WeakSet")},function(t,e,n){n(68)("Map")},function(t,e,n){n(68)("Set")},function(t,e,n){n(68)("WeakMap")},function(t,e,n){n(68)("WeakSet")},function(t,e,n){var r=n(0);r(r.G,{global:n(2)})},function(t,e,n){var r=n(0);r(r.S,"System",{global:n(2)})},function(t,e,n){var r=n(0),i=n(22);r(r.S,"Error",{isError:function(t){return"Error"===i(t)}})},function(t,e,n){var r=n(0);r(r.S,"Math",{clamp:function(t,e,n){return Math.min(n,Math.max(e,t))}})},function(t,e,n){var r=n(0);r(r.S,"Math",{DEG_PER_RAD:Math.PI/180})},function(t,e,n){var r=n(0),i=180/Math.PI;r(r.S,"Math",{degrees:function(t){return t*i}})},function(t,e,n){var r=n(0),i=n(134),o=n(113);r(r.S,"Math",{fscale:function(t,e,n,r,a){return o(i(t,e,n,r,a))}})},function(t,e,n){var r=n(0);r(r.S,"Math",{iaddh:function(t,e,n,r){var i=t>>>0,o=n>>>0;return(e>>>0)+(r>>>0)+((i&o|(i|o)&~(i+o>>>0))>>>31)|0}})},function(t,e,n){var r=n(0);r(r.S,"Math",{isubh:function(t,e,n,r){var i=t>>>0,o=n>>>0;return(e>>>0)-(r>>>0)-((~i&o|~(i^o)&i-o>>>0)>>>31)|0}})},function(t,e,n){var r=n(0);r(r.S,"Math",{imulh:function(t,e){var n=+t,r=+e,i=65535&n,o=65535&r,a=n>>16,s=r>>16,c=(a*o>>>0)+(i*o>>>16);return a*s+(c>>16)+((i*s>>>0)+(65535&c)>>16)}})},function(t,e,n){var r=n(0);r(r.S,"Math",{RAD_PER_DEG:180/Math.PI})},function(t,e,n){var r=n(0),i=Math.PI/180;r(r.S,"Math",{radians:function(t){return t*i}})},function(t,e,n){var r=n(0);r(r.S,"Math",{scale:n(134)})},function(t,e,n){var r=n(0);r(r.S,"Math",{umulh:function(t,e){var n=+t,r=+e,i=65535&n,o=65535&r,a=n>>>16,s=r>>>16,c=(a*o>>>0)+(i*o>>>16);return a*s+(c>>>16)+((i*s>>>0)+(65535&c)>>>16)}})},function(t,e,n){var r=n(0);r(r.S,"Math",{signbit:function(t){return(t=+t)!=t?t:0==t?1/t==1/0:t>0}})},function(t,e,n){"use strict";var r=n(0),i=n(20),o=n(2),a=n(53),s=n(121);r(r.P+r.R,"Promise",{finally:function(t){var e=a(this,i.Promise||o.Promise),n="function"==typeof t;return this.then(n?function(n){return s(e,t()).then((function(){return n}))}:t,n?function(n){return s(e,t()).then((function(){throw n}))}:t)}})},function(t,e,n){"use strict";var r=n(0),i=n(95),o=n(120);r(r.S,"Promise",{try:function(t){var e=i.f(this),n=o(t);return(n.e?e.reject:e.resolve)(n.v),e.promise}})},function(t,e,n){var r=n(30),i=n(1),o=r.key,a=r.set;r.exp({defineMetadata:function(t,e,n,r){a(t,e,i(n),o(r))}})},function(t,e,n){var r=n(30),i=n(1),o=r.key,a=r.map,s=r.store;r.exp({deleteMetadata:function(t,e){var n=arguments.length<3?void 0:o(arguments[2]),r=a(i(e),n,!1);if(void 0===r||!r.delete(t))return!1;if(r.size)return!0;var c=s.get(e);return c.delete(n),!!c.size||s.delete(e)}})},function(t,e,n){var r=n(30),i=n(1),o=n(18),a=r.has,s=r.get,c=r.key,u=function(t,e,n){if(a(t,e,n))return s(t,e,n);var r=o(e);return null!==r?u(t,r,n):void 0};r.exp({getMetadata:function(t,e){return u(t,i(e),arguments.length<3?void 0:c(arguments[2]))}})},function(t,e,n){var r=n(124),i=n(133),o=n(30),a=n(1),s=n(18),c=o.keys,u=o.key,l=function(t,e){var n=c(t,e),o=s(t);if(null===o)return n;var a=l(o,e);return a.length?n.length?i(new r(n.concat(a))):a:n};o.exp({getMetadataKeys:function(t){return l(a(t),arguments.length<2?void 0:u(arguments[1]))}})},function(t,e,n){var r=n(30),i=n(1),o=r.get,a=r.key;r.exp({getOwnMetadata:function(t,e){return o(t,i(e),arguments.length<3?void 0:a(arguments[2]))}})},function(t,e,n){var r=n(30),i=n(1),o=r.keys,a=r.key;r.exp({getOwnMetadataKeys:function(t){return o(i(t),arguments.length<2?void 0:a(arguments[1]))}})},function(t,e,n){var r=n(30),i=n(1),o=n(18),a=r.has,s=r.key,c=function(t,e,n){if(a(t,e,n))return!0;var r=o(e);return null!==r&&c(t,r,n)};r.exp({hasMetadata:function(t,e){return c(t,i(e),arguments.length<3?void 0:s(arguments[2]))}})},function(t,e,n){var r=n(30),i=n(1),o=r.has,a=r.key;r.exp({hasOwnMetadata:function(t,e){return o(t,i(e),arguments.length<3?void 0:a(arguments[2]))}})},function(t,e,n){var r=n(30),i=n(1),o=n(10),a=r.key,s=r.set;r.exp({metadata:function(t,e){return function(n,r){s(t,e,(void 0!==r?i:o)(n),a(r))}}})},function(t,e,n){var r=n(0),i=n(94)(),o=n(2).process,a="process"==n(22)(o);r(r.G,{asap:function(t){var e=a&&o.domain;i(e?e.bind(t):t)}})},function(t,e,n){"use strict";var r=n(0),i=n(2),o=n(20),a=n(94)(),s=n(5)("observable"),c=n(10),u=n(1),l=n(41),f=n(43),h=n(11),p=n(42),d=p.RETURN,y=function(t){return null==t?void 0:c(t)},v=function(t){var e=t._c;e&&(t._c=void 0,e())},m=function(t){return void 0===t._o},g=function(t){m(t)||(t._o=void 0,v(t))},_=function(t,e){u(t),this._c=void 0,this._o=t,t=new b(this);try{var n=e(t),r=n;null!=n&&("function"==typeof n.unsubscribe?n=function(){r.unsubscribe()}:c(n),this._c=n)}catch(e){return void t.error(e)}m(this)&&v(this)};_.prototype=f({},{unsubscribe:function(){g(this)}});var b=function(t){this._s=t};b.prototype=f({},{next:function(t){var e=this._s;if(!m(e)){var n=e._o;try{var r=y(n.next);if(r)return r.call(n,t)}catch(t){try{g(e)}finally{throw t}}}},error:function(t){var e=this._s;if(m(e))throw t;var n=e._o;e._o=void 0;try{var r=y(n.error);if(!r)throw t;t=r.call(n,t)}catch(t){try{v(e)}finally{throw t}}return v(e),t},complete:function(t){var e=this._s;if(!m(e)){var n=e._o;e._o=void 0;try{var r=y(n.complete);t=r?r.call(n,t):void 0}catch(t){try{v(e)}finally{throw t}}return v(e),t}}});var E=function(t){l(this,E,"Observable","_f")._f=c(t)};f(E.prototype,{subscribe:function(t){return new _(t,this._f)},forEach:function(t){var e=this;return new(o.Promise||i.Promise)((function(n,r){c(t);var i=e.subscribe({next:function(e){try{return t(e)}catch(t){r(t),i.unsubscribe()}},error:r,complete:n})}))}}),f(E,{from:function(t){var e="function"==typeof this?this:E,n=y(u(t)[s]);if(n){var r=u(n.call(t));return r.constructor===e?r:new e((function(t){return r.subscribe(t)}))}return new e((function(e){var n=!1;return a((function(){if(!n){try{if(p(t,!1,(function(t){if(e.next(t),n)return d}))===d)return}catch(t){if(n)throw t;return void e.error(t)}e.complete()}})),function(){n=!0}}))},of:function(){for(var t=0,e=arguments.length,n=new Array(e);t<e;)n[t]=arguments[t++];return new("function"==typeof this?this:E)((function(t){var e=!1;return a((function(){if(!e){for(var r=0;r<n.length;++r)if(t.next(n[r]),e)return;t.complete()}})),function(){e=!0}}))}}),h(E.prototype,s,(function(){return this})),r(r.G,{Observable:E}),n(40)("Observable")},function(t,e,n){var r=n(2),i=n(0),o=n(63),a=[].slice,s=/MSIE .\./.test(o),c=function(t){return function(e,n){var r=arguments.length>2,i=!!r&&a.call(arguments,2);return t(r?function(){("function"==typeof e?e:Function(e)).apply(this,i)}:e,n)}};i(i.G+i.B+i.F*s,{setTimeout:c(r.setTimeout),setInterval:c(r.setInterval)})},function(t,e,n){var r=n(0),i=n(93);r(r.G+r.B,{setImmediate:i.set,clearImmediate:i.clear})},function(t,e,n){for(var r=n(90),i=n(36),o=n(12),a=n(2),s=n(11),c=n(48),u=n(5),l=u("iterator"),f=u("toStringTag"),h=c.Array,p={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},d=i(p),y=0;y<d.length;y++){var v,m=d[y],g=p[m],_=a[m],b=_&&_.prototype;if(b&&(b[l]||s(b,l,h),b[f]||s(b,f,m),c[m]=h,g))for(v in r)b[v]||o(b,v,r[v],!0)}},function(t,e){!function(e){"use strict";var n=Object.prototype,r=n.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag",c="object"==typeof t,u=e.regeneratorRuntime;if(u)c&&(t.exports=u);else{(u=e.regeneratorRuntime=c?t.exports:{}).wrap=y;var l={},f={};f[o]=function(){return this};var h=Object.getPrototypeOf,p=h&&h(h(T([])));p&&p!==n&&r.call(p,o)&&(f=p);var d=_.prototype=m.prototype=Object.create(f);g.prototype=d.constructor=_,_.constructor=g,_[s]=g.displayName="GeneratorFunction",u.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},u.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,_):(t.__proto__=_,s in t||(t[s]="GeneratorFunction")),t.prototype=Object.create(d),t},u.awrap=function(t){return{__await:t}},b(E.prototype),E.prototype[a]=function(){return this},u.AsyncIterator=E,u.async=function(t,e,n,r){var i=new E(y(t,e,n,r));return u.isGeneratorFunction(e)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},b(d),d[s]="Generator",d[o]=function(){return this},d.toString=function(){return"[object Generator]"},u.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},u.values=T,C.prototype={constructor:C,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(I),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var s=r.call(o,"catchLoc"),c=r.call(o,"finallyLoc");if(s&&c){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),I(n),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;I(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:T(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),l}}}function y(t,e,n,r){var i=e&&e.prototype instanceof m?e:m,o=Object.create(i.prototype),a=new C(r||[]);return o._invoke=function(t,e,n){var r="suspendedStart";return function(i,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw o;return A()}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var s=w(a,n);if(s){if(s===l)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=v(t,e,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===l)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}(t,n,a),o}function v(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}function m(){}function g(){}function _(){}function b(t){["next","throw","return"].forEach((function(e){t[e]=function(t){return this._invoke(e,t)}}))}function E(t){function n(e,i,o,a){var s=v(t[e],t,i);if("throw"!==s.type){var c=s.arg,u=c.value;return u&&"object"==typeof u&&r.call(u,"__await")?Promise.resolve(u.__await).then((function(t){n("next",t,o,a)}),(function(t){n("throw",t,o,a)})):Promise.resolve(u).then((function(t){c.value=t,o(c)}),a)}a(s.arg)}var i;"object"==typeof e.process&&e.process.domain&&(n=e.process.domain.bind(n)),this._invoke=function(t,e){function r(){return new Promise((function(r,i){n(t,e,r,i)}))}return i=i?i.then(r,r):r()}}function w(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var r=v(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,l;var i=r.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function I(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function C(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function T(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:A}}function A(){return{value:void 0,done:!0}}}("object"==typeof global?global:"object"==typeof window?window:"object"==typeof self?self:this)},function(t,e,n){n(338),t.exports=n(20).RegExp.escape},function(t,e,n){var r=n(0),i=n(339)(/[\\^$*+?.()|[\]{}]/g,"\\$&");r(r.S,"RegExp",{escape:function(t){return i(t)}})},function(t,e){t.exports=function(t,e){var n=e===Object(e)?function(t){return e[t]}:e;return function(e){return String(e).replace(t,n)}}},function(t,e,n){e.formatArgs=function(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),!this.useColors)return;const n="color: "+this.color;e.splice(1,0,n,"color: inherit");let r=0,i=0;e[0].replace(/%[a-zA-Z%]/g,t=>{"%%"!==t&&(r++,"%c"===t&&(i=r))}),e.splice(i,0,n)},e.save=function(t){try{t?e.storage.setItem("debug",t):e.storage.removeItem("debug")}catch(t){}},e.load=function(){let t;try{t=e.storage.getItem("debug")}catch(t){}!t&&"undefined"!=typeof process&&"env"in process&&(t=process.env.DEBUG);return t},e.useColors=function(){if("undefined"!=typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},e.storage=function(){try{return localStorage}catch(t){}}(),e.destroy=(()=>{let t=!1;return()=>{t||(t=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],e.log=console.debug||console.log||(()=>{}),t.exports=n(135)(e);const{formatters:r}=t.exports;r.j=function(t){try{return JSON.stringify(t)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}}},function(t,e){var n=1e3,r=6e4,i=60*r,o=24*i;function a(t,e,n,r){var i=e>=1.5*n;return Math.round(t/n)+" "+r+(i?"s":"")}t.exports=function(t,e){e=e||{};var s=typeof t;if("string"===s&&t.length>0)return function(t){if((t=String(t)).length>100)return;var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(!e)return;var a=parseFloat(e[1]);switch((e[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*a;case"weeks":case"week":case"w":return 6048e5*a;case"days":case"day":case"d":return a*o;case"hours":case"hour":case"hrs":case"hr":case"h":return a*i;case"minutes":case"minute":case"mins":case"min":case"m":return a*r;case"seconds":case"second":case"secs":case"sec":case"s":return a*n;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return a;default:return}}(t);if("number"===s&&isFinite(t))return e.long?function(t){var e=Math.abs(t);if(e>=o)return a(t,e,o,"day");if(e>=i)return a(t,e,i,"hour");if(e>=r)return a(t,e,r,"minute");if(e>=n)return a(t,e,n,"second");return t+" ms"}(t):function(t){var e=Math.abs(t);if(e>=o)return Math.round(t/o)+"d";if(e>=i)return Math.round(t/i)+"h";if(e>=r)return Math.round(t/r)+"m";if(e>=n)return Math.round(t/n)+"s";return t+"ms"}(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))}},function(t,e,n){const r=n(343),i=n(14);e.init=function(t){t.inspectOpts={};const n=Object.keys(e.inspectOpts);for(let r=0;r<n.length;r++)t.inspectOpts[n[r]]=e.inspectOpts[n[r]]},e.log=function(...t){return process.stderr.write(i.format(...t)+"\n")},e.formatArgs=function(n){const{namespace:r,useColors:i}=this;if(i){const e=this.color,i="[3"+(e<8?e:"8;5;"+e),o=`  ${i};1m${r} [0m`;n[0]=o+n[0].split("\n").join("\n"+o),n.push(i+"m+"+t.exports.humanize(this.diff)+"[0m")}else n[0]=function(){if(e.inspectOpts.hideDate)return"";return(new Date).toISOString()+" "}()+r+" "+n[0]},e.save=function(t){t?process.env.DEBUG=t:delete process.env.DEBUG},e.load=function(){return process.env.DEBUG},e.useColors=function(){return"colors"in e.inspectOpts?Boolean(e.inspectOpts.colors):r.isatty(process.stderr.fd)},e.destroy=i.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."),e.colors=[6,2,3,4,5,1];try{const t=n(344);t&&(t.stderr||t).level>=2&&(e.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch(t){}e.inspectOpts=Object.keys(process.env).filter(t=>/^debug_/i.test(t)).reduce((t,e)=>{const n=e.substring(6).toLowerCase().replace(/_([a-z])/g,(t,e)=>e.toUpperCase());let r=process.env[e];return r=!!/^(yes|on|true|enabled)$/i.test(r)||!/^(no|off|false|disabled)$/i.test(r)&&("null"===r?null:Number(r)),t[n]=r,t},{}),t.exports=n(135)(e);const{formatters:o}=t.exports;o.o=function(t){return this.inspectOpts.colors=this.useColors,i.inspect(t,this.inspectOpts).split("\n").map(t=>t.trim()).join(" ")},o.O=function(t){return this.inspectOpts.colors=this.useColors,i.inspect(t,this.inspectOpts)}},function(t,e){t.exports=require("tty")},function(t,e,n){"use strict";const r=n(69),i=n(345),o=process.env;let a;function s(t){return function(t){return 0!==t&&{level:t,hasBasic:!0,has256:t>=2,has16m:t>=3}}(function(t){if(!1===a)return 0;if(i("color=16m")||i("color=full")||i("color=truecolor"))return 3;if(i("color=256"))return 2;if(t&&!t.isTTY&&!0!==a)return 0;const e=a?1:0;if("win32"===process.platform){const t=r.release().split(".");return Number(process.versions.node.split(".")[0])>=8&&Number(t[0])>=10&&Number(t[2])>=10586?Number(t[2])>=14931?3:2:1}if("CI"in o)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI"].some(t=>t in o)||"codeship"===o.CI_NAME?1:e;if("TEAMCITY_VERSION"in o)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(o.TEAMCITY_VERSION)?1:0;if("truecolor"===o.COLORTERM)return 3;if("TERM_PROGRAM"in o){const t=parseInt((o.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(o.TERM_PROGRAM){case"iTerm.app":return t>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(o.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(o.TERM)||"COLORTERM"in o?1:(o.TERM,e)}(t))}i("no-color")||i("no-colors")||i("color=false")?a=!1:(i("color")||i("colors")||i("color=true")||i("color=always"))&&(a=!0),"FORCE_COLOR"in o&&(a=0===o.FORCE_COLOR.length||0!==parseInt(o.FORCE_COLOR,10)),t.exports={supportsColor:s,stdout:s(process.stdout),stderr:s(process.stderr)}},function(t,e,n){"use strict";t.exports=(t,e)=>{e=e||process.argv;const n=t.startsWith("-")?"":1===t.length?"-":"--",r=e.indexOf(n+t),i=e.indexOf("--");return-1!==r&&(-1===i||r<i)}},function(t,e,n){const r=n(19),i=n(14),o=n(347);function a(t,e,n){this._noble=t,this._peripheralId=e,this.uuid=n,this.name=null,this.type=null,this.includedServiceUuids=null,this.characteristics=null;const r=o[n];r&&(this.name=r.name,this.type=r.type)}i.inherits(a,r.EventEmitter),a.prototype.toString=function(){return JSON.stringify({uuid:this.uuid,name:this.name,type:this.type,includedServiceUuids:this.includedServiceUuids})};a.prototype.discoverIncludedServices=function(t,e){e&&this.once("includedServicesDiscover",t=>{e(null,t)}),this._noble.discoverIncludedServices(this._peripheralId,this.uuid,t)},a.prototype.discoverIncludedServicesAsync=function(t){return i.promisify(e=>this.discoverIncludedServices(t,e))()};a.prototype.discoverCharacteristics=function(t,e){e&&this.once("characteristicsDiscover",t=>{e(null,t)}),this._noble.discoverCharacteristics(this._peripheralId,this.uuid,t)},a.prototype.discoverCharacteristicsAsync=function(t){return i.promisify(e=>this.discoverCharacteristics(t,e))()},t.exports=a},function(t){t.exports=JSON.parse('{"1800":{"name":"Generic Access","type":"org.bluetooth.service.generic_access"},"1801":{"name":"Generic Attribute","type":"org.bluetooth.service.generic_attribute"},"1802":{"name":"Immediate Alert","type":"org.bluetooth.service.immediate_alert"},"1803":{"name":"Link Loss","type":"org.bluetooth.service.link_loss"},"1804":{"name":"Tx Power","type":"org.bluetooth.service.tx_power"},"1805":{"name":"Current Time Service","type":"org.bluetooth.service.current_time"},"1806":{"name":"Reference Time Update Service","type":"org.bluetooth.service.reference_time_update"},"1807":{"name":"Next DST Change Service","type":"org.bluetooth.service.next_dst_change"},"1808":{"name":"Glucose","type":"org.bluetooth.service.glucose"},"1809":{"name":"Health Thermometer","type":"org.bluetooth.service.health_thermometer"},"1810":{"name":"Blood Pressure","type":"org.bluetooth.service.blood_pressuer"},"1811":{"name":"Alert Notification Service","type":"org.bluetooth.service.alert_notification"},"1812":{"name":"Human Interface Device","type":"org.bluetooth.service.human_interface_device"},"1813":{"name":"Scan Parameters","type":"org.bluetooth.service.scan_parameters"},"1814":{"name":"Running Speed and Cadence","type":"org.bluetooth.service.running_speed_and_cadence"},"1815":{"name":"Automation IO","type":"org.bluetooth.service.automation_io"},"1816":{"name":"Cycling Speed and Cadence","type":"org.bluetooth.service.cycling_speed_and_cadence"},"1818":{"name":"Cycling Power","type":"org.bluetooth.service.cycling_power"},"1819":{"name":"Location and Navigation","type":"org.bluetooth.service.location_and_navigation"},"1820":{"name":"Internet Protocol Support","type":"org.bluetooth.service.internet_protocol_support"},"180a":{"name":"Device Information","type":"org.bluetooth.service.device_information"},"180d":{"name":"Heart Rate","type":"org.bluetooth.service.heart_rate"},"180e":{"name":"Phone Alert Status Service","type":"org.bluetooth.service.phone_alert_service"},"180f":{"name":"Battery Service","type":"org.bluetooth.service.battery_service"},"181a":{"name":"Environmental Sensing","type":"org.bluetooth.service.environmental_sensing"},"181b":{"name":"Body Composition","type":"org.bluetooth.service.body_composition"},"181c":{"name":"User Data","type":"org.bluetooth.service.user_data"},"181d":{"name":"Weight Scale","type":"org.bluetooth.service.weight_scale"},"181e":{"name":"Bond Management","type":"org.bluetooth.service.bond_management"},"181f":{"name":"Continuous Glucose Monitoring","type":"org.bluetooth.service.continuous_glucose_monitoring"}}')},function(t,e,n){const r=n(19),i=n(14),o=n(349);function a(t,e,n,r,i){this._noble=t,this._peripheralId=e,this._serviceUuid=n,this.uuid=r,this.name=null,this.type=null,this.properties=i,this.descriptors=null;const a=o[r];a&&(this.name=a.name,this.type=a.type)}i.inherits(a,r.EventEmitter),a.prototype.toString=function(){return JSON.stringify({uuid:this.uuid,name:this.name,type:this.type,properties:this.properties})};const s=function(t){if(t){const e=(n,r)=>{r||(this.removeListener("read",e),t(null,n))};this.on("read",e)}this._noble.read(this._peripheralId,this._serviceUuid,this.uuid)};a.prototype.read=s,a.prototype.readAsync=i.promisify(s);const c=function(t,e,n){if("browser"!==process.title){const e=[Buffer,Uint8Array,Uint16Array,Uint32Array];if(!e.some(e=>t instanceof e))throw new Error("data must be a "+e.map(t=>t.name).join(" or "))}n&&this.once("write",()=>{n(null)}),this._noble.write(this._peripheralId,this._serviceUuid,this.uuid,t,e)};a.prototype.write=c,a.prototype.writeAsync=i.promisify(c);const u=function(t,e){e&&this.once("broadcast",()=>{e(null)}),this._noble.broadcast(this._peripheralId,this._serviceUuid,this.uuid,t)};a.prototype.broadcast=u,a.prototype.broadcastAsync=i.promisify(u);const l=function(t,e){e&&this.once("notify",()=>{e(null)}),this._noble.notify(this._peripheralId,this._serviceUuid,this.uuid,t)};a.prototype.notify=l,a.prototype.notifyAsync=i.promisify(l);const f=function(t){this.notify(!0,t)};a.prototype.subscribe=f,a.prototype.subscribeAsync=i.promisify(f);const h=function(t){this.notify(!1,t)};a.prototype.unsubscribe=h,a.prototype.unsubscribeAsync=i.promisify(h);const p=function(t){t&&this.once("descriptorsDiscover",e=>{t(null,e)}),this._noble.discoverDescriptors(this._peripheralId,this._serviceUuid,this.uuid)};a.prototype.discoverDescriptors=p,a.prototype.discoverDescriptorsAsync=i.promisify(p),t.exports=a},function(t){t.exports=JSON.parse('{"2a00":{"name":"Device Name","type":"org.bluetooth.characteristic.gap.device_name"},"2a01":{"name":"Appearance","type":"org.bluetooth.characteristic.gap.appearance"},"2a02":{"name":"Peripheral Privacy Flag","type":"org.bluetooth.characteristic.gap.peripheral_privacy_flag"},"2a03":{"name":"Reconnection Address","type":"org.bluetooth.characteristic.gap.reconnection_address"},"2a04":{"name":"Peripheral Preferred Connection Parameters","type":"org.bluetooth.characteristic.gap.peripheral_preferred_connection_parameters"},"2a05":{"name":"Service Changed","type":"org.bluetooth.characteristic.gatt.service_changed"},"2a06":{"name":"Alert Level","type":"org.bluetooth.characteristic.alert_level"},"2a07":{"name":"Tx Power Level","type":"org.bluetooth.characteristic.tx_power_level"},"2a08":{"name":"Date Time","type":"org.bluetooth.characteristic.date_time"},"2a09":{"name":"Day of Week","type":"org.bluetooth.characteristic.day_of_week"},"2a0a":{"name":"Day Date Time","type":"org.bluetooth.characteristic.day_date_time"},"2a0c":{"name":"Exact Time 256","type":"org.bluetooth.characteristic.exact_time_256"},"2a0d":{"name":"DST Offset","type":"org.bluetooth.characteristic.dst_offset"},"2a0e":{"name":"Time Zone","type":"org.bluetooth.characteristic.time_zone"},"2a0f":{"name":"Local Time Information","type":"org.bluetooth.characteristic.local_time_information"},"2a11":{"name":"Time with DST","type":"org.bluetooth.characteristic.time_with_dst"},"2a12":{"name":"Time Accuracy","type":"org.bluetooth.characteristic.time_accuracy"},"2a13":{"name":"Time Source","type":"org.bluetooth.characteristic.time_source"},"2a14":{"name":"Reference Time Information","type":"org.bluetooth.characteristic.reference_time_information"},"2a16":{"name":"Time Update Control Point","type":"org.bluetooth.characteristic.time_update_control_point"},"2a17":{"name":"Time Update State","type":"org.bluetooth.characteristic.time_update_state"},"2a18":{"name":"Glucose Measurement","type":"org.bluetooth.characteristic.glucose_measurement"},"2a19":{"name":"Battery Level","type":"org.bluetooth.characteristic.battery_level"},"2a1c":{"name":"Temperature Measurement","type":"org.bluetooth.characteristic.temperature_measurement"},"2a1d":{"name":"Temperature Type","type":"org.bluetooth.characteristic.temperature_type"},"2a1e":{"name":"Intermediate Temperature","type":"org.bluetooth.characteristic.intermediate_temperature"},"2a21":{"name":"Measurement Interval","type":"org.bluetooth.characteristic.measurement_interval"},"2a22":{"name":"Boot Keyboard Input Report","type":"org.bluetooth.characteristic.boot_keyboard_input_report"},"2a23":{"name":"System ID","type":"org.bluetooth.characteristic.system_id"},"2a24":{"name":"Model Number String","type":"org.bluetooth.characteristic.model_number_string"},"2a25":{"name":"Serial Number String","type":"org.bluetooth.characteristic.serial_number_string"},"2a26":{"name":"Firmware Revision String","type":"org.bluetooth.characteristic.firmware_revision_string"},"2a27":{"name":"Hardware Revision String","type":"org.bluetooth.characteristic.hardware_revision_string"},"2a28":{"name":"Software Revision String","type":"org.bluetooth.characteristic.software_revision_string"},"2a29":{"name":"Manufacturer Name String","type":"org.bluetooth.characteristic.manufacturer_name_string"},"2a2a":{"name":"IEEE 11073-20601 Regulatory Certification Data List","type":"org.bluetooth.characteristic.ieee_11073-20601_regulatory_certification_data_list"},"2a2b":{"name":"Current Time","type":"org.bluetooth.characteristic.current_time"},"2a2c":{"name":"Magnetic Declination","type":"org.bluetooth.characteristic.magnetic_declination"},"2a31":{"name":"Scan Refresh","type":"org.bluetooth.characteristic.scan_refresh"},"2a32":{"name":"Boot Keyboard Output Report","type":"org.bluetooth.characteristic.boot_keyboard_output_report"},"2a33":{"name":"Boot Mouse Input Report","type":"org.bluetooth.characteristic.boot_mouse_input_report"},"2a34":{"name":"Glucose Measurement Context","type":"org.bluetooth.characteristic.glucose_measurement_context"},"2a35":{"name":"Blood Pressure Measurement","type":"org.bluetooth.characteristic.blood_pressure_measurement"},"2a36":{"name":"Intermediate Cuff Pressure","type":"org.bluetooth.characteristic.intermediate_blood_pressure"},"2a37":{"name":"Heart Rate Measurement","type":"org.bluetooth.characteristic.heart_rate_measurement"},"2a38":{"name":"Body Sensor Location","type":"org.bluetooth.characteristic.body_sensor_location"},"2a39":{"name":"Heart Rate Control Point","type":"org.bluetooth.characteristic.heart_rate_control_point"},"2a3f":{"name":"Alert Status","type":"org.bluetooth.characteristic.alert_status"},"2a40":{"name":"Ringer Control Point","type":"org.bluetooth.characteristic.ringer_control_point"},"2a41":{"name":"Ringer Setting","type":"org.bluetooth.characteristic.ringer_setting"},"2a42":{"name":"Alert Category ID Bit Mask","type":"org.bluetooth.characteristic.alert_category_id_bit_mask"},"2a43":{"name":"Alert Category ID","type":"org.bluetooth.characteristic.alert_category_id"},"2a44":{"name":"Alert Notification Control Point","type":"org.bluetooth.characteristic.alert_notification_control_point"},"2a45":{"name":"Unread Alert Status","type":"org.bluetooth.characteristic.unread_alert_status"},"2a46":{"name":"New Alert","type":"org.bluetooth.characteristic.new_alert"},"2a47":{"name":"Supported New Alert Category","type":"org.bluetooth.characteristic.supported_new_alert_category"},"2a48":{"name":"Supported Unread Alert Category","type":"org.bluetooth.characteristic.supported_unread_alert_category"},"2a49":{"name":"Blood Pressure Feature","type":"org.bluetooth.characteristic.blood_pressure_feature"},"2a4a":{"name":"HID Information","type":"org.bluetooth.characteristic.hid_information"},"2a4b":{"name":"Report Map","type":"org.bluetooth.characteristic.report_map"},"2a4c":{"name":"HID Control Point","type":"org.bluetooth.characteristic.hid_control_point"},"2a4d":{"name":"Report","type":"org.bluetooth.characteristic.report"},"2a4e":{"name":"Protocol Mode","type":"org.bluetooth.characteristic.protocol_mode"},"2a4f":{"name":"Scan Interval Window","type":"org.bluetooth.characteristic.scan_interval_window"},"2a50":{"name":"PnP ID","type":"org.bluetooth.characteristic.pnp_id"},"2a51":{"name":"Glucose Feature","type":"org.bluetooth.characteristic.glucose_feature"},"2a52":{"name":"Record Access Control Point","type":"org.bluetooth.characteristic.record_access_control_point"},"2a53":{"name":"RSC Measurement","type":"org.bluetooth.characteristic.rsc_measurement"},"2a54":{"name":"RSC Feature","type":"org.bluetooth.characteristic.rsc_feature"},"2a55":{"name":"SC Control Point","type":"org.bluetooth.characteristic.sc_control_point"},"2a56":{"name":"Digital","type":"org.bluetooth.characteristic.digital"},"2a58":{"name":"Analog","type":"org.bluetooth.characteristic.analog"},"2a5a":{"name":"Aggregate","type":"org.bluetooth.characteristic.aggregate"},"2a5b":{"name":"CSC Measurement","type":"org.bluetooth.characteristic.csc_measurement"},"2a5c":{"name":"CSC Feature","type":"org.bluetooth.characteristic.csc_feature"},"2a5d":{"name":"Sensor Location","type":"org.bluetooth.characteristic.sensor_location"},"2a63":{"name":"Cycling Power Measurement","type":"org.bluetooth.characteristic.cycling_power_measurement"},"2a64":{"name":"Cycling Power Vector","type":"org.bluetooth.characteristic.cycling_power_vector"},"2a65":{"name":"Cycling Power Feature","type":"org.bluetooth.characteristic.cycling_power_feature"},"2a66":{"name":"Cycling Power Control Point","type":"org.bluetooth.characteristic.cycling_power_control_point"},"2a67":{"name":"Location and Speed","type":"org.bluetooth.characteristic.location_and_speed"},"2a68":{"name":"Navigation","type":"org.bluetooth.characteristic.navigation"},"2a69":{"name":"Position Quality","type":"org.bluetooth.characteristic.position_quality"},"2a6a":{"name":"LN Feature","type":"org.bluetooth.characteristic.ln_feature"},"2a6b":{"name":"LN Control Point","type":"org.bluetooth.characteristic.ln_control_point"},"2a6c":{"name":"Elevation","type":"org.bluetooth.characteristic.elevation"},"2a6d":{"name":"Pressure","type":"org.bluetooth.characteristic.pressure"},"2a6e":{"name":"Temperature","type":"org.bluetooth.characteristic.temperature"},"2a6f":{"name":"Humidity","type":"org.bluetooth.characteristic.humidity"},"2a70":{"name":"True Wind Speed","type":"org.bluetooth.characteristic.true_wind_speed"},"2a71":{"name":"True Wind Direction","type":"org.bluetooth.characteristic.true_wind_direction"},"2a72":{"name":"Apparent Wind Speed","type":"org.bluetooth.characteristic.apparent_wind_speed"},"2a73":{"name":"Apparent Wind Direction","type":"org.bluetooth.characteristic.apparent_wind_direction"},"2a74":{"name":"Gust Factor","type":"org.bluetooth.characteristic.gust_factor"},"2a75":{"name":"Pollen Concentration","type":"org.bluetooth.characteristic.pollen_concentration"},"2a76":{"name":"UV Index","type":"org.bluetooth.characteristic.uv_index"},"2a77":{"name":"Irradiance","type":"org.bluetooth.characteristic.irradiance"},"2a78":{"name":"Rainfall","type":"org.bluetooth.characteristic.rainfall"},"2a79":{"name":"Wind Chill","type":"org.bluetooth.characteristic.wind_chill"},"2a7a":{"name":"Heat Index","type":"org.bluetooth.characteristic.heat_index"},"2a7b":{"name":"Dew Point","type":"org.bluetooth.characteristic.dew_point"},"2a7d":{"name":"Descriptor Value Changed","type":"org.bluetooth.characteristic.descriptor_value_change"},"2a7e":{"name":"Aerobic Heart Rate Lower Limit","type":"org.bluetooth.characteristic.aerobic_heart_rate_lower_limit"},"2a7f":{"name":"Aerobic Threshold","type":"org.bluetooth.characteristic.aerobic_threshold"},"2a80":{"name":"Age","type":"org.bluetooth.characteristic.age"},"2a81":{"name":"Anaerobic Heart Rate Lower Limit","type":"org.bluetooth.characteristic.anaerobic_heart_rate_lower_limit"},"2a82":{"name":"Anaerobic Heart Rate Upper Limit","type":"org.bluetooth.characteristic.anaerobic_heart_rate_upper_limit"},"2a83":{"name":"Anaerobic Threshold","type":"org.bluetooth.characteristic.anaerobic_threshold"},"2a84":{"name":"Aerobic Heart Rate Upper Limit","type":"org.bluetooth.characteristic.aerobic_heart_rate_upper_limit"},"2a85":{"name":"Date of Birth","type":"org.bluetooth.characteristic.date_of_birth"},"2a86":{"name":"Date of Threshold Assessment","type":"org.bluetooth.characteristic.date_of_threshold_assessment"},"2a87":{"name":"Email Address","type":"org.bluetooth.characteristic.email_address"},"2a88":{"name":"Fat Burn Heart Rate Lower Limit","type":"org.bluetooth.characteristic.fat_burn_heart_lower_limit"},"2a89":{"name":"Fat Burn Heart Rate Upper Limit","type":"org.bluetooth.characteristic.fat_burn_heart_upper_limit"},"2a8a":{"name":"First Name","type":"org.bluetooth.characteristic.first_name"},"2a8b":{"name":"Five Zone Heart Rate Limits","type":"org.bluetooth.characteristic.five_zone_heart_rate_limits"},"2a8c":{"name":"Gender","type":"org.bluetooth.characteristic.gender"},"2a8d":{"name":"Heart Rate Max","type":"org.bluetooth.characteristic.heart_rate_max"},"2a8e":{"name":"Height","type":"org.bluetooth.characteristic.height"},"2a8f":{"name":"Hip Circumference","type":"org.bluetooth.characteristic.hip_circumference"},"2a90":{"name":"Last Name","type":"org.bluetooth.characteristic.last_name"},"2a91":{"name":"Maximum Recommended Heart Rate","type":"org.bluetooth.characteristic.maximum_recommended_heart_rate"},"2a92":{"name":"Resting Heart Rate","type":"org.bluetooth.characteristic.resting_heart_rate"},"2a93":{"name":"Sport Type for Aerobic and Anaerobic Threshold","type":"org.bluetooth.characteristic.sport_type_for_aerobic_and_anaerobic_threshold"},"2a94":{"name":"Three Zone Heart Rate Limits","type":"org.bluetooth.characteristic.three_zone_heart_rate_limits"},"2a95":{"name":"Two Zone Heart Rate Limit","type":"org.bluetooth.characteristic.two_zone_heart_rate_limit"},"2a96":{"name":"VO2 Max","type":"org.bluetooth.characteristic.vo2_max"},"2a97":{"name":"Waist Circumference","type":"org.bluetooth.characteristic.waist_circumference"},"2a98":{"name":"Weight","type":"org.bluetooth.characteristic.weight"},"2a99":{"name":"Database Change Increment","type":"org.bluetooth.characteristic.database_change_increment"},"2a9a":{"name":"User Index","type":"org.bluetooth.characteristic.user_index"},"2a9b":{"name":"Body Composition Feature","type":"org.bluetooth.characteristic.body_composition_feature"},"2a9c":{"name":"Body Composition Measurement","type":"org.bluetooth.characteristic.body_composition_measurement"},"2a9d":{"name":"Weight Measurement","type":"org.bluetooth.characteristic.weight_measurement"},"2a9e":{"name":"Weight Scale Feature","type":"org.bluetooth.characteristic.weight_scale_feature"},"2a9f":{"name":"User Control Point","type":"org.bluetooth.characteristic.user_control_point"},"2aa0":{"name":"Magnetic Flux Density - 2D","type":"org.bluetooth.characteristic.magnetic_flux_density_2d"},"2aa1":{"name":"Magnetic Flux Density - 3D","type":"org.bluetooth.characteristic.magnetic_flux_density_3d"},"2aa2":{"name":"Language","type":"org.bluetooth.characteristic.language"},"2aa3":{"name":"Barometric Pressure Trend","type":"org.bluetooth.characteristic.barometric_pressure_trend"},"2aa4":{"name":"Bond Management Control Point","type":"org.bluetooth.characteristic.bond_management_control_point"},"2aa5":{"name":"Bond Management Feature","type":"org.bluetooth.characteristic.bond_management_feature"},"2aa6":{"name":"Central Address Resolution","type":"org.bluetooth.characteristic.central_address_resolution"},"2aa7":{"name":"CGM Measurement","type":"org.bluetooth.characteristic.cgm_measurement"},"2aa8":{"name":"CGM Feature","type":"org.bluetooth.characteristic.cgm_feature"},"2aa9":{"name":"CGM Status","type":"org.bluetooth.characteristic.cgm_status"},"2aaa":{"name":"CGM Session Start Time","type":"org.bluetooth.characteristic.cgm_session_start_time"},"2aab":{"name":"CGM Session Run Time","type":"org.bluetooth.characteristic.cgm_session_run_time"},"2aac":{"name":"CGM Specific Ops Control Point","type":"org.bluetooth.characteristic.cgm_specific_ops_control_point"}}')},function(t,e,n){const r=n(19),i=n(14),o=n(351);function a(t,e,n,r,i){this._noble=t,this._peripheralId=e,this._serviceUuid=n,this._characteristicUuid=r,this.uuid=i,this.name=null,this.type=null;const a=o[i];a&&(this.name=a.name,this.type=a.type)}i.inherits(a,r.EventEmitter),a.prototype.toString=function(){return JSON.stringify({uuid:this.uuid,name:this.name,type:this.type})};const s=function(t){t&&this.once("valueRead",e=>{t(null,e)}),this._noble.readValue(this._peripheralId,this._serviceUuid,this._characteristicUuid,this.uuid)};a.prototype.readValue=s,a.prototype.readValueAsync=i.promisify(s);const c=function(t,e){if(!(t instanceof Buffer))throw new Error("data must be a Buffer");e&&this.once("valueWrite",()=>{e(null)}),this._noble.writeValue(this._peripheralId,this._serviceUuid,this._characteristicUuid,this.uuid,t)};a.prototype.writeValue=c,a.prototype.writeValueAsync=i.promisify(c),t.exports=a},function(t){t.exports=JSON.parse('{"2900":{"name":"Characteristic Extended Properties","type":"org.bluetooth.descriptor.gatt.characteristic_extended_properties"},"2901":{"name":"Characteristic User Description","type":"org.bluetooth.descriptor.gatt.characteristic_user_description"},"2902":{"name":"Client Characteristic Configuration","type":"org.bluetooth.descriptor.gatt.client_characteristic_configuration"},"2903":{"name":"Server Characteristic Configuration","type":"org.bluetooth.descriptor.gatt.server_characteristic_configuration"},"2904":{"name":"Characteristic Presentation Format","type":"org.bluetooth.descriptor.gatt.characteristic_presentation_format"},"2905":{"name":"Characteristic Aggregate Format","type":"org.bluetooth.descriptor.gatt.characteristic_aggregate_format"},"2906":{"name":"Valid Range","type":"org.bluetooth.descriptor.valid_range"},"2907":{"name":"External Report Reference","type":"org.bluetooth.descriptor.external_report_reference"},"2908":{"name":"Report Reference","type":"org.bluetooth.descriptor.report_reference"},"2909":{"name":"Number of Digitals","type":"org.bluetooth.descriptor.number_of_digitals"},"290a":{"name":"Value Trigger Setting","type":"org.bluetooth.descriptor.value_trigger_setting"},"290b":{"name":"Environmental Sensing Configuration","type":"org.bluetooth.descriptor.environmental_sensing_configuration"},"290c":{"name":"Environmental Sensing Measurement","type":"org.bluetooth.descriptor.environmental_sensing_measurement"},"290d":{"name":"Environmental Sensing Trigger Setting","type":"org.bluetooth.descriptor.environmental_sensing_trigger_setting"},"290e":{"name":"Time Trigger Setting","type":"org.bluetooth.descriptor.time_trigger_setting"}}')},function(t,e,n){const r=n(19),i=n(14),o=n(353),a=function(t,e,n,r,i,a){this._hci=t,this._handle=e,this._smp=new o(this,n,r,i,a),this.onSmpStkBinded=this.onSmpStk.bind(this),this.onSmpFailBinded=this.onSmpFail.bind(this),this.onSmpEndBinded=this.onSmpEnd.bind(this),this._smp.on("stk",this.onSmpStkBinded),this._smp.on("fail",this.onSmpFailBinded),this._smp.on("end",this.onSmpEndBinded)};i.inherits(a,r.EventEmitter),a.prototype.encrypt=function(){this._smp.sendPairingRequest()},a.prototype.write=function(t,e){this._hci.writeAclDataPkt(this._handle,t,e)},a.prototype.push=function(t,e){e?this.emit("data",t,e):this.emit("end")},a.prototype.pushEncrypt=function(t){this.emit("encrypt",t)},a.prototype.onSmpStk=function(t){const e=Buffer.from("0000000000000000","hex"),n=Buffer.from("0000","hex");this._hci.startLeEncryption(this._handle,e,n,t)},a.prototype.onSmpFail=function(){this.emit("encryptFail")},a.prototype.onSmpEnd=function(){this._smp.removeListener("stk",this.onSmpStkBinded),this._smp.removeListener("fail",this.onSmpFailBinded),this._smp.removeListener("end",this.onSmpEndBinded)},t.exports=a},function(t,e,n){const r=n(19),i=n(14),o=n(354),a=function(t,e,n,r,i){this._aclStream=t,this._iat=Buffer.from(["random"===e?1:0]),this._ia=Buffer.from(n.split(":").reverse().join(""),"hex"),this._rat=Buffer.from(["random"===r?1:0]),this._ra=Buffer.from(i.split(":").reverse().join(""),"hex"),this.onAclStreamDataBinded=this.onAclStreamData.bind(this),this.onAclStreamEndBinded=this.onAclStreamEnd.bind(this),this._aclStream.on("data",this.onAclStreamDataBinded),this._aclStream.on("end",this.onAclStreamEndBinded)};i.inherits(a,r.EventEmitter),a.prototype.sendPairingRequest=function(){this._preq=Buffer.from([1,3,0,1,16,0,1]),this.write(this._preq)},a.prototype.onAclStreamData=function(t,e){if(6!==t)return;const n=e.readUInt8(0);2===n?this.handlePairingResponse(e):3===n?this.handlePairingConfirm(e):4===n?this.handlePairingRandom(e):5===n?this.handlePairingFailed(e):6===n?this.handleEncryptInfo(e):7===n&&this.handleMasterIdent(e)},a.prototype.onAclStreamEnd=function(){this._aclStream.removeListener("data",this.onAclStreamDataBinded),this._aclStream.removeListener("end",this.onAclStreamEndBinded),this.emit("end")},a.prototype.handlePairingResponse=function(t){this._pres=t,this._tk=Buffer.from("00000000000000000000000000000000","hex"),this._r=o.r(),this.write(Buffer.concat([Buffer.from([3]),o.c1(this._tk,this._r,this._pres,this._preq,this._iat,this._ia,this._rat,this._ra)]))},a.prototype.handlePairingConfirm=function(t){this._pcnf=t,this.write(Buffer.concat([Buffer.from([4]),this._r]))},a.prototype.handlePairingRandom=function(t){const e=t.slice(1),n=Buffer.concat([Buffer.from([3]),o.c1(this._tk,e,this._pres,this._preq,this._iat,this._ia,this._rat,this._ra)]);if(this._pcnf.toString("hex")===n.toString("hex")){const t=o.s1(this._tk,e,this._r);this.emit("stk",t)}else this.write(Buffer.from([4,3])),this.emit("fail")},a.prototype.handlePairingFailed=function(t){this.emit("fail")},a.prototype.handleEncryptInfo=function(t){const e=t.slice(1);this.emit("ltk",e)},a.prototype.handleMasterIdent=function(t){const e=t.slice(1,3),n=t.slice(3);this.emit("masterIdent",e,n)},a.prototype.write=function(t){this._aclStream.write(6,t)},t.exports=a},function(t,e,n){const r=n(355);function i(t,e){t=a(t),e=a(e);const n=r.createCipheriv("aes-128-ecb",t,"");return n.setAutoPadding(!1),a(Buffer.concat([n.update(e),n.final()]))}function o(t,e){const n=Buffer.alloc(t.length);for(let r=0;r<t.length;r++)n[r]=t[r]^e[r];return n}function a(t){const e=Buffer.alloc(t.length);for(let n=0;n<e.length;n++)e[n]=t[t.length-n-1];return e}t.exports={r:function(){return r.randomBytes(16)},c1:function(t,e,n,r,a,s,c,u){const l=Buffer.concat([a,c,r,n]),f=Buffer.concat([u,s,Buffer.from("00000000","hex")]);let h=o(e,l);return h=i(t,h),h=o(h,f),h=i(t,h),h},s1:function(t,e,n){return i(t,Buffer.concat([n.slice(0,8),e.slice(0,8)]))},e:i}},function(t,e){t.exports=require("crypto")},function(t,e,n){const r=n(54)("att"),i=n(19),o=n(14),a=function(t,e){this._address=t,this._aclStream=e,this._services={},this._characteristics={},this._descriptors={},this._currentCommand=null,this._commandQueue=[],this._mtu=23,this._desired_mtu=256,this._security="low",this.onAclStreamDataBinded=this.onAclStreamData.bind(this),this.onAclStreamEncryptBinded=this.onAclStreamEncrypt.bind(this),this.onAclStreamEncryptFailBinded=this.onAclStreamEncryptFail.bind(this),this.onAclStreamEndBinded=this.onAclStreamEnd.bind(this),this._aclStream.on("data",this.onAclStreamDataBinded),this._aclStream.on("encrypt",this.onAclStreamEncryptBinded),this._aclStream.on("encryptFail",this.onAclStreamEncryptFailBinded),this._aclStream.on("end",this.onAclStreamEndBinded)};o.inherits(a,i.EventEmitter),a.prototype.onAclStreamData=function(t,e){if(4===t)if(this._currentCommand&&e.toString("hex")===this._currentCommand.buffer.toString("hex"))r(this._address+": echo ... echo ... echo ...");else if(e[0]%2==0)if(process.env.NOBLE_MULTI_ROLE)r(this._address+": multi-role flag in use, ignoring command meant for peripheral role.");else{const t=e[0];2===t?(r(this._address+": replying to MTU request"),this.writeAtt(this.mtuResponse(this._desired_mtu))):(r(`${this._address}: replying with REQ_NOT_SUPP to 0x${t.toString(16)}`),this.writeAtt(this.errorResponse(t,0,6)))}else if(27===e[0]||29===e[0]){const t=e.readUInt16LE(1),n=e.slice(3);this.emit("handleNotify",this._address,t,n),29===e[0]&&this._queueCommand(this.handleConfirmation(),null,()=>{this.emit("handleConfirmation",this._address,t)});for(const e in this._services)for(const r in this._characteristics[e])this._characteristics[e][r].valueHandle===t&&this.emit("notification",this._address,e,r,n)}else if(this._currentCommand){if(1===e[0]&&(5===e[4]||8===e[4]||15===e[4])&&"medium"!==this._security)return void this._aclStream.encrypt();if(1===e[0]&&4===e[4])return void r("Error: can't change MTU, invalid PDU");for(r(`${this._address}: read: ${e.toString("hex")}`),this._currentCommand.callback(e),this._currentCommand=null;this._commandQueue.length&&(this._currentCommand=this._commandQueue.shift(),this.writeAtt(this._currentCommand.buffer),!this._currentCommand.callback);)this._currentCommand.writeCallback&&(this._currentCommand.writeCallback(),this._currentCommand=null)}else r(this._address+": uh oh, no current command")},a.prototype.onAclStreamEncrypt=function(t){t&&(this._security="medium",this.writeAtt(this._currentCommand.buffer))},a.prototype.onAclStreamEncryptFail=function(){},a.prototype.onAclStreamEnd=function(){this._aclStream.removeListener("data",this.onAclStreamDataBinded),this._aclStream.removeListener("encrypt",this.onAclStreamEncryptBinded),this._aclStream.removeListener("encryptFail",this.onAclStreamEncryptFailBinded),this._aclStream.removeListener("end",this.onAclStreamEndBinded)},a.prototype.writeAtt=function(t){r(`${this._address}: write: ${t.toString("hex")}`),this._aclStream.write(4,t)},a.prototype.errorResponse=function(t,e,n){const r=Buffer.alloc(5);return r.writeUInt8(1,0),r.writeUInt8(t,1),r.writeUInt16LE(e,2),r.writeUInt8(n,4),r},a.prototype._queueCommand=function(t,e,n){if(this._commandQueue.push({buffer:t,callback:e,writeCallback:n}),null===this._currentCommand)for(;this._commandQueue.length&&(this._currentCommand=this._commandQueue.shift(),this.writeAtt(this._currentCommand.buffer),!this._currentCommand.callback);)this._currentCommand.writeCallback&&(this._currentCommand.writeCallback(),this._currentCommand=null)},a.prototype.mtuRequest=function(t){const e=Buffer.alloc(3);return e.writeUInt8(2,0),e.writeUInt16LE(t,1),e},a.prototype.mtuResponse=function(t){const e=Buffer.alloc(3);return e.writeUInt8(3,0),e.writeUInt16LE(t,1),e},a.prototype.readByGroupRequest=function(t,e,n){const r=Buffer.alloc(7);return r.writeUInt8(16,0),r.writeUInt16LE(t,1),r.writeUInt16LE(e,3),r.writeUInt16LE(n,5),r},a.prototype.readByTypeRequest=function(t,e,n){const r=Buffer.alloc(7);return r.writeUInt8(8,0),r.writeUInt16LE(t,1),r.writeUInt16LE(e,3),r.writeUInt16LE(n,5),r},a.prototype.readRequest=function(t){const e=Buffer.alloc(3);return e.writeUInt8(10,0),e.writeUInt16LE(t,1),e},a.prototype.readBlobRequest=function(t,e){const n=Buffer.alloc(5);return n.writeUInt8(12,0),n.writeUInt16LE(t,1),n.writeUInt16LE(e,3),n},a.prototype.findInfoRequest=function(t,e){const n=Buffer.alloc(5);return n.writeUInt8(4,0),n.writeUInt16LE(t,1),n.writeUInt16LE(e,3),n},a.prototype.writeRequest=function(t,e,n){const r=Buffer.alloc(3+e.length);r.writeUInt8(n?82:18,0),r.writeUInt16LE(t,1);for(let t=0;t<e.length;t++)r.writeUInt8(e.readUInt8(t),t+3);return r},a.prototype.prepareWriteRequest=function(t,e,n){const r=Buffer.alloc(5+n.length);r.writeUInt8(22,0),r.writeUInt16LE(t,1),r.writeUInt16LE(e,3);for(let t=0;t<n.length;t++)r.writeUInt8(n.readUInt8(t),t+5);return r},a.prototype.executeWriteRequest=function(t,e){const n=Buffer.alloc(2);return n.writeUInt8(24,0),n.writeUInt8(e?0:1,1),n},a.prototype.handleConfirmation=function(){const t=Buffer.alloc(1);return t.writeUInt8(30,0),t},a.prototype.exchangeMtu=function(){this._queueCommand(this.mtuRequest(this._desired_mtu),t=>{if(3===t[0]){const e=t.readUInt16LE(1);r(`${this._address}: new MTU is ${e}`),this._mtu=e}this.emit("mtu",this._address,this._mtu)})},a.prototype.addService=function(t){this._services[t.uuid]=t},a.prototype.discoverServices=function(t){const e=[],n=r=>{const i=r[0];let o=0;if(17===i){const t=r[1],n=(r.length-2)/t;for(o=0;o<n;o++){const n=2+o*t;e.push({startHandle:r.readUInt16LE(n),endHandle:r.readUInt16LE(n+2),uuid:6===t?r.readUInt16LE(n+4).toString(16):r.slice(n+4).slice(0,16).toString("hex").match(/.{1,2}/g).reverse().join("")})}}if(17!==i||65535===e[e.length-1].endHandle){const n=[];for(o=0;o<e.length;o++){const r=e[o].uuid.trim();0!==t.length&&-1===t.indexOf(r)||-1!==n.indexOf(r)||n.push(r),this._services[e[o].uuid]=e[o]}this.emit("servicesDiscovered",this._address,JSON.parse(JSON.stringify(e))),this.emit("servicesDiscover",this._address,n)}else this._queueCommand(this.readByGroupRequest(e[e.length-1].endHandle+1,65535,10240),n)};this._queueCommand(this.readByGroupRequest(1,65535,10240),n)},a.prototype.discoverIncludedServices=function(t,e){const n=this._services[t],r=[],i=t=>{const o=t[0];let a=0;if(9===o){const e=t[1],n=(t.length-2)/e;for(a=0;a<n;a++){const n=2+a*e;r.push({endHandle:t.readUInt16LE(n),startHandle:t.readUInt16LE(n+2),uuid:8===e?t.readUInt16LE(n+6).toString(16):t.slice(n+6).slice(0,16).toString("hex").match(/.{1,2}/g).reverse().join("")})}}if(9!==o||r[r.length-1].endHandle===n.endHandle){const t=[];for(a=0;a<r.length;a++)0!==e.length&&-1===e.indexOf(r[a].uuid)||t.push(r[a].uuid);this.emit("includedServicesDiscover",this._address,n.uuid,t)}else this._queueCommand(this.readByTypeRequest(r[r.length-1].endHandle+1,n.endHandle,10242),i)};this._queueCommand(this.readByTypeRequest(n.startHandle,n.endHandle,10242),i)},a.prototype.addCharacteristics=function(t,e){this._characteristics[t]=this._characteristics[t]||{},this._descriptors[t]=this._descriptors[t]||{};for(let n=0;n<e.length;n++)this._characteristics[t][e[n].uuid]=e[n]},a.prototype.discoverCharacteristics=function(t,e){const n=this._services[t],r=[];this._characteristics[t]=this._characteristics[t]||{},this._descriptors[t]=this._descriptors[t]||{};const i=o=>{const a=o[0];let s=0;if(9===a){const t=o[1],e=(o.length-2)/t;for(s=0;s<e;s++){const e=2+s*t;r.push({startHandle:o.readUInt16LE(e),properties:o.readUInt8(e+2),valueHandle:o.readUInt16LE(e+3),uuid:7===t?o.readUInt16LE(e+5).toString(16):o.slice(e+5).slice(0,16).toString("hex").match(/.{1,2}/g).reverse().join("")})}}if(9!==a||r[r.length-1].valueHandle===n.endHandle){const i=[];for(s=0;s<r.length;s++){const o=r[s].properties,a={properties:[],uuid:r[s].uuid};r[s].propsDecoded=a.properties,r[s].rawProps=o,0!==s&&(r[s-1].endHandle=r[s].startHandle-1),s===r.length-1&&(r[s].endHandle=n.endHandle),this._characteristics[t][r[s].uuid]=r[s],1&o&&a.properties.push("broadcast"),2&o&&a.properties.push("read"),4&o&&a.properties.push("writeWithoutResponse"),8&o&&a.properties.push("write"),16&o&&a.properties.push("notify"),32&o&&a.properties.push("indicate"),64&o&&a.properties.push("authenticatedSignedWrites"),128&o&&a.properties.push("extendedProperties"),0!==e.length&&-1===e.indexOf(a.uuid)||i.push(a)}this.emit("characteristicsDiscovered",this._address,t,r),this.emit("characteristicsDiscover",this._address,t,i)}else this._queueCommand(this.readByTypeRequest(r[r.length-1].valueHandle+1,n.endHandle,10243),i)};this._queueCommand(this.readByTypeRequest(n.startHandle,n.endHandle,10243),i)},a.prototype.read=function(t,e){const n=this._characteristics[t][e];let r=Buffer.alloc(0);const i=o=>{const a=o[0];11===a||13===a?(r=Buffer.from(`${r.toString("hex")}${o.slice(1).toString("hex")}`,"hex"),o.length===this._mtu?this._queueCommand(this.readBlobRequest(n.valueHandle,r.length),i):this.emit("read",this._address,t,e,r)):this.emit("read",this._address,t,e,r)};this._queueCommand(this.readRequest(n.valueHandle),i)},a.prototype.write=function(t,e,n,r){const i=this._characteristics[t][e];if(r)this._queueCommand(this.writeRequest(i.valueHandle,n,!0),null,()=>{this.emit("write",this._address,t,e)});else{if(n.length+3>this._mtu)return this.longWrite(t,e,n,r);this._queueCommand(this.writeRequest(i.valueHandle,n,!1),n=>{19===n[0]&&this.emit("write",this._address,t,e)})}},a.prototype.longWrite=function(t,e,n,i){const o=this._characteristics[t][e],a=this._mtu-5,s=t=>e=>{const n=e[0];if(23!==n)r(this._address+": unexpected reply opcode %d (expecting ATT_OP_PREPARE_WRITE_RESP)",n);else{const n=t.length+5;e.length!==n&&r(this._address+": unexpected prepareWriteResponse length %d (expecting %d)",e.length,n)}};let c=0;for(;c<n.length;){const t=c+a,e=n.slice(c,t);this._queueCommand(this.prepareWriteRequest(o.valueHandle,c,e),s(e)),c=t}this._queueCommand(this.executeWriteRequest(o.valueHandle),n=>{25!==n[0]||i||this.emit("write",this._address,t,e)})},a.prototype.broadcast=function(t,e,n){const r=this._characteristics[t][e];this._queueCommand(this.readByTypeRequest(r.startHandle,r.endHandle,10499),r=>{if(9===r[0]){const i=r.readUInt16LE(2);let o=r.readUInt16LE(4);n?o|=1:o&=65534;const a=Buffer.alloc(2);a.writeUInt16LE(o,0),this._queueCommand(this.writeRequest(i,a,!1),r=>{19===r[0]&&this.emit("broadcast",this._address,t,e,n)})}})},a.prototype.notify=function(t,e,n){const r=this._characteristics[t][e];this._queueCommand(this.readByTypeRequest(r.startHandle,r.endHandle,10498),i=>{if(9===i[0]){const o=i.readUInt16LE(2);let a=i.readUInt16LE(4);const s=16&r.properties,c=32&r.properties;n?s?a|=1:c&&(a|=2):s?a&=65534:c&&(a&=65533);const u=Buffer.alloc(2);u.writeUInt16LE(a,0),this._queueCommand(this.writeRequest(o,u,!1),r=>{19===r[0]&&this.emit("notify",this._address,t,e,n)})}})},a.prototype.discoverDescriptors=function(t,e){const n=this._characteristics[t][e],r=[];this._descriptors[t][e]={};const i=o=>{const a=o[0];let s=0;if(5===a){const t=o[1],e=2+(1===t?2:16),n=(o.length-2)/e;for(s=0;s<n;s++){const n=2+s*e;r.push({handle:o.readUInt16LE(n+0),uuid:1===t?o.readUInt16LE(n+2).toString(16):o.slice(n+2).slice(0,16).toString("hex").match(/.{1,2}/g).reverse().join("")})}}if(5!==a||r[r.length-1].handle===n.endHandle){const n=[];for(s=0;s<r.length;s++)n.push(r[s].uuid),this._descriptors[t][e][r[s].uuid]=r[s];this.emit("descriptorsDiscover",this._address,t,e,n)}else this._queueCommand(this.findInfoRequest(r[r.length-1].handle+1,n.endHandle),i)};this._queueCommand(this.findInfoRequest(n.valueHandle+1,n.endHandle),i)},a.prototype.readValue=function(t,e,n){const r=this._descriptors[t][e][n];let i=Buffer.alloc(0);const o=a=>{const s=a[0];11===s||13===s?(i=Buffer.from(`${i.toString("hex")}${a.slice(1).toString("hex")}`,"hex"),a.length===this._mtu?this._queueCommand(this.readBlobRequest(r.handle,i.length),o):this.emit("valueRead",this._address,t,e,n,i)):this.emit("valueRead",this._address,t,e,n,i)};this._queueCommand(this.readRequest(r.handle),o)},a.prototype.writeValue=function(t,e,n,r){const i=this._descriptors[t][e][n];this._queueCommand(this.writeRequest(i.handle,r,!1),r=>{19===r[0]&&this.emit("valueWrite",this._address,t,e,n)})},a.prototype.readHandle=function(t){let e=Buffer.alloc(0);const n=r=>{const i=r[0];11===i||13===i?(e=Buffer.from(`${e.toString("hex")}${r.slice(1).toString("hex")}`,"hex"),r.length===this._mtu?this._queueCommand(this.readBlobRequest(t,e.length),n):this.emit("handleRead",this._address,t,e)):this.emit("handleRead",this._address,t,e)};this._queueCommand(this.readRequest(t),n)},a.prototype.writeHandle=function(t,e,n){n?this._queueCommand(this.writeRequest(t,e,!0),null,()=>{this.emit("handleWrite",this._address,t)}):this._queueCommand(this.writeRequest(t,e,!1),e=>{19===e[0]&&this.emit("handleWrite",this._address,t)})},t.exports=a},function(t,e,n){const r=n(54)("gap"),i=n(19),o=n(69),a=n(14),s="linux"===o.platform()&&-1!==o.release().indexOf("-ntc"),c=function(t){this._hci=t,this._scanState=null,this._scanFilterDuplicates=null,this._discoveries={},this._hci.on("error",this.onHciError.bind(this)),this._hci.on("leScanParametersSet",this.onHciLeScanParametersSet.bind(this)),this._hci.on("leScanEnableSet",this.onHciLeScanEnableSet.bind(this)),this._hci.on("leAdvertisingReport",this.onHciLeAdvertisingReport.bind(this)),this._hci.on("leExtendedAdvertisingReport",this.onHciLeExtendedAdvertisingReport.bind(this)),this._hci.on("leScanEnableSetCmd",this.onLeScanEnableSetCmd.bind(this))};a.inherits(c,i.EventEmitter),c.prototype.setScanParameters=function(t,e){this._hci.setScanParameters(t,e)},c.prototype.startScanning=function(t){this._scanState="starting",this._scanFilterDuplicates=!t,this._hci.setScanEnabled(!1,!0),this._hci.setScanParameters(),s&&(this._scanFilterDuplicates=!1),this._hci.setScanEnabled(!0,this._scanFilterDuplicates)},c.prototype.stopScanning=function(){this._scanState="stopping",this._hci.setScanEnabled(!1,!0)},c.prototype.onHciError=function(t){console.warn(t)},c.prototype.onHciLeScanParametersSet=function(){this.emit("scanParametersSet")},c.prototype.onHciLeScanEnableSet=function(t){0===t&&("starting"===this._scanState?(this._scanState="started",this.emit("scanStart",this._scanFilterDuplicates)):"stopping"===this._scanState&&(this._scanState="stopped",this.emit("scanStop")))},c.prototype.onLeScanEnableSetCmd=function(t,e){"starting"===this._scanState||"started"===this._scanState?t?this._scanFilterDuplicates!==e&&(this._scanFilterDuplicates=e,this.emit("scanStart",this._scanFilterDuplicates)):this.emit("scanStop"):"stopping"!==this._scanState&&"stopped"!==this._scanState||!t||this.emit("scanStart",this._scanFilterDuplicates)},c.prototype.onHciLeAdvertisingReport=function(t,e,n,i,o,a){const s=!!this._discoveries[n];let c=s?this._discoveries[n].count:0,u=!!s&&this._discoveries[n].hasScanResponse;4===e&&(u=!0),c++;const l=this.parseServices(n,o,s,e);"gap"===process.env.DEBUG&&r("advertisement = "+JSON.stringify(l,null,0));const f=4===e&&s?this._discoveries[n].connectable:3!==e,h=6===e;this._discoveries[n]={address:n,addressType:i,connectable:f,advertisement:l,rssi:a,count:c,hasScanResponse:u},(4===e||!f||c>1&&!u||process.env.NOBLE_REPORT_ALL_HCI_EVENTS)&&this.emit("discover",t,n,i,f,l,a,h)},c.prototype.onHciLeExtendedAdvertisingReport=function(t,e,n,i,o,a,s){const c=!!this._discoveries[n];let u=c?this._discoveries[n].count:0,l=!!c&&this._discoveries[n].hasScanResponse;8&e&&(l=!0),u++;const f=this.parseServices(n,s,c,e,o);"gap"===process.env.DEBUG&&r("advertisement = "+JSON.stringify(f,null,0));const h=8&e&&c?this._discoveries[n].connectable:1&e,p=2&e?1:0,d=32&e?1:0;this._discoveries[n]={address:n,addressType:i,connectable:h,advertisement:f,rssi:a,count:u,hasScanResponse:l},(8&e||!h&&!d||u>1&&!l||process.env.NOBLE_REPORT_ALL_HCI_EVENTS)&&this.emit("discover",t,n,i,h,f,a,p)},c.prototype.parseServices=function(t,e,n,i,o){let a=0;const s=n?this._discoveries[t].advertisement:{localName:void 0,txPowerLevel:o,manufacturerData:void 0,serviceData:[],serviceUuids:[],solicitationServiceUuids:[]};for(4!==i&&(s.serviceData=[],s.serviceUuids=[],s.serviceSolicitationUuids=[]);a+1<e.length;){const t=e.readUInt8(a);if(t<1){r("invalid EIR data, length = "+t);break}const n=e.readUInt8(a+1);if(a+t+1>e.length){r("invalid EIR data, out of range of buffer length");break}const i=e.slice(a+2).slice(0,t-1);switch(n){case 2:case 3:for(let t=0;t<i.length-1;t+=2){const e=i.readUInt16LE(t).toString(16);-1===s.serviceUuids.indexOf(e)&&s.serviceUuids.push(e)}break;case 6:case 7:for(let t=0;t<i.length-15;t+=16){const e=i.slice(t,t+16).toString("hex").match(/.{1,2}/g).reverse().join("");-1===s.serviceUuids.indexOf(e)&&s.serviceUuids.push(e)}break;case 8:case 9:s.localName=i.toString("utf8");break;case 10:s.txPowerLevel=i.readInt8(0);break;case 20:for(let t=0;t<i.length-1;t+=2){const e=i.readUInt16LE(t).toString(16);-1===s.serviceSolicitationUuids.indexOf(e)&&s.serviceSolicitationUuids.push(e)}break;case 21:for(let t=0;t<i.length-15;t+=16){const e=i.slice(t,t+16).toString("hex").match(/.{1,2}/g).reverse().join("");-1===s.serviceSolicitationUuids.indexOf(e)&&s.serviceSolicitationUuids.push(e)}break;case 22:s.serviceData.push({uuid:i.slice(0,2).toString("hex").match(/.{1,2}/g).reverse().join(""),data:i.slice(2,i.length)});break;case 32:s.serviceData.push({uuid:i.slice(0,4).toString("hex").match(/.{1,2}/g).reverse().join(""),data:i.slice(4,i.length)});break;case 33:s.serviceData.push({uuid:i.slice(0,16).toString("hex").match(/.{1,2}/g).reverse().join(""),data:i.slice(16,i.length)});break;case 31:for(let t=0;t<i.length-3;t+=4){const e=i.readUInt32LE(t).toString(16);-1===s.serviceSolicitationUuids.indexOf(e)&&s.serviceSolicitationUuids.push(e)}break;case 255:s.manufacturerData=i}a+=t+1}return s},t.exports=c},function(t,e,n){const r=n(54)("hci"),i=n(19),o=n(14),a=n(359),s=n(360),c=function(t){t=t||{},this._socket=new a,this._isDevUp=null,this._isExtended="extended"in t&&t.extended,this._state=null,this._handleBuffers={},this._aclBuffers=void 0,this._resolveAclBuffers=void 0;const e=new Promise(t=>{this._resolveAclBuffers=t});this.getAclBuffers=async function(){return this._aclBuffers?this._aclBuffers:await e}.bind(this),this.setAclBuffers=function(t,e){if(this._aclBuffers)return this._aclBuffers.length=t,void(this._aclBuffers.num=e);this._aclBuffers={length:t,num:e},this._resolveAclBuffers(this._aclBuffers)}.bind(this),this._aclConnections=new Map,this._aclQueue=[],this._deviceId=null!=t.deviceId?parseInt(t.deviceId,10):process.env.NOBLE_HCI_DEVICE_ID?parseInt(process.env.NOBLE_HCI_DEVICE_ID,10):void 0,this._userChannel=void 0===t.userChannel&&t.userChannel||process.env.HCI_CHANNEL_USER,this.on("stateChange",this.onStateChange.bind(this))};o.inherits(c,i.EventEmitter),c.STATUS_MAPPER=s,c.prototype.init=function(t){this._socket.on("data",this.onSocketData.bind(this)),this._socket.on("error",this.onSocketError.bind(this)),this._userChannel?(this._socket.bindUser(this._deviceId),this._socket.start(),this.reset()):(this._bound||(this._socket.bindRaw(this._deviceId),this._bound=!0),this._socket.start(),this.pollIsDevUp())},c.prototype.pollIsDevUp=function(){const t=this._socket.isDevUp();if(this._isDevUp!==t){if(t){if("poweredOff"===this._state)return this._socket.removeAllListeners(),this._state=null,void this.init();this._isExtended&&this.setCodedPhySupport(),this.setSocketFilter(),this.setEventMask(),this.setLeEventMask(),this.readLocalVersion(),this.writeLeHostSupported(),this.readLeHostSupported(),this.readLeBufferSize(),this.readBdAddr()}else this.emit("stateChange","poweredOff");this._isDevUp=t}setTimeout(this.pollIsDevUp.bind(this),1e3)},c.prototype.setCodedPhySupport=function(){const t=Buffer.alloc(7);t.writeUInt8(1,0),t.writeUInt16LE(8241,1),t.writeUInt8(3,3),t.writeUInt8(0,4),t.writeUInt8(5,5),t.writeUInt8(5,6),r("set all phys supporting - writing: "+t.toString("hex")),this._socket.write(t)},c.prototype.setRandomMAC=function(){const t=Buffer.alloc(10);t.writeUInt8(1,0),t.writeUInt16LE(8197,1),t.writeUInt8(6,3),t.writeUInt8(5,4),t.writeUInt8(4,5),t.writeUInt8(3,6),t.writeUInt8(2,7),t.writeUInt8(1,8),t.writeUInt8(0,9),r("set random mac address - writing: "+t.toString("hex")),this._socket.write(t)},c.prototype.setSocketFilter=function(){const t=Buffer.alloc(14);t.writeUInt32LE(22,0),t.writeUInt32LE(573728,4),t.writeUInt32LE(1<<30,8),t.writeUInt16LE(0,12),r("setting filter to: "+t.toString("hex")),this._socket.setFilter(t)},c.prototype.setEventMask=function(){const t=Buffer.alloc(12),e=Buffer.from("fffffbff07f8bf3d","hex");t.writeUInt8(1,0),t.writeUInt16LE(3073,1),t.writeUInt8(e.length,3),e.copy(t,4),r("set event mask - writing: "+t.toString("hex")),this._socket.write(t)},c.prototype.reset=function(){const t=Buffer.alloc(4);t.writeUInt8(1,0),t.writeUInt16LE(3075,1),t.writeUInt8(0,3),r("reset - writing: "+t.toString("hex")),this._socket.write(t)},c.prototype.readSupportedCommands=function(){const t=Buffer.alloc(4);t.writeUInt8(1,0),t.writeUInt16LE(4098,1),t.writeUInt8(0,3),r("read supported commands - writing: "+t.toString("hex")),this._socket.write(t)},c.prototype.readLocalVersion=function(){const t=Buffer.alloc(4);t.writeUInt8(1,0),t.writeUInt16LE(4097,1),t.writeUInt8(0,3),r("read local version - writing: "+t.toString("hex")),this._socket.write(t)},c.prototype.readBufferSize=function(){const t=Buffer.alloc(4);t.writeUInt8(1,0),t.writeUInt16LE(4101,1),t.writeUInt8(0,3),r("read buffer size - writing: "+t.toString("hex")),this._socket.write(t)},c.prototype.readBdAddr=function(){const t=Buffer.alloc(4);t.writeUInt8(1,0),t.writeUInt16LE(4105,1),t.writeUInt8(0,3),r("read bd addr - writing: "+t.toString("hex")),this._socket.write(t)},c.prototype.setLeEventMask=function(){const t=Buffer.alloc(12),e=this._isExtended?Buffer.from("1fff000000000000","hex"):Buffer.from("1f00000000000000","hex");t.writeUInt8(1,0),t.writeUInt16LE(8193,1),t.writeUInt8(e.length,3),e.copy(t,4),r("set le event mask - writing: "+t.toString("hex")),this._socket.write(t)},c.prototype.readLeBufferSize=function(){const t=Buffer.alloc(4);t.writeUInt8(1,0),t.writeUInt16LE(8194,1),t.writeUInt8(0,3),r("le read buffer size - writing: "+t.toString("hex")),this._socket.write(t)},c.prototype.readLeHostSupported=function(){const t=Buffer.alloc(4);t.writeUInt8(1,0),t.writeUInt16LE(3180,1),t.writeUInt8(0,3),r("read LE host supported - writing: "+t.toString("hex")),this._socket.write(t)},c.prototype.writeLeHostSupported=function(){const t=Buffer.alloc(6);t.writeUInt8(1,0),t.writeUInt16LE(3181,1),t.writeUInt8(2,3),t.writeUInt8(1,4),t.writeUInt8(0,5),r("write LE host supported - writing: "+t.toString("hex")),this._socket.write(t)},c.prototype.setScanParameters=function(t=18,e=18){const n=Buffer.alloc(this._isExtended?17:11);n.writeUInt8(1,0),n.writeUInt16LE(this._isExtended?8257:8203,1),this._isExtended?(n.writeUInt8(13,3),n.writeUInt8(0,4),n.writeUInt8(0,5),n.writeUInt8(5,6),n.writeUInt8(1,7),n.writeUInt16LE(t,8),n.writeUInt16LE(e,10),n.writeUInt8(1,12),n.writeUInt16LE(t,13),n.writeUInt16LE(e,15)):(n.writeUInt8(7,3),n.writeUInt8(1,4),n.writeUInt16LE(t,5),n.writeUInt16LE(e,7),n.writeUInt8(0,9),n.writeUInt8(0,10)),r("set scan parameters - writing: "+n.toString("hex")),this._socket.write(n)},c.prototype.setScanEnabled=function(t,e){const n=Buffer.alloc(this._isExtended?10:6);n.writeUInt8(1,0),n.writeUInt16LE(this._isExtended?8258:8204,1),this._isExtended?(n.writeUInt8(6,3),n.writeUInt8(t?1:0,4),n.writeUInt8(e?1:0,5),n.writeUInt16LE(0,6),n.writeUInt16LE(0,8)):(n.writeUInt8(2,3),n.writeUInt8(t?1:0,4),n.writeUInt8(e?1:0,5)),r("set scan enabled - writing: "+n.toString("hex")),this._socket.write(n)},c.prototype.createLeConn=function(t,e,n={}){const{minInterval:i=6,maxInterval:o=18,latency:a=0,timeout:s=42}=n,c=Buffer.alloc(this._isExtended?46:29);c.writeUInt8(1,0),c.writeUInt16LE(this._isExtended?8259:8205,1),this._isExtended?(c.writeUInt8(42,3),c.writeUInt8(0,4),c.writeUInt8(0,5),c.writeUInt8("random"===e?1:0,6),Buffer.from(t.split(":").reverse().join(""),"hex").copy(c,7),c.writeUInt8(5,13),c.writeUInt16LE(96,14),c.writeUInt16LE(96,16),c.writeUInt16LE(i,18),c.writeUInt16LE(o,20),c.writeUInt16LE(a,22),c.writeUInt16LE(s,24),c.writeUInt16LE(0,26),c.writeUInt16LE(0,28),c.writeUInt16LE(96,30),c.writeUInt16LE(96,32),c.writeUInt16LE(i,34),c.writeUInt16LE(o,36),c.writeUInt16LE(a,38),c.writeUInt16LE(s,40),c.writeUInt16LE(0,42),c.writeUInt16LE(0,44)):(c.writeUInt8(25,3),c.writeUInt16LE(96,4),c.writeUInt16LE(48,6),c.writeUInt8(0,8),c.writeUInt8("random"===e?1:0,9),Buffer.from(t.split(":").reverse().join(""),"hex").copy(c,10),c.writeUInt8(0,16),c.writeUInt16LE(i,17),c.writeUInt16LE(o,19),c.writeUInt16LE(a,21),c.writeUInt16LE(s,23),c.writeUInt16LE(4,25),c.writeUInt16LE(6,27)),r("create le conn - writing: "+c.toString("hex")),this._socket.write(c)},c.prototype.connUpdateLe=function(t,e,n,i,o){const a=Buffer.alloc(18);a.writeUInt8(1,0),a.writeUInt16LE(8211,1),a.writeUInt8(14,3),a.writeUInt16LE(t,4),a.writeUInt16LE(Math.floor(e/1.25),6),a.writeUInt16LE(Math.floor(n/1.25),8),a.writeUInt16LE(i,10),a.writeUInt16LE(Math.floor(o/10),12),a.writeUInt16LE(0,14),a.writeUInt16LE(0,16),r("conn update le - writing: "+a.toString("hex")),this._socket.write(a)},c.prototype.cancelConnect=function(){const t=Buffer.alloc(4);t.writeUInt8(1,0),t.writeUInt16LE(8206,1),t.writeUInt8(0,3),r("cancel le conn - writing: "+t.toString("hex")),this._socket.write(t)},c.prototype.startLeEncryption=function(t,e,n,i){const o=Buffer.alloc(32);o.writeUInt8(1,0),o.writeUInt16LE(8217,1),o.writeUInt8(28,3),o.writeUInt16LE(t,4),e.copy(o,6),n.copy(o,14),i.copy(o,16),r("start le encryption - writing: "+o.toString("hex")),this._socket.write(o)},c.prototype.disconnect=function(t,e){const n=Buffer.alloc(7);e=e||19,n.writeUInt8(1,0),n.writeUInt16LE(1030,1),n.writeUInt8(3,3),n.writeUInt16LE(t,4),n.writeUInt8(e,6),r("disconnect - writing: "+n.toString("hex")),this._socket.write(n)},c.prototype.readRssi=function(t){const e=Buffer.alloc(6);e.writeUInt8(1,0),e.writeUInt16LE(5125,1),e.writeUInt8(2,3),e.writeUInt16LE(t,4),r("read rssi - writing: "+e.toString("hex")),this._socket.write(e)},c.prototype.writeAclDataPkt=async function(t,e,n){const i=4+n.length,o=await this.getAclBuffers(),a=Math.min(i,o.length),s=Math.max(a+5,9),c=Buffer.alloc(s);for(c.writeUInt8(2,0),c.writeUInt16LE(0|t,1),c.writeUInt16LE(a,3),c.writeUInt16LE(n.length,5),c.writeUInt16LE(e,7),n.copy(c,9),n=n.slice(c.length-9),r("push to acl queue: "+c.toString("hex")),this._aclQueue.push({handle:t,packet:c});n.length>0;){const e=Math.min(n.length,o.length),i=Buffer.alloc(e+5);i.writeUInt8(2,0),i.writeUInt16LE(4096|t,1),i.writeUInt16LE(e,3),n.copy(i,5),n=n.slice(i.length-5),r("push fragment to acl queue: "+i.toString("hex")),this._aclQueue.push({handle:t,packet:i})}this.flushAcl()},c.prototype.flushAcl=async function(){const t=()=>{let t=0;for(const{pending:e}of this._aclConnections.values())t+=e;return t};r(`flush - pending: ${t()} queue length: ${this._aclQueue.length}`);const e=await this.getAclBuffers();for(;this._aclQueue.length>0&&t()<e.num;){const{handle:t,packet:e}=this._aclQueue.shift();this._aclConnections.get(t).pending++,r("write acl data packet - writing: "+e.toString("hex")),this._socket.write(e)}},c.prototype.onSocketData=function(t){r("onSocketData: "+t.toString("hex"));const e=t.readUInt8(0);let n,i,o;if(r("\tevent type = "+e),4===e){const e=t.readUInt8(1);if(r("\tsub event type = "+e),5===e){n=t.readUInt16LE(4);const e=t.readUInt8(6);r("\t\thandle = "+n),r("\t\treason = "+e),this._aclQueue=this._aclQueue.filter(t=>t.handle!==n),this._aclConnections.delete(n),this.flushAcl(),this.emit("disconnComplete",n,e)}else if(8===e){n=t.readUInt16LE(4);const e=t.readUInt8(6);r("\t\thandle = "+n),r("\t\tencrypt = "+e),this.emit("encryptChange",n,e)}else if(14===e){i=t.readUInt16LE(4),o=t.readUInt8(6);const e=t.slice(7);r("\t\tcmd = "+i),r("\t\tstatus = "+o),r("\t\tresult = "+e.toString("hex")),this.processCmdCompleteEvent(i,o,e)}else if(15===e)o=t.readUInt8(3),i=t.readUInt16LE(5),r("\t\tstatus = "+o),r("\t\tcmd = "+i),this.processCmdStatusEvent(i,o);else if(62===e){const e=t.readUInt8(2),n=t.readUInt8(3),i=t.readUInt8(4),o=t.slice(5);r("\t\tLE meta event type = "+n),r("\t\tLE meta event data length = "+e),r("\t\tLE meta event num reports = "+i),r("\t\tLE meta event data = "+o.toString("hex")),this.processLeMetaEvent(n,i,o)}else if(19===e){const e=t.readUInt8(3);for(let n=0;n<e;n++){const e=t.readUInt16LE(4+4*n),i=t.readUInt16LE(6+4*n);if(r("\thandle = "+e),r("\t\tcompleted = "+i),!this._aclConnections.has(e)){r("\t\tclosed");continue}const o=this._aclConnections.get(e);o.pending-=i,o.pending<0&&(o.pending=0)}this.flushAcl()}}else if(2===e){const e=t.readUInt16LE(1)>>12;if(n=4095&t.readUInt16LE(1),2===e){const e=t.readUInt16LE(7),i=t.readUInt16LE(5),o=t.slice(9);r("\t\tcid = "+e),i===o.length?(r("\t\thandle = "+n),r("\t\tdata = "+o.toString("hex")),this.emit("aclDataPkt",n,e,o)):this._handleBuffers[n]={length:i,cid:e,data:o}}else if(1===e){if(!this._handleBuffers[n]||!this._handleBuffers[n].data)return;this._handleBuffers[n].data=Buffer.concat([this._handleBuffers[n].data,t.slice(5)]),this._handleBuffers[n].data.length===this._handleBuffers[n].length&&(this.emit("aclDataPkt",n,this._handleBuffers[n].cid,this._handleBuffers[n].data),delete this._handleBuffers[n])}}else if(1===e){i=t.readUInt16LE(1);const e=t.readUInt8(3);if(r("\t\tcmd = "+i),r("\t\tdata len = "+e),8204===i||8258===i){const e=1===t.readUInt8(4),n=1===t.readUInt8(5);r("\t\t\tLE enable scan command"),r("\t\t\tenable scanning = "+e),r("\t\t\tfilter duplicates = "+n),this.emit("leScanEnableSetCmd",e,n)}}},c.prototype.onSocketError=function(t){r("onSocketError: "+t.message),"EPERM"===t.code?this.emit("stateChange","unauthorized"):t.message},c.prototype.processCmdCompleteEvent=function(t,e,n){if(3075===t)this._isExtended&&this.setCodedPhySupport(),this.setEventMask(),this.setLeEventMask(),this.readLocalVersion(),this.readBdAddr();else if(3180===t){if(0===e){const t=n.readUInt8(0),e=n.readUInt8(1);r("\t\t\tle = "+t),r("\t\t\tsimul = "+e)}}else if(4097===t){const t=n.readUInt8(0),e=n.readUInt16LE(1),r=n.readInt8(3),i=n.readUInt16LE(4),o=n.readUInt16LE(6);t<6?this.emit("stateChange","unsupported"):"poweredOn"!==this._state&&(this.setScanEnabled(!1,!0),this.setScanParameters()),this.emit("readLocalVersion",t,e,r,i,o)}else if(4098===t){const t=16&n.readUInt8(37),e=32&n.readUInt8(37);r(`Extended advertising features: parameters = ${t?"true":"false"}, num = ${e?"true":"false"}`),this._isExtended=t&&e}else if(4105===t)this.addressType="public",this.address=n.toString("hex").match(/.{1,2}/g).reverse().join(":"),r("address = "+this.address),this.emit("addressChange",this.address);else if(8203===t||8257===t)this.emit("stateChange","poweredOn"),this.emit("leScanParametersSet");else if(8204===t||8258===t)this.emit("leScanEnableSet",e);else if(5125===t){const t=n.readUInt16LE(0),e=n.readInt8(2);r("\t\t\thandle = "+t),r("\t\t\trssi = "+e),this.emit("rssiRead",t,e)}else if(8194===t){if(0===e){const t=n.readUInt16LE(0),e=n.readUInt8(2);0===t||0===e?(r("using br/edr buffer size"),this.readBufferSize()):(r(`le buffer size: length = ${t}, num = ${e}`),this.setAclBuffers(t,e))}}else if(4101===t){const t=n.readUInt16LE(0),e=n.readUInt16LE(3);r(`buffer size: length = ${t}, num = ${e}`),this.setAclBuffers(t,e)}},c.prototype.processLeMetaEvent=function(t,e,n){1===t?this.processLeConnComplete(e,n):10===t?this.processLeEnhancedConnComplete(e,n):2===t?this.processLeAdvertisingReport(e,n):13===t?this.processLeExtendedAdvertisingReport(e,n):3===t&&this.processLeConnUpdateComplete(e,n)},c.prototype.processLeConnComplete=function(t,e){const n=e.readUInt16LE(0),i=e.readUInt8(2),o=1===e.readUInt8(3)?"random":"public",a=e.slice(4,10).toString("hex").match(/.{1,2}/g).reverse().join(":"),s=1.25*e.readUInt16LE(10),c=e.readUInt16LE(12),u=10*e.readUInt16LE(14),l=e.readUInt8(16);r("\t\t\thandle = "+n),r("\t\t\trole = "+i),r("\t\t\taddress type = "+o),r("\t\t\taddress = "+a),r("\t\t\tinterval = "+s),r("\t\t\tlatency = "+c),r("\t\t\tsupervision timeout = "+u),r("\t\t\tmaster clock accuracy = "+l),this._aclConnections.set(n,{pending:0}),this.emit("leConnComplete",t,n,i,o,a,s,c,u,l)},c.prototype.processLeEnhancedConnComplete=function(t,e){const n=e.readUInt16LE(0),i=e.readUInt8(2),o=1===e.readUInt8(3)?"random":"public",a=e.slice(4,10).toString("hex").match(/.{1,2}/g).reverse().join(":"),s=e.slice(10,16).toString("hex").match(/.{1,2}/g).reverse().join(":"),c=e.slice(16,22).toString("hex").match(/.{1,2}/g).reverse().join(":"),u=1.25*e.readUInt16LE(22),l=e.readUInt16LE(24),f=10*e.readUInt16LE(26),h=e.readUInt8(28);r("\t\t\thandle = "+n),r("\t\t\trole = "+i),r("\t\t\taddress type = "+o),r("\t\t\taddress = "+a),r("\t\t\tLocal resolvable private address = "+s),r("\t\t\tPeer resolvable private address = "+c),r("\t\t\tinterval = "+u),r("\t\t\tlatency = "+l),r("\t\t\tsupervision timeout = "+f),r("\t\t\tmaster clock accuracy = "+h),this._aclConnections.set(n,{pending:0}),this.emit("leConnComplete",t,n,i,o,a,u,l,f,h)},c.prototype.processLeAdvertisingReport=function(t,e){try{for(let n=0;n<t;n++){const t=e.readUInt8(0),n=1===e.readUInt8(1)?"random":"public",i=e.slice(2,8).toString("hex").match(/.{1,2}/g).reverse().join(":"),o=e.readUInt8(8),a=e.slice(9,o+9),s=e.readInt8(o+9);r("\t\t\ttype = "+t),r("\t\t\taddress = "+i),r("\t\t\taddress type = "+n),r("\t\t\teir = "+a.toString("hex")),r("\t\t\trssi = "+s),this.emit("leAdvertisingReport",0,t,i,n,a,s),e=e.slice(o+10)}}catch(t){console.warn("processLeAdvertisingReport: Caught illegal packet (buffer overflow): "+t)}},c.prototype.processLeExtendedAdvertisingReport=function(t,e){try{for(let n=0;n<t;n++){const t=e.readUInt16LE(0),n=1===e.readUInt8(2)?"random":"public",i=e.slice(3,9).toString("hex").match(/.{1,2}/g).reverse().join(":"),o=e.readUInt8(9),a=e.readUInt8(10),s=e.readUInt8(11),c=e.readUInt8(12),u=e.readInt8(13),l=e.readUInt16LE(14),f=1===e.readUInt8(16)?"random":"public",h=e.slice(17,23).toString("hex").match(/.{1,2}/g).reverse().join(":"),p=e.readUInt8(23),d=e.slice(24);r("\t\t\ttype = "+t),r("\t\t\taddress = "+i),r("\t\t\taddress type = "+n),r("\t\t\tprimary phy = "+o.toString(16)),r("\t\t\tsecondary phy = "+a.toString(16)),r("\t\t\tSID = "+s.toString(16)),r("\t\t\tTX power = "+c),r("\t\t\tRSSI = "+u),r(`\t\t\tperiodic advertising interval = ${l} msec`),r("\t\t\tdirect address type = "+f),r("\t\t\tdirect address = "+h),r("\t\t\teir length = "+p),r("\t\t\teir = "+d.toString("hex")),this.emit("leExtendedAdvertisingReport",0,t,i,n,c,u,d),e=e.slice(p+24)}}catch(t){console.warn("processLeExtendedAdvertisingReport: Caught illegal packet (buffer overflow): "+t)}},c.prototype.processLeConnUpdateComplete=function(t,e){const n=e.readUInt16LE(0),i=1.25*e.readUInt16LE(2),o=e.readUInt16LE(4),a=10*e.readUInt16LE(6);r("\t\t\thandle = "+n),r("\t\t\tinterval = "+i),r("\t\t\tlatency = "+o),r("\t\t\tsupervision timeout = "+a),this.emit("leConnUpdateComplete",t,n,i,o,a)},c.prototype.processCmdStatusEvent=function(t,e){8205!==t&&8259!==t||0!==e&&this.emit("leConnComplete",e)},c.prototype.onStateChange=function(t){this._state=t},t.exports=c},function(e,n){e.exports=t},function(t){t.exports=JSON.parse('["Success","Unknown HCI Command","Unknown Connection Identifier","Hardware Failure","Page Timeout","Authentication Failure","PIN or Key Missing","Memory Capacity Exceeded","Connection Timeout","Connection Limit Exceeded","Synchronous Connection Limit to a Device Exceeded","ACL Connection Already Exists","Command Disallowed","Connection Rejected due to Limited Resources","Connection Rejected due to Security Reasons","Connection Rejected due to Unacceptable BD_ADDR","Connection Accept Timeout Exceeded","Unsupported Feature or Parameter Value","Invalid HCI Command Parameters","Remote User Terminated Connection","Remote Device Terminated due to Low Resources","Remote Device Terminated due to Power Off","Connection Terminated By Local Host","Repeated Attempts","Pairing Not Allowed","Unknown LMP PDU","Unsupported Remote Feature / Unsupported LMP Feature","SCO Offset Rejected","SCO Interval Rejected","SCO Air Mode Rejected","Invalid LMP Parameters / Invalid LL Parameters","Unspecified Error","Unsupported LMP Parameter Value / Unsupported LL Parameter Value","Role Change Not Allowed","LMP Response Timeout / LL Response Timeout","LMP Error Transaction Collision","LMP PDU Not Allowed","Encryption Mode Not Acceptable","Link Key cannot be Changed","Requested QoS Not Supported","Instant Passed","Pairing With Unit Key Not Supported","Different Transaction Collision","Reserved","QoS Unacceptable Parameter","QoS Rejected","Channel Classification Not Supported","Insufficient Security","Parameter Out Of Manadatory Range","Reserved","Role Switch Pending","Reserved","Reserved Slot Violation","Role Switch Failed","Extended Inquiry Response Too Large","Secure Simple Pairing Not Supported By Host","Host Busy - Pairing","Connection Rejected due to No Suitable Channel Found","Controller Busy","Unacceptable Connection Parameters","Directed Advertising Timeout","Connection Terminated due to MIC Failure","Connection Failed to be Established","MAC Connection Failed","Coarse Clock Adjustment Rejected but Will Try to Adjust Using Clock Dragging","Type0 Submap Not Defined","Unknown Advertising Identifier","Limit Reached","Operation Cancelled by Host"]')},function(t,e,n){const r=n(54)("signaling"),i=n(19),o=n(69),a=n(14),s=function(t,e){this._handle=t,this._aclStream=e,this.onAclStreamDataBinded=this.onAclStreamData.bind(this),this.onAclStreamEndBinded=this.onAclStreamEnd.bind(this),this._aclStream.on("data",this.onAclStreamDataBinded),this._aclStream.on("end",this.onAclStreamEndBinded)};a.inherits(s,i.EventEmitter),s.prototype.onAclStreamData=function(t,e){if(5!==t)return;r("onAclStreamData: "+e.toString("hex"));const n=e.readUInt8(0),i=e.readUInt8(1),o=e.readUInt16LE(2),a=e.slice(4);r("\tcode = "+n),r("\tidentifier = "+i),r("\tlength = "+o),18===n&&this.processConnectionParameterUpdateRequest(i,a)},s.prototype.onAclStreamEnd=function(){this._aclStream.removeListener("data",this.onAclStreamDataBinded),this._aclStream.removeListener("end",this.onAclStreamEndBinded)},s.prototype.processConnectionParameterUpdateRequest=function(t,e){const n=1.25*e.readUInt16LE(0),i=1.25*e.readUInt16LE(2),a=e.readUInt16LE(4),s=10*e.readUInt16LE(6);if(r("\t\tmin interval = ",n),r("\t\tmax interval = ",i),r("\t\tlatency = ",a),r("\t\tsupervision timeout = ",s),"linux"!==o.platform()||process.env.HCI_CHANNEL_USER){const e=Buffer.alloc(6);e.writeUInt8(19,0),e.writeUInt8(t,1),e.writeUInt16LE(2,2),e.writeUInt16LE(0,4),this._aclStream.write(5,e),this.emit("connectionParameterUpdateRequest",this._handle,n,i,a,s)}},t.exports=s},function(t,e,n){"use strict";n.r(e),n.d(e,"getBLELibrary",(function(){return E})),n.d(e,"Util",(function(){return l})),n.d(e,"BLE",(function(){return U})),n.d(e,"EventEmitter",(function(){return C})),n.d(e,"BeaconParser",(function(){return ae})),n.d(e,"Beacon",(function(){return z})),n.d(e,"BuildThingBeacon",(function(){return it})),n.d(e,"EddyStone",(function(){return gt})),n.d(e,"EddyStoneTLM",(function(){return Ct})),n.d(e,"EddyStoneUID",(function(){return Dt})),n.d(e,"EddyStoneURL",(function(){return jt})),n.d(e,"iBeacon",(function(){return ft})),n.d(e,"BuildThingGateway",(function(){return de})),n.d(e,"BuildThingIAQ",(function(){return Me})),n.d(e,"Manager",(function(){return $r})),n.d(e,"Scanner",(function(){return pn})),n.d(e,"Connection",(function(){return On})),n.d(e,"Region",(function(){return Kr})),n.d(e,"RegionMonitoringState",(function(){return Gn})),n.d(e,"MonitoringData",(function(){return Vn})),n.d(e,"Monitoring",(function(){return Yn})),n.d(e,"RangedBeacon",(function(){return er})),n.d(e,"RegionRangeState",(function(){return nr})),n.d(e,"Ranging",(function(){return ir})),n.d(e,"CurveFittedDistanceCalculator",(function(){return ci})),n.d(e,"LogDistancePathDistanceCalculator",(function(){return br})),n.d(e,"DistanceConfig",(function(){return pr})),n.d(e,"DistanceCalculator",(function(){return cr})),n.d(e,"ArmaRssiFilter",(function(){return yi})),n.d(e,"Measurement",(function(){return Tr})),n.d(e,"RssiFilter",(function(){return Ar})),n.d(e,"KalmanRssiFilter",(function(){return Ur})),n.d(e,"RunningAverageRssiFilter",(function(){return wi}));n(138);var r={DEVICE_TYPE:{beacon:"Beacon",gateway:"Gateway",iaq:"IAQ"},SCANNER_SCAN_TYPE:{all:0,beacon:1,gateway:2,iaq:3},BUILDTHING_GATEWAY:{COMMUNICATION_TYPE:{3830:"Ethernet",3831:"WIFI",3832:"LTE"},SCAN_TYPE:{0:"Beacon",1:"IAQ",2:"Loadcell",3:"OtherBeacon",4:"StrainGaugeBeacon",5:"IAQ+Universal"},PROTOCOL:{0:"MQTT",1:"HTTP",2:"HTTPS",3:"MQTT+TLS"},CERTIFICATION_TYPE:{0:"Token",1:"TLS",2:"None"}},DEVICE_INFORMATION_SERVICE_UUID:"180a",EDDYSTONE_SERVICE_UUID:"feaa",BUILDTHING_SERVICE_UUID:"bcbc",MAC_ADDRESS_SERVICE_UUID:"add0",MANUFACTURER_DATA:"manufacturerData",BUILDTHING_DEVICE_INFO:{prefix:"3006",firmware_ver_1_0:"983006",gateway:{prefix:"383"},iaq:{prefix:"3700"}},IBEACON_UUID:"0b2b0848205f11e9ab14820316983006",BEACON_MODE:{BuildThing:"BuildThing",iBeacon:"iBeacon",EddyStoneUID:"EddyStoneUID",EddyStoneURL:"EddyStoneURL",EddyStoneTLM:"EddyStoneTLM"},EDDYSTONE_SERVICE_TYPE:{uid:"UID",url:"URL",tlm:"TLM"},SENSOR_TYPE:{Temp_Humi:"Temperature_Humidity",Light:"Light",Accelerometer:"Accelerometer",TVOC:"TVOC",NH3:"NH3",NO2:"NO2",IO:"IO",ADC:"ADC",FineDust:"FineDust",UltraFineDust:"UltraFineDust",ExtreamUltraFineDust:"ExtreamUltraFineDust",Celsius:"Celsius",Fahrenheit:"Fahrenheit",CO2:"CO2",Humidity:"Humidity"},BUILDTHING_BEACON_DATA_LEN:24,BUILDTHING_BEACON_SENSOR:{40:"Temperature_Humidity",44:"Light",19:"Accelerometer",58:"TVOC","1e":"NH3","1d":"NO2",20:"IO",21:"IO",48:"ADC",49:"ADC",69:"FineDust"},BUILDTHING_BEACON_MODULE_NUMBER:{20:{type:"IO_MODULE",moduleNumber:0},21:{type:"IO_MODULE",moduleNumber:1},48:{type:"ADC_MODULE",moduleNumber:0},49:{type:"ADC_MODULE",moduleNumber:1}},UNIT:{percent:"%",second:"1s",minute:"1min",hundredMilliSecond:"100ms",degree:"degree",dBm:"dBm",celsius:"°C",fahrenheit:"°F",lux:"lux",ppm:"ppm",ppb:"ppb",milliVolt:"mV",microgramsPerCubicMeter:"㎍/㎥"},ACCELEROMETER_MOTION_TYPE:{freeFall:"Free Fall",doubleTap:"Double Tap",tap:"Tap"},IAQ_STATUS:{GOOD:"Good",NORMAL:"Normal",BAD:"Bad",WORST:"Worst"},IAQ_STATUS_INDEX_TABLE:{good:{gte:0,lte:50},normal:{gte:51,lte:100},bad:{gte:101,lte:250},worst:{gte:251,lte:500}},IAQ_STATUS_INDEX_TABLE_BASED_SCORE:{good:{gte:80,lte:100},normal:{gte:65,lte:79},bad:{gte:50,lte:64},worst:{gte:0,lte:49}},IAQ_STATUS_TABLE:{FineDust:{good:{gte:0,lte:30},normal:{gte:31,lte:80},bad:{gte:81,lte:150},worst:{gte:151,lte:600}},UltraFineDust:{good:{gte:0,lte:15},normal:{gte:16,lte:35},bad:{gte:36,lte:75},worst:{gte:76,lte:500}},ExtreamUltraFineDust:{good:{gte:0,lte:15},normal:{gte:16,lte:35},bad:{gte:36,lte:75},worst:{gte:76,lte:500}},TVOC:{good:{gte:0,lte:220},normal:{gte:221,lte:660},bad:{gte:661,lte:2200},worst:{gte:2201,lte:9999}},CO2:{good:{gte:0,lte:500},normal:{gte:501,lte:700},bad:{gte:701,lte:1e3},worst:{gte:1001,lte:9999}},Celsius:{},CelsiusUpper:{good:{gte:22.5,lte:25},normal:{gte:25.01,lte:28},bad:{gte:28.01,lte:33},worst:{gte:33.01,lte:80}},CelsiusLower:{good:{gte:20,lte:22.5},normal:{gte:17,lte:19.99},bad:{gte:10,lte:16.99},worst:{gte:0,lte:9.99}},Humidity:{},HumidityUpper:{good:{gte:50,lte:60},normal:{gte:60.01,lte:70},bad:{gte:70.01,lte:80},worst:{gte:80.01,lte:100}},HumidityLower:{good:{gte:40,lte:50},normal:{gte:30,lte:39.99},bad:{gte:20,lte:29.99},worst:{gte:0,lte:19.99}}}},i=r.ACCELEROMETER_MOTION_TYPE,o="Immediate",a="Near",s="Far";function c(t){var e="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".split("");if(0===t)return e[0];for(var n="";t>0;)n=e[t%62]+n,t=Math.floor(t/62);return n}function u(t){var e,n,r=0,i=t.length;for(e=0;e<i;e++)n=t.charCodeAt(e),r+=(n-=n<58?48:n<91?29:87)*Math.pow(62,i-e-1);return r}var l={getPlatform:function(){var t={cordova:!1,electron:!1,web:!0,node:!1};"undefined"==typeof window||null===window?(t.node=!0,t.web=!1):(t.cordova=window.cordova,t.electron=window.process&&window.process.versions&&window.process.versions.electron,t.web=!t.cordova&&!t.electron||0===document.location.href.indexOf("chrome-extension://"));var e,r="web";return t.cordova?(r="cordova",e=t.cordova.platformId):t.electron?(r="electron",e=process.platform):t.node&&(r="node",e=n(69).platform()),{type:r,os:e}},asHexString:function(t){var e;return 1===(e=t.toString(16)).length&&(e="0"+e),"0x"+e},hexToString:function(t){var e,n="";for(e=0;e<t.length;e+=2)n+=String.fromCharCode(parseInt(t.substr(e,2),16));return n},stringToAscii:function(t){return t.charCodeAt(0)},stringToHex:function(t){var e,n="",r=t.length;for(e=0;e<r;e++)n+=t[e].charCodeAt(0).toString(16);return n},arrayBufferToHex:function(t){return Array.prototype.map.call(new Uint8Array(t),(function(t){return("00"+t.toString(16)).slice(-2)})).join("")},convertInstanceIdToMajorAndMinor:function(t){var e=u(t);return{major:e/1e5-e%1e5/1e5,minor:e%1e5}},convertMajorAndMinorToInstanceId:function(t,e){var n=1e5*Number(t)+Number(e);return c(Number(n))},encodeByBase62:c,decodeByBase62:u,convertMotionCodeToStringArray:function(t){var e=[];switch(t){case"1":e=[i.freeFall];break;case"2":e=[i.doubleTap];break;case"3":e=[i.doubleTap,i.freeFall];break;case"4":e=[i.tap];break;case"5":e=[i.freeFall,i.tap];break;case"6":e=[i.tap,i.doubleTap];break;case"7":e=[i.freeFall,i.tap,i.doubleTap];break;default:e=[]}return e},getDistanceGradeByDistance:function(t){return t<.5?o:t>=.5&&t<1.5?a:t>=1.5?s:void 0},convertIntegerToBitArray:function(t,e){e||(e=8),t=isNaN(t)?0:Number(t);var n=[],r=0;for(r=0;r<e;r++)n.push(t%2),t=Math.floor(t/2);return n},convertBitArrayToInteger:function(t){var e=0,n=t.length,r=0;for(e=0;e<n;e++)r+=Math.pow(2,e)*t[e];return r},getAllScannerScanType:function(){return r.SCANNER_SCAN_TYPE}},f=n(136),h=n.n(f),p=n(137),d=n.n(p),y=n(98),v=n.n(y),m=n(97),g=n.n(m),_=l.getPlatform();function b(t,e,n,i,o,a){var s,c=this._peripherals[t],u=o.serviceData?o.serviceData:[],l=!1,f=0;if(u.forEach((function(t){if(t.uuid===r.BUILDTHING_DEVICE_INFO_SERVICE_UUID||t.uuid===r.MAC_ADDRESS_SERVICE_UUID)return l=!0,!1})),c)if(l&&!c.hasScanResponse&&(c.hasScanResponse=!0),c.hasScanResponse)if(l)for(s in c.advertisement.manufacturerData&&delete c.advertisement.manufacturerData,o)void 0!==o[s]&&(c.advertisement[s]=o[s]);else{c.discoveryCount++,f=c.discoveryCount;var h,p,d=c.advertisement;o.serviceData&&(h=d.serviceData,p=o.serviceData,h&&p&&p.forEach((function(t){var e=!1;h.forEach((function(n,r){if(n.uuid===t.uuid)return h[r]=t,e=!0,!1})),e||h.push(t)}))),o.serviceUuids&&(h=d.serviceUuids,p=o.serviceUuids,h&&p&&p.forEach((function(t){var e=h.indexOf(t);e>-1?h[e]=t:h.push(t)}))),o.manufacturerData&&(d.manufacturerData=o.manufacturerData)}else for(s in o)void 0!==o[s]&&(c.advertisement[s]=o[s]);else c=new v.a(this,t,e,n,i,o,a),this._peripherals[t]=c,this._services[t]={},this._characteristics[t]={},this._descriptors[t]={},c.discoveryCount=f,c.hasScanResponse=l;c.connectable=i,c.rssi=a;var y=-1!==this._discoveredPeripheralUUids.indexOf(t);y||this._discoveredPeripheralUUids.push(t),!(c.hasScanResponse&&!l&&f>0)&&c.hasScanResponse||!this._allowDuplicates&&y||this.emit("discover",c)}var E=function(){switch(_.type){case"cordova":return window.ble||console.error("this sdk required cordova-plugin-ble-central"),window.ble;default:return"darwin"===_.os&&(g.a.prototype.onDiscover=b),h()(d.a)}};function w(t){return(w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function S(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,I(r.key),r)}}function I(t){var e=function(t,e){if("object"!=w(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=w(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==w(e)?e:String(e)}var C=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.events={}}var e,n,r;return e=t,(n=[{key:"_getEventListByName",value:function(t){return void 0===this.events[t]&&(this.events[t]=new Set),this.events[t]}},{key:"on",value:function(t,e){this._getEventListByName(t).add(e)}},{key:"once",value:function(t,e){var n=this;this.on(t,(function r(){n.off(t,r);for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];e.apply(n,o)}))}},{key:"emit",value:function(t){for(var e=this,n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];this._getEventListByName(t).forEach((function(t){t.apply(e,r)}))}},{key:"off",value:function(t,e){void 0===e?this._getEventListByName(t).clear():this._getEventListByName(t).delete(e)}}])&&S(e.prototype,n),r&&S(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function T(t){return(T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function A(){A=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(t,e,n){t[e]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,n){return t[e]=n}}function l(t,e,n,r){var o=e&&e.prototype instanceof v?e:v,a=Object.create(o.prototype),s=new O(r||[]);return i(a,"_invoke",{value:C(t,n,s)}),a}function f(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var h="suspendedStart",p="executing",d="completed",y={};function v(){}function m(){}function g(){}var _={};u(_,a,(function(){return this}));var b=Object.getPrototypeOf,E=b&&b(b(D([])));E&&E!==n&&r.call(E,a)&&(_=E);var w=g.prototype=v.prototype=Object.create(_);function S(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function I(t,e){function n(i,o,a,s){var c=f(t[i],t,o);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==T(l)&&r.call(l,"__await")?e.resolve(l.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(l).then((function(t){u.value=t,a(u)}),(function(t){return n("throw",t,a,s)}))}s(c.arg)}var o;i(this,"_invoke",{value:function(t,r){function i(){return new e((function(e,i){n(t,r,e,i)}))}return o=o?o.then(i,i):i()}})}function C(e,n,r){var i=h;return function(o,a){if(i===p)throw new Error("Generator is already running");if(i===d){if("throw"===o)throw a;return{value:t,done:!0}}for(r.method=o,r.arg=a;;){var s=r.delegate;if(s){var c=k(s,r);if(c){if(c===y)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===h)throw i=d,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=p;var u=f(e,n,r);if("normal"===u.type){if(i=r.done?d:"suspendedYield",u.arg===y)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(i=d,r.method="throw",r.arg=u.arg)}}}function k(e,n){var r=n.method,i=e.iterator[r];if(i===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,k(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),y;var o=f(i,e.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,y;var a=o.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,y):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,y)}function P(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function R(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(P,this),this.reset(!0)}function D(e){if(e||""===e){var n=e[a];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,o=function n(){for(;++i<e.length;)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}throw new TypeError(T(e)+" is not iterable")}return m.prototype=g,i(w,"constructor",{value:g,configurable:!0}),i(g,"constructor",{value:m,configurable:!0}),m.displayName=u(g,c,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,u(t,c,"GeneratorFunction")),t.prototype=Object.create(w),t},e.awrap=function(t){return{__await:t}},S(I.prototype),u(I.prototype,s,(function(){return this})),e.AsyncIterator=I,e.async=function(t,n,r,i,o){void 0===o&&(o=Promise);var a=new I(l(t,n,r,i),o);return e.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},S(w),u(w,c,"Generator"),u(w,a,(function(){return this})),u(w,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=D,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(R),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(r,i){return s.type="throw",s.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,y):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),R(n),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;R(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:D(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),y}},e}function k(t,e,n,r,i,o,a){try{var s=t[o](a),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,i)}function P(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,R(r.key),r)}}function R(t){var e=function(t,e){if("object"!=T(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=T(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==T(e)?e:String(e)}function O(t,e,n){return e=D(e),function(t,e){if(e&&("object"===T(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,n||[],D(t).constructor):e.apply(t,n))}function D(t){return(D=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function x(t,e){return(x=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var U=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=O(this,e))._ble=E(),t.platform=l.getPlatform(),t.wrapCallback(),t}var n,r,i,o,a;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&x(t,e)}(e,t),n=e,(r=[{key:"wrapCallback",value:function(){var t,e,n=this,r=n._ble;"cordova"===n.platform.type?(n._callbacks={scanStart:function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];n.emit("startScan",[].concat(e))},scanStop:function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];n.emit("stopScan",[].concat(e))},stateChange:function(t){n.emit("stateChange",t)},discover:function(t){n.emit("discover",t)},showBluetoothSettings:function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];n.emit("showBluetoothSettings",[].concat(e))},enable:function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];n.emit("enable",[].concat(e))},fail:function(t,e){n.emit("fail",t,e)}},t=n._callbacks.stateChange.bind(r),e=n._callbacks.fail.bind(r,"stateChange"),r.startStateNotifications(t,e)):(r.on("scanStart",(function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];n.emit("startScan",[].concat(e))})),r.on("scanStop",(function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];n.emit("stopScan",[].concat(e))})),r.on("stateChange",(function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];n.emit("stateChange",[].concat(e))})),r.on("discover",(function(t){n.emit("discover",t)})))}},{key:"isEnabled",value:(o=A().mark((function t(){var e,n;return A().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=(e=this)._ble,"cordova"!==e.platform.type){t.next=12;break}return t.prev=2,t.next=5,e._isEnabledCordova();case 5:return t.abrupt("return",t.sent);case 8:t.prev=8,t.t0=t.catch(2);case 10:t.next=17;break;case 12:if("poweredOn"!==n.state){t.next=16;break}return t.abrupt("return",!0);case 16:return t.abrupt("return",!1);case 17:case"end":return t.stop()}}),t,this,[[2,8]])})),a=function(){var t=this,e=arguments;return new Promise((function(n,r){var i=o.apply(t,e);function a(t){k(i,n,r,a,s,"next",t)}function s(t){k(i,n,r,a,s,"throw",t)}a(void 0)}))},function(){return a.apply(this,arguments)})},{key:"_isEnabledCordova",value:function(){var t=this._ble;return new Promise((function(e,n){t.isEnabled((function(){e(!0)}),(function(){n(new Error("Bluetooth is *not* enabled"))}))}))}},{key:"startScan",value:function(t,e){var n,r,i=this._ble;void 0===t&&(t=[]),void 0===e&&(e={}),"cordova"===this.platform.type?(n=this._callbacks.discover.bind(i),r=this._callbacks.fail.bind(i,"startScan"),e.allowDuplicates?i.startScanWithOptions(t,{reportDuplicates:!0},n,r):i.startScan(t,n,r),this._callbacks.scanStart.call(i)):i.startScanning(t,!0===e.allowDuplicates)}},{key:"stopScan",value:function(){var t,e,n=this._ble;"cordova"===this.platform.type?(e=this._callbacks.fail.bind(n,"stopScan"),t=this._callbacks.scanStop.bind(n),n.stopScan(t,e)):n.stopScanning()}},{key:"showBluetoothSettings",value:function(){var t,e,n=this._ble,r=this.platform.type,i=this.platform.os;if("cordova"!==r||"android"!==i)throw new Error("showBluetoothSettings() is only available for android");t=this._callbacks.showBluetoothSettings.bind(n),e=this._callbacks.fail.bind(n,"showBluetoothSettings"),n.showBluetoothSettings(t,e)}},{key:"enable",value:function(){var t,e,n=this._ble,r=this.platform.type,i=this.platform.os;if("cordova"!==r||"android"!==i)throw new Error("enable() is only available for android");t=this._callbacks.enable.bind(n),e=this._callbacks.fail.bind(n,"enable"),n.enable(t,e)}}])&&P(n.prototype,r),i&&P(n,i),Object.defineProperty(n,"prototype",{writable:!1}),e}(C);function N(t){return(N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function B(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,M(r.key),r)}}function M(t){var e=function(t,e){if("object"!=N(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=N(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==N(e)?e:String(e)}var L=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._os=l.getPlatform().os}var e,n,r;return e=t,(n=[{key:"getDeviceFromPeripheral",value:function(t){throw new Error("You have to implement the method doSomething!")}},{key:"_getName",value:function(t){var e,n=this._os;return"ios"===n?e=t.advertising.kCBAdvDataLocalName:"android"===n?e=t.name:"darwin"!==n&&"win32"!==n&&"linux"!==n||(e=t.advertisement.localName.replace(/\0/g,"")),e.trim()}},{key:"_getMacAddress",value:function(t){var e,n=this._os,r=function(t){var e,n="";for(e=t.length-2;e>=0;e-=2)n+=t[e]+t[e+1],0!==e&&(n+=":");return n};return"ios"===n?(e=new Uint8Array(t.advertising.kCBAdvDataServiceData.ADD0).buffer,r(l.arrayBufferToHex(e)).toUpperCase()):"android"===n?t.id:"darwin"===n||"win32"===n||"linux"===n?(e=this._getValidServiceArrayBufferOfNode(t).ADD0,r(l.arrayBufferToHex(e)).toUpperCase()):void 0}},{key:"_getVbattPercentage",value:function(t){return t>=3e3?100:t>2900?42+58*(t-2900)/100:t>2740?18+24*(t-2740)/160:t>2440?6+12*(t-2440)/300:t>2100?6*(t-2100)/340:0}},{key:"_getValidServiceArrayBufferMap",value:function(t){var e,n=this._os;return"ios"===n?e=this._getValidServiceArrayBufferOfiOS(t):"android"===n?e=this._getValidServiceArrayBufferOfAndroid(t.advertising):"darwin"!==n&&"win32"!==n&&"linux"!==n||(e=this._getValidServiceArrayBufferOfNode(t)),e}},{key:"_getValidServiceArrayBufferOfNode",value:function(t){var e=t.advertisement.serviceData,n=void 0!==e?e.find((function(t){return"180a"===t.uuid})):void 0,r=void 0!==e?e.find((function(t){return"add0"===t.uuid})):void 0,i=void 0!==e?e.find((function(t){return"bcbc"===t.uuid})):void 0,o=void 0!==e?e.find((function(t){return"feaa"===t.uuid})):void 0,a=void 0!==t.advertisement.manufacturerData?t.advertisement.manufacturerData:void 0;return{"180A":void 0!==n?"darwin"===this._os?n.data.buffer:n.data:void 0,FEAA:void 0!==o?"darwin"===this._os?o.data.buffer:o.data:void 0,BCBC:void 0!==i?"darwin"===this._os?i.data.buffer:i.data:void 0,ADD0:void 0!==r?"darwin"===this._os?r.data.buffer:r.data:void 0,manufacturerData:void 0!==a?"darwin"===this._os?a.buffer:a:void 0}}},{key:"_getValidServiceArrayBufferOfiOS",value:function(t){return{"180A":t.advertising.kCBAdvDataServiceData["180A"],BCBC:t.advertising.kCBAdvDataServiceData.BCBC,FEAA:t.advertising.kCBAdvDataServiceData.FEAA,manufacturerData:t.advertising.kCBAdvDataManufacturerData}}},{key:"_getValidServiceArrayBufferOfAndroid",value:function(t){for(var e,n,r,i=0,o={},a=new Uint8Array(t);0!==e;)e=255&a[i],n=255&a[++i],i++,r=a.slice(i,i+e-1).buffer,i+=e-2,i++,"0x16"===l.asHexString(n)?(void 0===o[l.asHexString(n)]&&(o[l.asHexString(n)]={}),o[l.asHexString(n)][l.arrayBufferToHex(r.slice(0,2))]=r.slice(2,r.byteLength)):o[l.asHexString(n)]=r;return o={"180A":void 0!==o["0x16"]?o["0x16"]["0a18"]:void 0,BCBC:void 0!==o["0x16"]?o["0x16"].bcbc:void 0,FEAA:void 0!==o["0x16"]?o["0x16"].aafe:void 0,manufacturerData:o["0xff"]}}},{key:"_hexToDec",value:function(t){var e=0;t=t.toLowerCase();for(var n=0;n<t.length;n++)e=16*e+"0123456789abcdefgh".indexOf(t[n]);return e}}])&&B(e.prototype,n),r&&B(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function j(t){return(j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function F(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,H(r.key),r)}}function H(t){var e=function(t,e){if("object"!=j(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=j(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==j(e)?e:String(e)}var G=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.type=e.type,this.id=e.id,this.name=e.name,this.address=e.address,this.rssi=e.rssi,this.firmwareVersion=e.firmwareVersion,this._peripheral=e.peripheral}var e,n,r;return e=t,(n=[{key:"getType",value:function(){return this.type}},{key:"setType",value:function(t){this.type=t}},{key:"getId",value:function(){return this.id}},{key:"setId",value:function(t){this.id=t}},{key:"toString",value:function(){return this.id}},{key:"getName",value:function(){return this.name}},{key:"setName",value:function(t){this.name=t}},{key:"getAddress",value:function(){return this.address}},{key:"setAddress",value:function(t){this.address=t}},{key:"getRssi",value:function(){return this.rssi}},{key:"setRssi",value:function(t){this.rssi=t,this.distance=null}},{key:"setPeripheral",value:function(t){this._peripheral=t}},{key:"getPeripheral",value:function(){return this._peripheral}}])&&F(e.prototype,n),r&&F(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function V(t){return(V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Y(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,W(r.key),r)}}function W(t){var e=function(t,e){if("object"!=V(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=V(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==V(e)?e:String(e)}function q(t,e,n){return e=X(e),function(t,e){if(e&&("object"===V(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,n||[],X(t).constructor):e.apply(t,n))}function X(t){return(X=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function $(t,e){return($=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var Q=r.DEVICE_TYPE.beacon,Z=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=q(this,e,[t])).setType(Q),n.mode=t.mode,n.distance=null,n}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&$(t,e)}(e,t),n=e,i=[{key:"setDistanceCalculator",value:function(t){e.distanceCalculator=t}},{key:"getDistanceCalculator",value:function(){return e.distanceCalculator}}],(r=[{key:"getDistance",value:function(){if(null===this.distance){var t=this.rssi;this.distance=this.calculateDistance(this.txPower,t)}return this.distance}},{key:"calculateDistance",value:function(t,n){return e.distanceCalculator?e.distanceCalculator.calculateDistance(t,n):-1}},{key:"setRssiMeasurementCount",value:function(t){this.rssiMeasurementCount=t}},{key:"getMeasurementCount",value:function(){return this.rssiMeasurementCount}},{key:"getPacketCount",value:function(){return this.packetCount}},{key:"setPacketCount",value:function(t){this.packetCount=t}},{key:"getMode",value:function(){return this.mode}},{key:"setMode",value:function(t){this.mode=t}},{key:"getTxPower",value:function(){return this.txPower}},{key:"setTxPower",value:function(t){this.txPower=t}}])&&Y(n.prototype,r),i&&Y(n,i),Object.defineProperty(n,"prototype",{writable:!1}),e}(G);Z.distanceCalculator=null;var z=Z;function K(t){return(K="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function J(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,tt(r.key),r)}}function tt(t){var e=function(t,e){if("object"!=K(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=K(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==K(e)?e:String(e)}function et(t,e,n){return e=nt(e),function(t,e){if(e&&("object"===K(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,n||[],nt(t).constructor):e.apply(t,n))}function nt(t){return(nt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function rt(t,e){return(rt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var it=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=et(this,e,[t])).dataLength=t.dataLength,n.sensors=t.sensors,n.vbatt=t.vbatt,n.major=t.major,n.minor=t.minor,n.txPower=t.txPower,n.intervalOfSensing=t.intervalOfSensing,n.intervalOfAdvertising=t.intervalOfAdvertising,n}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&rt(t,e)}(e,t),n=e,(r=[{key:"getDataLength",value:function(){return this.dataLength}},{key:"setDataLength",value:function(t){this.dataLength=t}},{key:"getSensors",value:function(){return this.sensors}},{key:"setSensors",value:function(t){this.sensors=t}},{key:"getVbatt",value:function(){return this.vbatt}},{key:"setVbatt",value:function(t){this.vbatt=t}},{key:"getMajor",value:function(){return this.major}},{key:"setMajor",value:function(t){this.major=t}},{key:"getMinor",value:function(){return this.minor}},{key:"setMinor",value:function(t){this.minor=t}},{key:"getIntervalOfSensing",value:function(){return this.intervalOfSensing}},{key:"setIntervalOfSensing",value:function(t){this.intervalOfSensing=t}},{key:"getIntervalOfAdvertising",value:function(){return this.intervalOfAdvertising}},{key:"setIntervalOfAdvertising",value:function(t){this.intervalOfAdvertising=t}}])&&J(n.prototype,r),i&&J(n,i),Object.defineProperty(n,"prototype",{writable:!1}),e}(z);function ot(t){return(ot="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function at(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,st(r.key),r)}}function st(t){var e=function(t,e){if("object"!=ot(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=ot(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==ot(e)?e:String(e)}function ct(t,e,n){return e=ut(e),function(t,e){if(e&&("object"===ot(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,n||[],ut(t).constructor):e.apply(t,n))}function ut(t){return(ut=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function lt(t,e){return(lt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var ft=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=ct(this,e,[t])).companyId=t.companyId,n.dataLength=t.dataLength,n.uuid=t.uuid,n.major=t.major,n.minor=t.minor,n.txPower=t.txPower,n}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&lt(t,e)}(e,t),n=e,(r=[{key:"getCompanyId",value:function(){return this.companyId}},{key:"setCompanyId",value:function(t){this.companyId=t}},{key:"getDataLength",value:function(){return this.dataLength}},{key:"setDataLength",value:function(t){this.dataLength=t}},{key:"getUuid",value:function(){return this.uuid}},{key:"setUuid",value:function(t){this.uuid=t}},{key:"getMajor",value:function(){return this.major}},{key:"setMajor",value:function(t){this.major=t}},{key:"getMinor",value:function(){return this.minor}},{key:"setMinor",value:function(t){this.minor=t}}])&&at(n.prototype,r),i&&at(n,i),Object.defineProperty(n,"prototype",{writable:!1}),e}(z);function ht(t){return(ht="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function pt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,dt(r.key),r)}}function dt(t){var e=function(t,e){if("object"!=ht(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=ht(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==ht(e)?e:String(e)}function yt(t,e,n){return e=vt(e),function(t,e){if(e&&("object"===ht(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,n||[],vt(t).constructor):e.apply(t,n))}function vt(t){return(vt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function mt(t,e){return(mt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var gt=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=yt(this,e,[t])).serviceUUID=t.serviceUUID,n.serviceType=t.serviceType,n}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&mt(t,e)}(e,t),n=e,(r=[{key:"getServiceUUID",value:function(){return this.serviceUUID}},{key:"setServiceUUID",value:function(t){this.serviceUUID=t}},{key:"getServiceType",value:function(){return this.serviceType}},{key:"setServiceType",value:function(t){this.serviceType=t}}])&&pt(n.prototype,r),i&&pt(n,i),Object.defineProperty(n,"prototype",{writable:!1}),e}(z);function _t(t){return(_t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function bt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Et(r.key),r)}}function Et(t){var e=function(t,e){if("object"!=_t(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=_t(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==_t(e)?e:String(e)}function wt(t,e,n){return e=St(e),function(t,e){if(e&&("object"===_t(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,n||[],St(t).constructor):e.apply(t,n))}function St(t){return(St=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function It(t,e){return(It=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var Ct=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=wt(this,e,[t])).version=t.version,n.vbatt=t.vbatt,n.beaconTemp=t.beaconTemp,n.advertisingCount=t.advertisingCount,n.timeSinceBoot=t.timeSinceBoot,n}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&It(t,e)}(e,t),n=e,(r=[{key:"getVersion",value:function(){return this.version}},{key:"setVersion",value:function(t){this.version=t}},{key:"getVbatt",value:function(){return this.vbatt}},{key:"setVbatt",value:function(t){this.vbatt=t}},{key:"getBeaconTemp",value:function(){return this.beaconTemp}},{key:"setBeaconTemp",value:function(t){this.beaconTemp=t}},{key:"getAdvertisingCount",value:function(){return this.advertisingCount}},{key:"setAdvertisingCount",value:function(t){this.advertisingCount=t}},{key:"getTimeSinceBoot",value:function(){return this.timeSinceBoot}},{key:"setTimeSinceBoot",value:function(t){this.timeSinceBoot=t}}])&&bt(n.prototype,r),i&&bt(n,i),Object.defineProperty(n,"prototype",{writable:!1}),e}(gt);function Tt(t){return(Tt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function At(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,kt(r.key),r)}}function kt(t){var e=function(t,e){if("object"!=Tt(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Tt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Tt(e)?e:String(e)}function Pt(t,e,n){return e=Rt(e),function(t,e){if(e&&("object"===Tt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,n||[],Rt(t).constructor):e.apply(t,n))}function Rt(t){return(Rt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ot(t,e){return(Ot=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var Dt=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Pt(this,e,[t])).txPower=t.txPower,n.namespaceId=t.namespaceId,n.instanceId=t.instanceId,n}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ot(t,e)}(e,t),n=e,(r=[{key:"getNamespaceId",value:function(){return this.namespaceId}},{key:"setNamespaceId",value:function(t){this.namespaceId=t}},{key:"getInstanceId",value:function(){return this.instanceId}},{key:"setInstanceId",value:function(t){this.instanceId=t}}])&&At(n.prototype,r),i&&At(n,i),Object.defineProperty(n,"prototype",{writable:!1}),e}(gt);function xt(t){return(xt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ut(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Nt(r.key),r)}}function Nt(t){var e=function(t,e){if("object"!=xt(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=xt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==xt(e)?e:String(e)}function Bt(t,e,n){return e=Mt(e),function(t,e){if(e&&("object"===xt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,n||[],Mt(t).constructor):e.apply(t,n))}function Mt(t){return(Mt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Lt(t,e){return(Lt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var jt=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Bt(this,e,[t])).txPower=t.txPower,n.urlScmPrefix=t.urlScmPrefix,n.url=t.url,n}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Lt(t,e)}(e,t),n=e,(r=[{key:"getUrlScmPrefix",value:function(){return this.urlScmPrefix}},{key:"setUrlScmPrefix",value:function(t){this.urlScmPrefix=t}},{key:"getUrl",value:function(){return this.url}},{key:"setUrl",value:function(t){this.url=t}}])&&Ut(n.prototype,r),i&&Ut(n,i),Object.defineProperty(n,"prototype",{writable:!1}),e}(gt);function Ft(t){return(Ft="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ht(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Gt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Vt(r.key),r)}}function Vt(t){var e=function(t,e){if("object"!=Ft(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Ft(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Ft(e)?e:String(e)}function Yt(t,e,n){return e=Wt(e),function(t,e){if(e&&("object"===Ft(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,n||[],Wt(t).constructor):e.apply(t,n))}function Wt(t){return(Wt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function qt(t,e){return(qt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var Xt=r.DEVICE_INFORMATION_SERVICE_UUID.toUpperCase(),$t=r.EDDYSTONE_SERVICE_UUID.toUpperCase(),Qt=r.BUILDTHING_SERVICE_UUID.toUpperCase(),Zt=r.MANUFACTURER_DATA,zt=r.BUILDTHING_DEVICE_INFO,Kt=r.IBEACON_UUID,Jt=r.BEACON_MODE,te=r.SENSOR_TYPE,ee=r.BUILDTHING_BEACON_SENSOR,ne=r.BUILDTHING_BEACON_MODULE_NUMBER,re=r.UNIT,ie=r.BUILDTHING_BEACON_DATA_LEN,oe=r.EDDYSTONE_SERVICE_TYPE,ae=function(t){function e(){return Ht(this,e),Yt(this,e,arguments)}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&qt(t,e)}(e,t),n=e,(r=[{key:"getDeviceFromPeripheral",value:function(t){var e,n=this._parseAdvDataFromPeripheral(t);if(null!=n){switch(n.mode){case Jt.BuildThing:e=new it(n);break;case Jt.iBeacon:e=new ft(n);break;case Jt.EddyStoneTLM:e=new Ct(n);break;case Jt.EddyStoneUID:e=new Dt(n);break;case Jt.EddyStoneURL:e=new jt(n)}e.setPeripheral(t)}else e=null;return e}},{key:"_parseAdvDataFromPeripheral",value:function(t){var e,n=this._getBeaconMode(t),r=null;if(null!==n)switch(r={id:t.id,mode:n,rssi:t.rssi,name:this._getName(t),address:this._getMacAddress(t),firmwareVersion:this._getBuildThingBeaconFirmwareVersion(t)},e=this._getAdvertisingDataHexString(t,n),n){case Jt.BuildThing:this._parseBuildThingAdvDataHex(r,e);break;case Jt.iBeacon:this._parseIBeaconAdvDataHex(r,e);break;case Jt.EddyStoneUID:this._parseEddyStoneUidAdvDataHex(r,e);break;case Jt.EddyStoneURL:this._parseEddyStoneUrlAdvDataHex(r,e);break;case Jt.EddyStoneTLM:this._parseEddyStoneTlmAdvDataHex(r,e)}return r}},{key:"_parseBuildThingAdvDataHex",value:function(t,e){var n,r,i,o={sensorType:[{first:0,last:2},{first:10,last:12},{first:20,last:22}],data:[{first:2,last:10},{first:12,last:20},{first:22,last:30}]};for(t.dataLength=ie,t.sensors=[],i=0;i<3;i++){var a=o.sensorType[i],s=o.data[i];n=this._getSensorType(e.slice(a.first,a.last)),t.sensors[i]={type:n,data:this._getSensorData(e.slice(s.first,s.last),n)},null!==(r=this._getModuleIdentificationNumber(e.slice(a.first,a.last)))&&(t.sensors[i].data.moduleNumber=r)}t.sensors=t.sensors.filter((function(t){return null!=t.type&&null!=t.data})),t.vbatt={voltage:{value:this._hexToDec(e.slice(30,34)),unit:re.milliVolt},percentage:{value:this._getVbattPercentage(this._hexToDec(e.slice(30,34))),unit:re.percent}},t.major=this._hexToDec(e.slice(34,38)),t.minor=this._hexToDec(e.slice(38,42)),t.txPower={value:this._getTxPower(e.slice(42,44)),unit:re.dBm},t.intervalOfSensing={value:this._hexToDec(e.slice(44,46)),unit:re.second},t.intervalOfAdvertising={value:this._hexToDec(e.slice(46,48)),unit:re.hundredMilliSecond}}},{key:"_parseIBeaconAdvDataHex",value:function(t,e){t.companyId=this._reverseHexBy2Byte(e.slice(0,4)),t.dataLength=this._hexToDec(e.slice(6,8)),t.uuid=e.slice(8,40),t.major=this._hexToDec(e.slice(40,44)),t.minor=this._hexToDec(e.slice(44,48)),t.txPower={value:this._getTxPower(e.slice(48,50)),unit:re.dBm}}},{key:"_parseEddyStoneUidAdvDataHex",value:function(t,e){this._setDefaultEddyStoneData(t,oe.uid),t.txPower={value:this._getTxPower(e.slice(2,4)),unit:re.dBm},t.namespaceId=l.hexToString(e.slice(4,24)).replace(/\0/g,"").replace(/[^\x20-\x7E]/g,""),t.instanceId=l.hexToString(e.slice(24,36)).replace(/\0/g,"").replace(/[^\x20-\x7E]/g,"")}},{key:"_parseEddyStoneUrlAdvDataHex",value:function(t,e){this._setDefaultEddyStoneData(t,oe.url),t.txPower={value:this._getTxPower(e.slice(2,4)),unit:re.dBm},t.urlScmPrefix=this._getUrlScmPrefix(e.slice(4,6)),t.url=this._getUrl(e.slice(6,38))}},{key:"_parseEddyStoneTlmAdvDataHex",value:function(t,e){this._setDefaultEddyStoneData(t,oe.tlm),t.version=this._hexToDec(e.slice(2,4)),t.vbatt={voltage:{value:this._hexToDec(e.slice(4,8)),unit:re.milliVolt},percentage:{value:this._getVbattPercentage(this._hexToDec(e.slice(4,8))),unit:re.percent}},t.beaconTemp={value:this._hexToDec(e.slice(8,12))/100,unit:re.celsius},t.advertisingCount=this._hexToDec(e.slice(12,20)),t.timeSinceBoot={value:.1*this._hexToDec(e.slice(20,28)),unit:re.second}}},{key:"_setDefaultEddyStoneData",value:function(t,e){t.serviceUUID=$t,t.serviceType=e}},{key:"_hasBuildThingDeviceInfo",value:function(t){var e=!1;if(void 0!==t[Xt]){var n=l.arrayBufferToHex(t[Xt]);e=n===zt.firmware_ver_1_0||n.slice(0,4)===zt.prefix}return e}},{key:"_getBeaconMode",value:function(t){var e,n=null;if(e=this._getValidServiceArrayBufferMap(t),this._hasBuildThingDeviceInfo(e))if(void 0!==e[Qt])n=Jt.BuildThing;else if(void 0!==e[$t])switch(l.arrayBufferToHex(e[$t]).slice(0,2)){case"00":n=Jt.EddyStoneUID;break;case"10":n=Jt.EddyStoneURL;break;case"20":n=Jt.EddyStoneTLM}else void 0!==e[Zt]&&l.arrayBufferToHex(e[Zt]).slice(8,40)===Kt&&(n=Jt.iBeacon);return n}},{key:"_getBuildThingBeaconFirmwareVersion",value:function(t){var e=null,n=this._getValidServiceArrayBufferMap(t);if(void 0!==n[Xt]){var r=l.arrayBufferToHex(n[Xt]);e=r===zt.firmware_ver_1_0?1:r.slice(4,6)/10}return e}},{key:"_getTemp",value:function(t){var e=this._hexToDec(t);return e>8500?(e-65536)/100:e/100}},{key:"_getAcc",value:function(t){var e=this._hexToDec(t);return e>128?e-256:e}},{key:"_getTxPower",value:function(t){var e=this._hexToDec(t);return e>4?e-256:e}},{key:"_getSensorType",value:function(t){return void 0!==ee[t]?ee[t]:null}},{key:"_getModuleIdentificationNumber",value:function(t){return void 0!==ne[t]?ne[t].moduleNumber:null}},{key:"_getSensorData",value:function(t,e){var n={};switch(e){case te.Temp_Humi:n={temperature:{value:this._getTemp(t.slice(0,4)),unit:re.celsius},humidity:{value:this._hexToDec(t.slice(4,8))/100,unit:re.percent}};break;case te.Light:n={value:this._hexToDec(t.slice(6,8)),unit:re.lux};break;case te.Accelerometer:n={x:{value:this._getAcc(t.slice(0,2))*(360/255),unit:re.degree},y:{value:this._getAcc(t.slice(2,4))*(360/255),unit:re.degree},z:{value:this._getAcc(t.slice(4,6))*(360/255),unit:re.degree},motion:t.slice(6,8).charAt(1)};break;case te.TVOC:n={value:this._hexToDec(t.slice(0,8)),unit:re.ppb};break;case te.NH3:case te.NO2:n={value:this._hexToDec(t.slice(0,8))/100,unit:re.ppm};break;case te.IO:n={input:l.convertIntegerToBitArray(this._hexToDec(t.slice(4,6)),8),output:l.convertIntegerToBitArray(this._hexToDec(t.slice(6,8)),8)};break;case te.ADC:var r=0;for(n={value:[]},r=0;r<4;r++)n.value.push(this._hexToDec(t.slice(2*r,2*(r+1))));break;case te.FineDust:var i=l.convertIntegerToBitArray(this._hexToDec(t.slice(0,8)),32).reverse();n={"PM_10.0":{value:l.convertBitArrayToInteger(i.slice(2,12).reverse()),unit:re.microgramsPerCubicMeter},"PM_2.5":{value:l.convertBitArrayToInteger(i.slice(12,22).reverse()),unit:re.microgramsPerCubicMeter},"PM_1.0":{value:l.convertBitArrayToInteger(i.slice(22,32).reverse()),unit:re.microgramsPerCubicMeter}};break;default:n=null}return n}},{key:"_getUrlScmPrefix",value:function(t){var e="";switch(t){case"00":e="http://www.";break;case"01":e="https://www.";break;case"02":e="http://";break;case"03":e="https://"}return e}},{key:"_getUrl",value:function(t){return decodeURIComponent(t.replace(/\s+/g,"").replace(/[0-9a-f]{2}/g,"%$&"))}},{key:"_reverseHexBy2Byte",value:function(t){var e,n="";for(e=t.length-2;e>=0;e-=2)n+=t[e]+t[e+1];return n}},{key:"_getAdvertisingDataHexString",value:function(t,e){var n,r;switch(r=this._getValidServiceArrayBufferMap(t),e){case Jt.BuildThing:n=r.BCBC;break;case Jt.iBeacon:n=r.manufacturerData;break;case Jt.EddyStoneUID:case Jt.EddyStoneURL:case Jt.EddyStoneTLM:n=r.FEAA}return l.arrayBufferToHex(n)}}])&&Gt(n.prototype,r),i&&Gt(n,i),Object.defineProperty(n,"prototype",{writable:!1}),e}(L);function se(t){return(se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ce(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,ue(r.key),r)}}function ue(t){var e=function(t,e){if("object"!=se(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=se(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==se(e)?e:String(e)}function le(t,e,n){return e=fe(e),function(t,e){if(e&&("object"===se(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,n||[],fe(t).constructor):e.apply(t,n))}function fe(t){return(fe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function he(t,e){return(he=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var pe=r.DEVICE_TYPE.gateway,de=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=le(this,e,[t])).setType(pe),n.scanTime=t.scanTime,n.scanType=t.scanType,n.vbatt=t.vbatt,n.errorCode=t.errorCode,n.networkPeriod=t.networkPeriod,n.protocol=t.protocol,n.communicationType=t.communicationType,n.buildThingCloudUsageFlag=t.buildThingCloudUsageFlag,n.serverIp=t.serverIp,n.serverPort=t.serverPort,n.certificationType=t.certificationType,n.wifiSsid=t.wifiSsid,n.mqttBrokerId=t.mqttBrokerId,n.telemetryMqttBrokerTopic=t.telemetryMqttBrokerTopic,n.attributesMqttBrokerTopic=t.attributesMqttBrokerTopic,n.mqttBrokerSubscribeTopic=t.mqttBrokerSubscribeTopic,n.telemetryHttpUrl=t.telemetryHttpUrl,n.attributesHttpUrl=t.attributesHttpUrl,n.httpGetUrl=t.httpGetUrl,n.currentWifiSsid=t.currentWifiSsid,n.serverId=t.serverId,n.serialNumber=t.serialNumber,n}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&he(t,e)}(e,t),n=e,(r=[{key:"getScanTime",value:function(){return this.scanTime}},{key:"setScanTime",value:function(t){this.scanTime=t}},{key:"getScanType",value:function(){return this.rssi}},{key:"setScanType",value:function(t){this.scanType=t}},{key:"getVbatt",value:function(){return this.vbatt}},{key:"setVbatt",value:function(t){this.vbatt=t}},{key:"getErrorCode",value:function(){return this.errorCode}},{key:"setErrorCode",value:function(t){this.errorCode=t}},{key:"getNetworkPeriod",value:function(){return this.networkPeriod}},{key:"setNetworkPeriod",value:function(t){this.networkPeriod=t}},{key:"getProtocol",value:function(){return this.protocol}},{key:"setProtocol",value:function(t){this.protocol=t}},{key:"getCommunicationType",value:function(){return this.communicationType}},{key:"setCommunicationType",value:function(t){this.communicationType=t}},{key:"getBuildThingCloudUsageFlag",value:function(){return this.buildThingCloudUsageFlag}},{key:"setBuildThingCloudUsageFlag",value:function(t){this.buildThingCloudUsageFlag=t}},{key:"getServerIp",value:function(){return this.serverIp}},{key:"setServerIp",value:function(t){this.serverIp=t}},{key:"getServerPort",value:function(){return this.serverPort}},{key:"setServerPort",value:function(t){this.serverPort=t}},{key:"getCertificationType",value:function(){return this.certificationType}},{key:"setCertificationType",value:function(t){this.certificationType=t}},{key:"getWifiSsid",value:function(){return this.wifiSsid}},{key:"setWifiSsid",value:function(t){this.wifiSsid=t}},{key:"getMqttBrokerId",value:function(){return this.mqttBrokerId}},{key:"setMqttBrokerId",value:function(t){this.mqttBrokerId=t}},{key:"getTelemetryMqttBrokerTopic",value:function(){return this.telemetryMqttBrokerTopic}},{key:"setTelemetryMqttBrokerTopic",value:function(t){this.telemetryMqttBrokerTopic=t}},{key:"getAttributesMqttBrokerTopic",value:function(){return this.attributesMqttBrokerTopic}},{key:"setAttributesMqttBrokerTopic",value:function(t){this.attributesMqttBrokerTopic=t}},{key:"getMqttBrokerSubscribeTopic",value:function(){return this.mqttBrokerSubscribeTopic}},{key:"setMqttBrokerSubscribeTopic",value:function(t){this.mqttBrokerSubscribeTopic=t}},{key:"getTelemetryHttpUrl",value:function(){return this.telemetryHttpUrl}},{key:"setTelemetryHttpUrl",value:function(t){this.telemetryHttpUrl=t}},{key:"getAttributesHttpUrl",value:function(){return this.attributesHttpUrl}},{key:"setAttributesHttpUrl",value:function(t){this.attributesHttpUrl=t}},{key:"getHttpGetUrl",value:function(){return this.httpGetUrl}},{key:"setHttpGetUrl",value:function(t){this.httpGetUrl=t}},{key:"getCurrentWifiSsid",value:function(){return this.currentWifiSsid}},{key:"setCurrentWifiSsid",value:function(t){this.currentWifiSsid=t}},{key:"getServerId",value:function(){return this.serverId}},{key:"setServerId",value:function(t){this.serverId=t}},{key:"getSerialNumber",value:function(){return this.serialNumber}},{key:"setSerialNumber",value:function(t){this.serialNumber=t}}])&&ce(n.prototype,r),i&&ce(n,i),Object.defineProperty(n,"prototype",{writable:!1}),e}(G);function ye(t){return(ye="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ve(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function me(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,ge(r.key),r)}}function ge(t){var e=function(t,e){if("object"!=ye(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=ye(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==ye(e)?e:String(e)}function _e(t,e,n){return e=be(e),function(t,e){if(e&&("object"===ye(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,n||[],be(t).constructor):e.apply(t,n))}function be(t){return(be=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ee(t,e){return(Ee=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var we=r.DEVICE_INFORMATION_SERVICE_UUID.toUpperCase(),Se=r.BUILDTHING_DEVICE_INFO,Ie=r.UNIT,Ce=r.BUILDTHING_GATEWAY.COMMUNICATION_TYPE,Te=r.BUILDTHING_GATEWAY.SCAN_TYPE,Ae=r.BUILDTHING_GATEWAY.PROTOCOL,ke=function(t){function e(){return ve(this,e),_e(this,e,arguments)}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ee(t,e)}(e,t),n=e,(r=[{key:"getDeviceFromPeripheral",value:function(t){var e,n=this._parseAdvDataFromPeripheral(t);return null!=n?(e=new de(n)).setPeripheral(t):e=null,e}},{key:"_parseAdvDataFromPeripheral",value:function(t){var e,n=null;return this.isBuildThingGateway(t)&&(n={id:t.id,rssi:t.rssi,name:this._getName(t),address:this._getMacAddress(t),firmwareVersion:this._getBuildThingGatewayFirmwareVersion(t),communicationType:this._getCommunicationType(t),serialNumber:this._getSerialNumber(this._getMacAddress(t))},e=this._getAdvertisingDataHexString(t),this._parseBuildThingGatewayAdvDataHex(n,e)),n}},{key:"_parseBuildThingGatewayAdvDataHex",value:function(t,e){t.vbatt=this._getVbatt(e),t.errorCode=this._getErrorCode(e),t.scanTime=this._getScanTime(e),t.networkPeriod=this._getNetworkPeriod(e),t.scanType=this._getScanType(e),t.protocol=this._getProtocol(e),t.buildThingCloudUsageFlag=this._getBuildThingCloudUsageFlag(e)}},{key:"_getSerialNumber",value:function(t){var e=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","#","$"];t=t.toLowerCase().replace(/:/gi,"");var n=256*parseInt(t[0],16)+16*parseInt(t[1],16)+parseInt(t[2],16),r=256*parseInt(t[3],16)+16*parseInt(t[4],16)+parseInt(t[5],16),i=256*parseInt(t[6],16)+16*parseInt(t[7],16)+parseInt(t[8],16),o=256*parseInt(t[9],16)+16*parseInt(t[10],16)+parseInt(t[11],16),a=new Array(8);a[0]=Math.floor(n/64),a[1]=n-64*a[0],a[2]=Math.floor(r/64),a[3]=r-64*a[2],a[4]=Math.floor(i/64),a[5]=i-64*a[4],a[6]=Math.floor(o/64),a[7]=o-64*a[6];var s="";return a.forEach((function(t){s+=e[t]})),s}},{key:"_getVbatt",value:function(t){var e=t.slice(0,4);return"ffff"===e.toLowerCase()?null:{voltage:{value:this._hexToDec(e),unit:Ie.milliVolt},percentage:{value:this._getVbattPercentage(this._hexToDec(e)),unit:Ie.percent}}}},{key:"_getErrorCode",value:function(t){return this._hexToDec(t.slice(4,6))}},{key:"_getScanTime",value:function(t){return{value:this._hexToDec(t.slice(6,8)),unit:Ie.second}}},{key:"_getNetworkPeriod",value:function(t){return{value:this._hexToDec(t.slice(8,12)),unit:Ie.minute}}},{key:"_getScanType",value:function(t){return Te[this._hexToDec(t.slice(12,14))]}},{key:"_getProtocol",value:function(t){return Ae[this._hexToDec(t.slice(14,16))]}},{key:"_getBuildThingCloudUsageFlag",value:function(t){return 1===this._hexToDec(t.slice(16,18))}},{key:"_getCommunicationType",value:function(t){var e=null,n=this._getValidServiceArrayBufferMap(t);if(void 0!==n[we]){var r=l.arrayBufferToHex(n[we]);e=Ce[r.slice(0,4)]}return e}},{key:"isBuildThingGateway",value:function(t){var e;return e=this._getValidServiceArrayBufferMap(t),this._hasBuildThingDeviceInfo(e)}},{key:"_getAdvertisingDataHexString",value:function(t){var e=this._getValidServiceArrayBufferMap(t);return l.arrayBufferToHex(e.BCBC)}},{key:"_hasBuildThingDeviceInfo",value:function(t){var e=!1;return void 0!==t[we]&&(e=l.arrayBufferToHex(t[we]).slice(0,3)===Se.gateway.prefix),e}},{key:"_getBuildThingGatewayFirmwareVersion",value:function(t){var e=null,n=this._getValidServiceArrayBufferMap(t);return void 0!==n[we]&&(e=l.arrayBufferToHex(n[we]).slice(4,6)/10),e}}])&&me(n.prototype,r),i&&me(n,i),Object.defineProperty(n,"prototype",{writable:!1}),e}(L);function Pe(t){return(Pe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Re(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Oe(r.key),r)}}function Oe(t){var e=function(t,e){if("object"!=Pe(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Pe(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Pe(e)?e:String(e)}function De(t,e,n){return e=xe(e),function(t,e){if(e&&("object"===Pe(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,n||[],xe(t).constructor):e.apply(t,n))}function xe(t){return(xe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ue(t,e){return(Ue=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var Ne=r.DEVICE_TYPE.iaq,Be=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=De(this,e,[t])).setType(Ne),n.fineDust=t.fineDust,n.ultraFineDust=t.ultraFineDust,n.extreamUltraFineDust=t.extreamUltraFineDust,n.co2=t.co2,n.tvoc=t.tvoc,n.temperature=t.temperature,n.humidity=t.humidity,n.score=t.score,n.status=t.status,n.txPower={value:8,unit:r.UNIT.dBm},n.distance=null,n}var n,i,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ue(t,e)}(e,t),n=e,o=[{key:"setDistanceCalculator",value:function(t){e.distanceCalculator=t}},{key:"getDistanceCalculator",value:function(){return e.distanceCalculator}}],(i=[{key:"getFineDust",value:function(){return this.fineDust}},{key:"setFineDust",value:function(t){this.fineDust=t}},{key:"getUltraFineDust",value:function(){return this.ultraFineDust}},{key:"setUltraFineDust",value:function(t){this.ultraFineDust=t}},{key:"getExtreamUltraFineDust",value:function(){return this.extreamUltraFineDust}},{key:"setExtreamUltraFineDust",value:function(t){this.extreamUltraFineDust=t}},{key:"getCO2",value:function(){return this.co2}},{key:"setCO2",value:function(t){this.co2=t}},{key:"getTVOC",value:function(){return this.tvoc}},{key:"setTVOC",value:function(t){this.tvoc=t}},{key:"getTemperature",value:function(){return this.temperature}},{key:"setTemperature",value:function(t){this.temperature=t}},{key:"getHumidity",value:function(){return this.humidity}},{key:"setHumidity",value:function(t){this.humidity=t}},{key:"getScore",value:function(){return this.score}},{key:"setScore",value:function(t){this.score=t}},{key:"getTxPower",value:function(){return this.txPower}},{key:"setTxPower",value:function(t){this.txPower=t}},{key:"setRssiMeasurementCount",value:function(t){this.rssiMeasurementCount=t}},{key:"getMeasurementCount",value:function(){return this.rssiMeasurementCount}},{key:"getPacketCount",value:function(){return this.packetCount}},{key:"setPacketCount",value:function(t){this.packetCount=t}},{key:"getDistance",value:function(){if(null===this.distance){var t=this.rssi;this.distance=this.calculateDistance(this.txPower,t)}return this.distance}},{key:"calculateDistance",value:function(t,n){return e.distanceCalculator?e.distanceCalculator.calculateDistance(t,n):-1}}])&&Re(n.prototype,i),o&&Re(n,o),Object.defineProperty(n,"prototype",{writable:!1}),e}(G);Be.distanceCalculator=null;var Me=Be;function Le(t){return(Le="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function je(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Fe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,He(r.key),r)}}function He(t){var e=function(t,e){if("object"!=Le(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Le(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Le(e)?e:String(e)}function Ge(t,e,n){return e=Ve(e),function(t,e){if(e&&("object"===Le(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,n||[],Ve(t).constructor):e.apply(t,n))}function Ve(t){return(Ve=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ye(t,e){return(Ye=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var We=r.DEVICE_INFORMATION_SERVICE_UUID.toUpperCase(),qe=r.BUILDTHING_DEVICE_INFO,Xe=r.UNIT,$e=r.SENSOR_TYPE,Qe=r.IAQ_STATUS,Ze=r.IAQ_STATUS_TABLE,ze=r.IAQ_STATUS_INDEX_TABLE,Ke=r.IAQ_STATUS_INDEX_TABLE_BASED_SCORE,Je=function(t){function e(){return je(this,e),Ge(this,e,arguments)}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ye(t,e)}(e,t),n=e,(r=[{key:"getDeviceFromPeripheral",value:function(t){var e,n=this._parseAdvDataFromPeripheral(t);return null!=n?(e=new Me(n)).setPeripheral(t):e=null,e}},{key:"_parseAdvDataFromPeripheral",value:function(t){var e,n=null;return this.isBuildThingIAQ(t)&&(n={id:t.id,rssi:t.rssi,name:this._getName(t),address:this._getMacAddress(t),firmwareVersion:this._getBuildThingIAQFirmwareVersion(t)},e=this._getAdvertisingDataHexString(t),this._parseBuildThingIAQAdvDataHex(n,e)),n}},{key:"_parseBuildThingIAQAdvDataHex",value:function(t,e){t.temperature=this._getTemperature(e),t.humidity=this._getHumidity(e),t.co2=this._getCO2(e),t.tvoc=this._getTVOC(e),t.fineDust=this._getFineDust(e),t.ultraFineDust=this._getUltraFineDust(e),t.extreamUltraFineDust=this._getExtreamUltraFineDust(e),t.score=this._getScore(e),t.status=this._getStatusFromScore(t.score)}},{key:"_getTemperature",value:function(t){var e={celsius:this._getCelsius(t.slice(0,4)),fahrenheit:this._getFahrenheit(t.slice(4,8))};return e.status=this._getStatusFromValue($e.Celsius,e.celsius.value),e.score=this._getScoreFromCAI($e.Celsius,e.status,e.celsius.value),e}},{key:"_getCelsius",value:function(t){var e=this._hexToDec(t);return{value:e>8500?(e-65536)/100:e/100,unit:Xe.celsius}}},{key:"_getFahrenheit",value:function(t){var e=this._hexToDec(t);return{value:e>18500?(e-65536)/100:e/100,unit:Xe.fahrenheit}}},{key:"_getHumidity",value:function(t){var e={value:this._hexToDec(t.slice(8,12))/100,unit:Xe.percent};return e.status=this._getStatusFromValue($e.Humidity,e.value),e.score=this._getScoreFromCAI($e.Humidity,e.status,e.value),e}},{key:"_getCO2",value:function(t){var e={value:this._hexToDec(t.slice(12,16)),unit:Xe.ppm};return e.status=this._getStatusFromValue($e.CO2,e.value),e.score=this._getScoreFromCAI($e.CO2,e.status,e.value),e}},{key:"_getTVOC",value:function(t){var e={value:this._hexToDec(t.slice(16,20)),unit:Xe.ppb};return e.status=this._getStatusFromValue($e.TVOC,e.value),e.score=this._getScoreFromCAI($e.TVOC,e.status,e.value),e}},{key:"_getFineDust",value:function(t){var e=l.convertIntegerToBitArray(this._hexToDec(t.slice(20,28)),32).reverse(),n={value:l.convertBitArrayToInteger(e.slice(22,32).reverse()),unit:Xe.microgramsPerCubicMeter};return n.status=this._getStatusFromValue($e.FineDust,n.value),n.score=this._getScoreFromCAI($e.FineDust,n.status,n.value),n}},{key:"_getUltraFineDust",value:function(t){var e=l.convertIntegerToBitArray(this._hexToDec(t.slice(20,28)),32).reverse(),n={value:l.convertBitArrayToInteger(e.slice(12,22).reverse()),unit:Xe.microgramsPerCubicMeter};return n.status=this._getStatusFromValue($e.UltraFineDust,n.value),n.score=this._getScoreFromCAI($e.UltraFineDust,n.status,n.value),n}},{key:"_getExtreamUltraFineDust",value:function(t){var e=l.convertIntegerToBitArray(this._hexToDec(t.slice(20,28)),32).reverse(),n={value:l.convertBitArrayToInteger(e.slice(2,12).reverse()),unit:Xe.microgramsPerCubicMeter};return n.status=this._getStatusFromValue($e.ExtreamUltraFineDust,n.value),n.score=this._getScoreFromCAI($e.ExtreamUltraFineDust,n.status,n.value),n}},{key:"_getScore",value:function(t){var e=this._hexToDec(t.slice(28,30));return e=e>100?100:e}},{key:"_getScoreFromCAI",value:function(t,e,n){var r=0,i=Object.keys(Ze);return null===t||-1===i.indexOf(t)||null===e?null:(e=e.toLowerCase(),t===$e.Celsius?t=Ze.CelsiusUpper.good.gte<n?"CelsiusUpper":"CelsiusLower":t===$e.Humidity&&(t=Ze.HumidityUpper.good.gte<n?"HumidityUpper":"HumidityLower"),(r=-1!==t.indexOf("Lower")?(ze[e].lte-ze[e].gte)/(Ze[t][e].gte-Ze[t][e].lte)*(n-Ze[t][e].lte)+ze[e].gte:(ze[e].lte-ze[e].gte)/(Ze[t][e].lte-Ze[t][e].gte)*(n-Ze[t][e].gte)+ze[e].gte)>=500?0:100-r/5)}},{key:"_getStatusFromScore",value:function(t){var e=null;return t=(t=Math.floor(t))>100?100:t,Object.keys(Ke).forEach((function(n){Ke[n].gte<=t&&t<=Ke[n].lte&&(e=Qe[n.toUpperCase()])})),e}},{key:"_getStatusFromValue",value:function(t,e){var n=null;return-1===Object.keys(Ze).indexOf(t)?null:(t===$e.Celsius?t=Ze.CelsiusUpper.good.gte<e?"CelsiusUpper":"CelsiusLower":t===$e.Humidity&&(t=Ze.HumidityUpper.good.gte<e?"HumidityUpper":"HumidityLower"),Object.keys(Ze[t]).forEach((function(r){("worst"===r&&-1!==t.indexOf($e.Celsius)&&(-1!==t.indexOf("Upper")&&Ze[t][r].lte<=e||-1!==t.indexOf("Lower")&&Ze[t][r].gte>=e)||"worst"===r&&Ze[t][r].gte<=e&&-1===t.indexOf($e.Celsius)&&-1===t.indexOf($e.Humidity)||Ze[t][r].gte<=e&&e<=Ze[t][r].lte)&&(n=Qe[r.toUpperCase()])})),n)}},{key:"isBuildThingIAQ",value:function(t){var e;return e=this._getValidServiceArrayBufferMap(t),this._hasBuildThingDeviceInfo(e)}},{key:"_getAdvertisingDataHexString",value:function(t){var e=this._getValidServiceArrayBufferMap(t);return l.arrayBufferToHex(e.BCBC)}},{key:"_hasBuildThingDeviceInfo",value:function(t){var e=!1;return void 0!==t[We]&&(e=l.arrayBufferToHex(t[We]).slice(0,4)===qe.iaq.prefix),e}},{key:"_getBuildThingIAQFirmwareVersion",value:function(t){var e=null,n=this._getValidServiceArrayBufferMap(t);return void 0!==n[We]&&(e=l.arrayBufferToHex(n[We]).slice(4,6)/10),e}}])&&Fe(n.prototype,r),i&&Fe(n,i),Object.defineProperty(n,"prototype",{writable:!1}),e}(L);function tn(t){return(tn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function en(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,nn(r.key),r)}}function nn(t){var e=function(t,e){if("object"!=tn(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=tn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==tn(e)?e:String(e)}function rn(t,e,n){return e=on(e),function(t,e){if(e&&("object"===tn(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,n||[],on(t).constructor):e.apply(t,n))}function on(t){return(on=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function an(t,e){return(an=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var sn=r.SCANNER_SCAN_TYPE,cn=r.DEVICE_INFORMATION_SERVICE_UUID.toUpperCase(),un=r.EDDYSTONE_SERVICE_UUID.toUpperCase(),ln=r.BUILDTHING_SERVICE_UUID.toUpperCase(),fn=[cn],hn=[cn,ln,un],pn=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=rn(this,e))._manager=t,n._ble=t._ble,n.scanType=sn.beacon,n.isScanning=!1,n._hasActiveCycle=!1,n._scanCycleIntervalId=null,n._scanCyleTimeoutId=null,n._scanTargetServiceUUID=fn,n.beaconParser=new ae,n.gatewayParser=new ke,n.buildThingIAQParser=new Je,n._discoveredDeviceIdsDuringOneScanCycle=[],n._discoveredDeviceStateMap=new Map,n.wrapCallback(),n._enableBackgroundModeUsingCordovaPlugin(),n}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&an(t,e)}(e,t),n=e,(r=[{key:"wrapCallback",value:function(){var t=this,e=t._ble;e.on("discover",(function(e){if(void 0===e.hasScanResponse||e.hasScanResponse)switch(t.scanType){case sn.all:t._onDiscoverDevice([t.beaconParser,t.gatewayParser,t.buildThingIAQParser],e);break;case sn.beacon:t._onDiscoverDevice([t.beaconParser],e);break;case sn.gateway:t._onDiscoverDevice([t.gatewayParser],e);break;case sn.iaq:t._onDiscoverDevice([t.buildThingIAQParser],e)}})),e.on("scanStop",(function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.emit("scanStop",[].concat(n))}))}},{key:"_onDiscoverDevice",value:function(t,e){var n=this;t.forEach((function(t){var r=t.getDeviceFromPeripheral(e);if(null!==r){var i=n._discoveredDeviceIdsDuringOneScanCycle.includes(r.id);if(i||n._discoveredDeviceIdsDuringOneScanCycle.push(r.id),n._updateDiscoveredDeviceStateMap(r),i)return!1;n.emit("discover",r)}}))}},{key:"_enableBackgroundModeUsingCordovaPlugin",value:function(){"cordova"===this._ble.platform.type&&(void 0!==cordova.plugins&&void 0!==cordova.plugins.backgroundMode?document.addEventListener("deviceready",(function(){cordova.plugins.backgroundMode.enable()})):console.error("this sdk required cordova-plugin-background-mode"))}},{key:"setScanPeriod",value:function(t,e){var n=this,r=null;n.proposedScanPeriod=t,n.proposedBetweenPeriod=e,n.isScanning?0===n.betweenPeriod?n.once("cycleEnd",(function(){n.proposedScanPeriod===n.scanPeriod&&n.proposedBetweenPeriod===n.betweenPeriod||(clearTimeout(n._scanCyleTimeoutId),n._scanCyleTimeoutId=null,clearInterval(n._scanCycleIntervalId),n._scanCycleIntervalId=null,n.isScanning=!1,n.emit("scanStop"),n.scanPeriod=n.proposedScanPeriod,n.betweenPeriod=n.proposedBetweenPeriod,n.startScan())})):n.betweenPeriod>0&&null===r&&(r=setInterval((function(){n._hasActiveCycle||n.proposedScanPeriod===n.scanPeriod&&n.proposedBetweenPeriod===n.betweenPeriod||(n.stopScan(),n.scanPeriod=n.proposedScanPeriod,n.betweenPeriod=n.proposedBetweenPeriod,n.startScan(),clearInterval(r),r=null)}),1)):(n.scanPeriod=n.proposedScanPeriod,n.betweenPeriod=n.proposedBetweenPeriod)}},{key:"setScanType",value:function(t){this.scanType=t}},{key:"startScan",value:function(){var t=this;null===t._scanCycleIntervalId?(t._scanCycleIntervalId=setInterval((function(){t._startScanCycle()}),t.scanPeriod+t.betweenPeriod),t.isScanning=!0,t.emit("scanStart"),t._startScanCycle()):console.warn("startScan failed: already started scan.")}},{key:"stopScan",value:function(){null!==this._scanCycleIntervalId?(clearInterval(this._scanCycleIntervalId),this._scanCycleIntervalId=null,this.isScanning=!1,null!==this._scanCyleTimeoutId&&this._stopScanCycle(),this.emit("scanStop")):console.warn("stopScan failed: already stop scan.")}},{key:"_startScanCycle",value:function(){var t=this,e=this._ble,n="electron"===e.platform.type||"node"===e.platform.type;t._setScanTargetServiceUUID(),null!==t._scanCyleTimeoutId&&t._stopScanCycle(),e.startScan(t._scanTargetServiceUUID,{allowDuplicates:n}),t._hasActiveCycle=!0,t.emit("cycleStart"),t._scanCyleTimeoutId=setTimeout((function(){t._hasActiveCycle&&t._stopScanCycle()}),t.scanPeriod)}},{key:"_setScanTargetServiceUUID",value:function(){"cordova"===this._ble.platform.type?"ios"===this._ble.platform.os&&!0===this._manager.isBackgroundMode?this._scanTargetServiceUUID=hn:this._scanTargetServiceUUID=fn:"electron"!==this._ble.platform.type&&"node"!==this._ble.platform.type||("win32"===this._ble.platform.os||"linux"===this._ble.platform.os?this._scanTargetServiceUUID=[]:"darwin"===this._ble.platform.os&&(this._scanTargetServiceUUID=hn))}},{key:"_stopScanCycle",value:function(){var t=this._ble;this._hasActiveCycle=!1,null!=this._scanCyleTimeoutId&&(clearTimeout(this._scanCyleTimeoutId),this._scanCyleTimeoutId=null),t.stopScan(),this.emit("cycleEnd"),this._discoveredDeviceIdsDuringOneScanCycle=[],this._updateUnDiscoveredDeviceStateMap()}},{key:"_updateDiscoveredDeviceStateMap",value:function(t){var e=this._discoveredDeviceStateMap,n=new Date;e.set(t.id,{device:t,lastSeenTime:n.getTime()})}},{key:"_updateUnDiscoveredDeviceStateMap",value:function(){var t=this,e=[],n=t._discoveredDeviceStateMap,r=(new Date).getTime();n.forEach((function(i,o){var a=i.device;i.lastSeenTime>0&&r-i.lastSeenTime>t._manager.getDeviceUnDiscoverPeriod(a)&&(n.delete(o),e.push(a))})),e.length>0&&t.emit("unDiscover",e)}}])&&en(n.prototype,r),i&&en(n,i),Object.defineProperty(n,"prototype",{writable:!1}),e}(C);function dn(t){return(dn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function yn(){yn=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(t,e,n){t[e]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,n){return t[e]=n}}function l(t,e,n,r){var o=e&&e.prototype instanceof v?e:v,a=Object.create(o.prototype),s=new P(r||[]);return i(a,"_invoke",{value:C(t,n,s)}),a}function f(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var h="suspendedStart",p="executing",d="completed",y={};function v(){}function m(){}function g(){}var _={};u(_,a,(function(){return this}));var b=Object.getPrototypeOf,E=b&&b(b(R([])));E&&E!==n&&r.call(E,a)&&(_=E);var w=g.prototype=v.prototype=Object.create(_);function S(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function I(t,e){function n(i,o,a,s){var c=f(t[i],t,o);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==dn(l)&&r.call(l,"__await")?e.resolve(l.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(l).then((function(t){u.value=t,a(u)}),(function(t){return n("throw",t,a,s)}))}s(c.arg)}var o;i(this,"_invoke",{value:function(t,r){function i(){return new e((function(e,i){n(t,r,e,i)}))}return o=o?o.then(i,i):i()}})}function C(e,n,r){var i=h;return function(o,a){if(i===p)throw new Error("Generator is already running");if(i===d){if("throw"===o)throw a;return{value:t,done:!0}}for(r.method=o,r.arg=a;;){var s=r.delegate;if(s){var c=T(s,r);if(c){if(c===y)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===h)throw i=d,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=p;var u=f(e,n,r);if("normal"===u.type){if(i=r.done?d:"suspendedYield",u.arg===y)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(i=d,r.method="throw",r.arg=u.arg)}}}function T(e,n){var r=n.method,i=e.iterator[r];if(i===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,T(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),y;var o=f(i,e.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,y;var a=o.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,y):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,y)}function A(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(A,this),this.reset(!0)}function R(e){if(e||""===e){var n=e[a];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,o=function n(){for(;++i<e.length;)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}throw new TypeError(dn(e)+" is not iterable")}return m.prototype=g,i(w,"constructor",{value:g,configurable:!0}),i(g,"constructor",{value:m,configurable:!0}),m.displayName=u(g,c,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,u(t,c,"GeneratorFunction")),t.prototype=Object.create(w),t},e.awrap=function(t){return{__await:t}},S(I.prototype),u(I.prototype,s,(function(){return this})),e.AsyncIterator=I,e.async=function(t,n,r,i,o){void 0===o&&(o=Promise);var a=new I(l(t,n,r,i),o);return e.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},S(w),u(w,c,"Generator"),u(w,a,(function(){return this})),u(w,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=R,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(k),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(r,i){return s.type="throw",s.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,y):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),k(n),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;k(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:R(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),y}},e}function vn(t,e,n,r,i,o,a){try{var s=t[o](a),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,i)}function mn(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){vn(o,r,i,a,s,"next",t)}function s(t){vn(o,r,i,a,s,"throw",t)}a(void 0)}))}}function gn(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return _n(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _n(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function _n(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function bn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,En(r.key),r)}}function En(t){var e=function(t,e){if("object"!=dn(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=dn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==dn(e)?e:String(e)}function wn(t,e,n){return e=Sn(e),function(t,e){if(e&&("object"===dn(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return In(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,n||[],Sn(t).constructor):e.apply(t,n))}function Sn(t){return(Sn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function In(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Cn(t,e){return(Cn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var Tn="6E400001-B5A3-F393-E0A9-E50E24DCCA9E",An={CONFIRM_PASSWORD:{INDEX:"0",BUF_SIZE:7,BYTE:1,NAME:"CONFIRM_PASSWORD"},CHANGE_PASSWORD:{INDEX:"1",BUF_SIZE:13,BYTE:1,ASCII:!0,NAME:"CHANGE_PASSWORD"},CHANGE_NAME_BC:{INDEX:"2",BUF_SIZE:15,BYTE:1,ASCII:!0,NAME:"CHANGE_NAME_BC"},CHANGE_MODE:{INDEX:"3",BUF_SIZE:8,BYTE:1,ASCII:!0,NAME:"CHANGE_MODE"},CHANGE_ADVERTISING_INTERVAL:{INDEX:"4",BUF_SIZE:8,HEX_INTEGER:!0,BYTE:1,NAME:"CHANGE_ADVERTISING_INTERVAL",MIN:1,MAX:102},CHANGE_SENSOR_INTERVAL:{INDEX:"5",BUF_SIZE:8,HEX_INTEGER:!0,BYTE:1,NAME:"CHANGE_SENSOR_INTERVAL",MIN:2,MAX:255},CHANGE_MAJOR:{INDEX:"6",BUF_SIZE:9,HEX_INTEGER:!0,BYTE:2,NAME:"CHANGE_MAJOR",MIN:0,MAX:65535},CHANGE_MINOR:{INDEX:"7",BUF_SIZE:9,HEX_INTEGER:!0,BYTE:2,NAME:"CHANGE_MINOR",MIN:0,MAX:65535},CHANGE_NAMESPACE_ID:{INDEX:"8",BUF_SIZE:17,BYTE:1,NAME:"CHANGE_NAMESPACE_ID"},CHANGE_INSTANCE_ID:{INDEX:"9",BUF_SIZE:13,BYTE:1,NAME:"CHANGE_INSTASNCE_ID"},CHANGE_SCHEME_PREFIX:{INDEX:"a",BUF_SIZE:8,BYTE:1,NAME:"CHANGE_SCHEME_PREFIX"},CHANGE_URL:{INDEX:"b",BUF_SIZE:24,BYTE:1,ASCII:!0,NAME:"CHANGE_URL"},CHANGE_TX_POWER:{INDEX:"c",BUF_SIZE:8,BYTE:1,ASCII:!0,NAME:"CHANGE_TX_POWER",MIN:1,MAX:7},CHANGE_IO_OUTPUT:{INDEX:"d",BUF_SIZE:9,HEX_INTEGER:!0,BYTE:1,NAME:"CHANGE_IO_OUTPUT"},REBOOT:{INDEX:"r",BUF_SIZE:12,BYTE:1,ASCII:!0,NAME:"REBOOT"},CHANGE_NAME_GW:{INDEX:"2",BUF_SIZE:17,BYTE:1,ASCII:!0,NAME:"CHANGE_NAME_GW"},CHANGE_SCAN_TYPE:{INDEX:"3",BUF_SIZE:8,BYTE:1,ASCII:!0,NAME:"CHANGE_SCAN_TYPE"},CHANGE_PROTOCOL_TYPE:{INDEX:"4",BUF_SIZE:8,BYTE:1,ASCII:!0,NAME:"CHANGE_PROTOCOL_TYPE"},CHANGE_SCAN_TIME:{INDEX:"5",BUF_SIZE:8,HEX_INTEGER:!0,BYTE:1,NAME:"CHANGE_SCAN_TIME",MIN:1,MAX:20},CHANGE_NETWORK_PERIOD:{INDEX:"6",BUF_SIZE:9,HEX_INTEGER:!0,BYTE:2,NAME:"CHANGE_NETWORK_PERIOD",MIN:0,MAX:21600},READ_SERVER_IP:{INDEX:"7",BUF_SIZE:7,BYTE:1,ASCII:!0,NAME:"READ_SERVER_IP",RES_ASCII:!0,RES_NUMBER:!0,RES_BYTE:1},CHANGE_SERVER_IP:{INDEX:"8",BUF_SIZE:11,BYTE:1,HEX_INTEGER:!0,NAME:"CHANGE_SERVER_IP"},READ_SERVER_PORT:{INDEX:"9",BUF_SIZE:7,BYTE:1,ASCII:!0,NAME:"READ_SERVER_PORT",RES_ASCII:!0,RES_NUMBER:!0,RES_BYTE:2},CHANGE_SERVER_PORT:{INDEX:"a",BUF_SIZE:9,BYTE:2,HEX_INTEGER:!0,NAME:"CHANGE_SERVER_PORT",MIN:0,MAX:65535},REQUEST_SERVER_CONNECT:{INDEX:"b",BUF_SIZE:7,BYTE:1,ASCII:!0,NAME:"REQUEST_SERVER_CONNECT",RES_ASCII:!0},READ_CERTIFICATION_TYPE:{INDEX:"c",BUF_SIZE:8,BYTE:1,ASCII:!0,NAME:"READ_CERTIFICATION_TYPE",RES_ASCII:!0,ADDITIONAL_COMMAND:"0"},CHANGE_CERTIFICATION_TYPE:{INDEX:"c",BUF_SIZE:9,BYTE:1,ASCII:!0,NAME:"CHANGE_CERTIFICATION_TYPE",RES_ASCII:!0,ADDITIONAL_COMMAND:"1"},CHANGE_TOKEN:{INDEX:"d",BUF_SIZE:128,BYTE:1,ASCII:!0,NAME:"CHANGE_TOKEN"},CHANGE_TLS_CERT:{INDEX:"e",BUF_SIZE:128,BYTE:1,ASCII:!0,NAME:"CHANGE_TLS_CERT"},READ_WIFI_SSID:{INDEX:"f",BUF_SIZE:8,BYTE:1,ASCII:!0,NAME:"READ_WIFI_SSID",RES_ASCII:!0,MULTIPLE_NOTIFY:!0},CHANGE_WIFI_SSID:{INDEX:"g",BUF_SIZE:39,BYTE:1,ASCII:!0,NAME:"CHANGE_WIFI_SSID"},CHANGE_WIFI_PASSWORD:{INDEX:"h",BUF_SIZE:71,BYTE:1,ASCII:!0,NAME:"CHANGE_WIFI_PASSWORD"},REQUEST_WIFI_CONNECT:{INDEX:"i",BUF_SIZE:8,BYTE:1,ASCII:!0,NAME:"REQUEST_WIFI_CONNECT",ERR_MSG:{1:"Connection timeout.",2:"Wrong password.",3:"Wrong ssid.",4:"Connection failed."}},READ_CURRENT_WIFI:{INDEX:"j",BUF_SIZE:8,BYTE:1,ASCII:!0,NAME:"READ_CURRENT_WIFI",ERR_MSG:{1:"Connection timeout.",2:"Wrong password.",3:"Wrong ssid.",4:"Connection failed."},POSSIBLE_EMPTY_RESULT:!0},READ_MQTT_BROKER_ID:{INDEX:"k",BUF_SIZE:8,BYTE:1,ASCII:!0,NAME:"READ_MQTT_BROKER_ID",RES_ASCII:!0,ADDITIONAL_COMMAND:"0",POSSIBLE_EMPTY_RESULT:!0},CHANGE_MQTT_BROKER_ID:{INDEX:"k",BUF_SIZE:128,BYTE:1,ASCII:!0,NAME:"CHANGE_MQTT_BROKER_ID",ADDITIONAL_COMMAND:"1"},CHANGE_MQTT_BROKER_PASSWORD:{INDEX:"l",BUF_SIZE:128,BYTE:1,ASCII:!0,NAME:"CHANGE_MQTT_BROKER_PASSWORD"},READ_MQTT_BROKER_TOPIC_TELEMETRY:{INDEX:"m",BUF_SIZE:8,BYTE:1,ASCII:!0,NAME:"READ_MQTT_BROKER_TOPIC_TELEMETRY",RES_ASCII:!0,ADDITIONAL_COMMAND:"0",POSSIBLE_EMPTY_RESULT:!0},CHANGE_MQTT_BROKER_TOPIC_TELEMETRY:{INDEX:"m",BUF_SIZE:128,BYTE:1,ASCII:!0,NAME:"CHANGE_MQTT_BROKER_TOPIC_TELEMETRY",RES_ASCII:!0,ADDITIONAL_COMMAND:"1"},READ_MQTT_BROKER_TOPIC_ATTRIBUTES:{INDEX:"n",BUF_SIZE:8,BYTE:1,ASCII:!0,NAME:"READ_MQTT_BROKER_TOPIC_ATTRIBUTES",RES_ASCII:!0,ADDITIONAL_COMMAND:"0",POSSIBLE_EMPTY_RESULT:!0},CHANGE_MQTT_BROKER_TOPIC_ATTRIBUTES:{INDEX:"n",BUF_SIZE:128,BYTE:1,ASCII:!0,NAME:"CHANGE_MQTT_BROKER_TOPIC_ATTRIBUTES",RES_ASCII:!0,ADDITIONAL_COMMAND:"1"},READ_HTTP_URL_TELEMETRY:{INDEX:"o",BUF_SIZE:8,BYTE:1,ASCII:!0,NAME:"READ_HTTP_URL_TELEMETRY",RES_ASCII:!0,ADDITIONAL_COMMAND:"0",POSSIBLE_EMPTY_RESULT:!0},CHANGE_HTTP_URL_TELEMETRY:{INDEX:"o",BUF_SIZE:128,BYTE:1,ASCII:!0,NAME:"CHANGE_HTTP_URL_TELEMETRY",RES_ASCII:!0,ADDITIONAL_COMMAND:"1"},READ_HTTP_URL_ATTRIBUTES:{INDEX:"p",BUF_SIZE:8,BYTE:1,ASCII:!0,NAME:"READ_HTTP_URL_ATTRIBUTES",RES_ASCII:!0,ADDITIONAL_COMMAND:"0",POSSIBLE_EMPTY_RESULT:!0},CHANGE_HTTP_URL_ATTRIBUTES:{INDEX:"p",BUF_SIZE:128,BYTE:1,ASCII:!0,NAME:"CHANGE_HTTP_URL_ATTRIBUTES",RES_ASCII:!0,ADDITIONAL_COMMAND:"1"},READ_MQTT_BROKER_SUB_TOPIC:{INDEX:"q",BUF_SIZE:8,BYTE:1,ASCII:!0,NAME:"READ_MQTT_BROKER_SUB_TOPIC",RES_ASCII:!0,ADDITIONAL_COMMAND:"0",POSSIBLE_EMPTY_RESULT:!0},CHANGE_MQTT_BROKER_SUB_TOPIC:{INDEX:"q",BUF_SIZE:128,BYTE:1,ASCII:!0,NAME:"CHANGE_MQTT_BROKER_SUB_TOPIC",RES_ASCII:!0,ADDITIONAL_COMMAND:"1"},READ_HTTP_GET_URL:{INDEX:"r",BUF_SIZE:8,BYTE:1,ASCII:!0,NAME:"READ_HTTP_GET_URL",RES_ASCII:!0,ADDITIONAL_COMMAND:"0",POSSIBLE_EMPTY_RESULT:!0},CHANGE_HTTP_GET_URL:{INDEX:"r",BUF_SIZE:128,BYTE:1,ASCII:!0,NAME:"CHANGE_HTTP_GET_URL",RES_ASCII:!0,ADDITIONAL_COMMAND:"1"},CHANGE_BUILDTHING_CLOUD_MODE:{INDEX:"s",BUF_SIZE:8,BYTE:1,ASCII:!0,NAME:"CHANGE_BUILDTHING_CLOUD_MODE"},READ_SERVER_ID:{INDEX:"o",BUF_SIZE:7,BYTE:1,ASCII:!0,NAME:"READ_SERVER_ID",RES_ASCII:!0},CHANGE_SERVER_ID:{INDEX:"p",BUF_SIZE:39,BYTE:1,ASCII:!0,NAME:"CHANGE_SERVER_ID"},CHANGE_SERVER_PASSWORD:{INDEX:"q",BUF_SIZE:39,BYTE:1,ASCII:!0,NAME:"CHANGE_SERVER_PASSWORD"},CHANGE_NAME_IAQ:{INDEX:"2",BUF_SIZE:23,BYTE:1,ASCII:!0,NAME:"CHANGE_NAME_IAQ"},CHANGE_USE_LONG_RANGE:{INDEX:"3",BUF_SIZE:8,BYTE:1,ASCII:!0,NAME:"CHANGE_USE_LONG_RANGE"},CHANGE_TEMPERATURE_UNIT:{INDEX:"",BUF_SIZE:8,BYTE:1,ASCII:!0,NAME:"CHANGE_TEMPERATURE_UNIT"}},kn={START:0,END:2},Pn={START:2,END:6},Rn=function(t){function e(t,n){var r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),r=wn(this,e),t||console.error("Connection class needs Device Class Instance.");var i=l.getPlatform();return r._os=i.os,r._type=i.type,r.device=t,r._password=n,r._password=r._password?r._password:"000000",r.isConnected=!1,r.isTimeout=!1,r._connectionTimeout=null,r._readCallback=r._nobleReadCallback.bind(In(r),r.device.id),r._writeCallback=r._nobleWriteCallback.bind(In(r),r.device.id),r._notifyCallback=r._nobleNotifyCallback.bind(In(r),r.device.id),r.wrapConnectionCallback(),r.devType=t.getType(),r}var n,i,o,a;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Cn(t,e)}(e,t),n=e,i=[{key:"_setConnected",value:function(t){var e=this._type;if(this.isConnected=t,!this.isConnected){if("cordova"!==e&&this.characteristics){var n,r=gn(this.characteristics);try{for(r.s();!(n=r.n()).done;)n.value.removeListener("read",this._readCallback)}catch(t){r.e(t)}finally{r.f()}}this.characteristics=[],this.wrapConnectionCallback()}}},{key:"isConnectedBeacon",value:function(){return this.isConnected}},{key:"wrapConnectionCallback",value:function(){var t=this,n=t._type,i=t.device;t._callbacks&&delete t._callbacks,t._callbacks={fail:function(e,n){t.emit("fail",e,n)}},"cordova"===n&&(t._callbacks.connect=function(){var n=mn(yn().mark((function n(o){var a,s,c,u;return yn().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:clearTimeout(t._connectionTimeout),t._connectionTimeout=null,t.isTimeout=!1,t._setConnected(!0),t.characteristics=o.characteristics,a=gn(t.characteristics);try{for(a.s();!(s=a.n()).done;)s.value.peripheral=i.id}catch(t){a.e(t)}finally{a.f()}if(t.wrapRWCallback(),c=t._rwCallbacks.notify.bind(t,i.id),u=t._callbacks.fail.bind(t,"notify"),e._ble.startNotification(i.id,Tn,"6E400003-B5A3-F393-E0A9-E50E24DCCA9E",c,u),t.devType!==r.DEVICE_TYPE.gateway){n.next=14;break}return n.next=14,t._getGatewayAdditionalInfomation();case 14:t.emit("connect",i,t.characteristics);case 15:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}(),t._callbacks.disconnect=function(e){var n=t.isTimeout;clearTimeout(t._connectionTimeout),t._connectionTimeout=null,t._setConnected(!1);var r="";null!==e&&"object"===dn(e)&&(r=e.errorMessage),t.emit("disconnect",i,n,r)})}},{key:"_nobleConnectCallback",value:function(t,e){var n=this,i=n.device;if(i.id===t)if(e)n.emit("fail","connect",e);else{n._setConnected(!0);var o,a=i.getPeripheral();a.once("servicesDiscover",(function(t){(o=t[0]).once("characteristicsDiscover",(function(t){n.characteristics=t,n.wrapRWCallback(),n._getNotifyCharacteristic().subscribe(function(){var t=mn(yn().mark((function t(e){return yn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(clearTimeout(n._connectionTimeout),n._connectionTimeout=null,n.isTimeout=!1,n.devType!==r.DEVICE_TYPE.gateway){t.next=6;break}return t.next=6,n._getGatewayAdditionalInfomation();case 6:e?n.emit("fail","connect",e):n.emit("connect",i,n.characteristics);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())})),o.discoverCharacteristics(["6e400002b5a3f393e0a9e50e24dcca9e","6e400003b5a3f393e0a9e50e24dcca9e"])})),a.discoverServices(["6e400001b5a3f393e0a9e50e24dcca9e"])}}},{key:"_nobleDisconnectCallback",value:function(t,e){var n=this.device,r=this.isTimeout;n.id===t&&(clearTimeout(this._connectionTimeout),this._connectionTimeout=null,e?this.emit("fail","disconnect",e):(this._setConnected(!1),this.emit("disconnect",n,r)))}},{key:"wrapRWCallback",value:function(t){var e=this,n=e._type,r=e.device;if(e._rwCallbacks={},"cordova"===n)e._rwCallbacks.read=function(t,n){r.id===t&&e.emit("read",r,n)},e._rwCallbacks.write=function(t){if(r.id===t){for(var n=arguments.length,i=new Array(n>1?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];e.emit.apply(e,["write",r].concat(i))}},e._rwCallbacks.stopNotify=function(t){if(r.id===t){for(var n=arguments.length,i=new Array(n>1?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];e.emit.apply(e,["stopNotify",r].concat(i))}},e._rwCallbacks.notify=function(t){if(r.id===t){for(var n=arguments.length,i=new Array(n>1?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];e.emit.apply(e,["notify",r].concat(i))}};else{var i,o=gn(e.characteristics);try{for(o.s();!(i=o.n()).done;){var a=i.value;a.removeListener("read",e._readCallback),a.on("read",e._readCallback)}}catch(t){o.e(t)}finally{o.f()}}}},{key:"_nobleReadCallback",value:function(t,e,n){var r=this.device;this.emit("read",r,this._parseResponse(e))}},{key:"_nobleWriteCallback",value:function(t,e){var n=this.device;e?this.emit("fail","write",e):this.emit("write",n)}},{key:"_nobleNotifyCallback",value:function(t,e,n){var r=this.device;this.emit("notify",r,e,n),this.emit("stopNotify",r)}},{key:"_getWriteCharacteristic",value:function(){return this._findCharacteristic("cordova"===this._type?"6E400002-B5A3-F393-E0A9-E50E24DCCA9E":"6e400002b5a3f393e0a9e50e24dcca9e")}},{key:"_getNotifyCharacteristic",value:function(){return this._findCharacteristic("cordova"===this._type?"6E400003-B5A3-F393-E0A9-E50E24DCCA9E":"6e400003b5a3f393e0a9e50e24dcca9e")}},{key:"_findCharacteristic",value:function(t){var e,n=gn(this.characteristics);try{for(n.s();!(e=n.n()).done;){var r=e.value;if(r.uuid===t)return r}}catch(t){n.e(t)}finally{n.f()}return null}},{key:"_getGatewayAdditionalInfomation",value:(a=mn(yn().mark((function t(){var e,n,r,i,o,a,s,c,u,l,f,h,p;return yn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=(e=this).device,t.prev=1,t.next=4,e.readServerIp();case 4:r=t.sent,n.setServerIp(r.data.result),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),console.error("Cannot read server ip.");case 11:return t.prev=11,t.next=14,e.readServerPort();case 14:i=t.sent,n.setServerPort(i.data.result),t.next=21;break;case 18:t.prev=18,t.t1=t.catch(11),console.error("Cannot read server port.");case 21:return t.prev=21,t.next=24,e.readCertificationType();case 24:o=t.sent,n.setCertificationType(o.data.result),t.next=31;break;case 28:t.prev=28,t.t2=t.catch(21),console.error("Cannot read certification type.");case 31:return t.prev=31,t.next=34,e.readMqttBrokerId();case 34:a=t.sent,n.setMqttBrokerId(a.data.result),t.next=41;break;case 38:t.prev=38,t.t3=t.catch(31),console.error("Cannot read mqtt broker id.");case 41:return t.prev=41,t.next=44,e.readMqttBrokerTopic("telemetry");case 44:s=t.sent,n.setTelemetryMqttBrokerTopic(s.data.result),t.next=51;break;case 48:t.prev=48,t.t4=t.catch(41),console.error("Cannot read mqtt broker topic(telemetry).");case 51:return t.prev=51,t.next=54,e.readMqttBrokerTopic("attributes");case 54:c=t.sent,n.setAttributesMqttBrokerTopic(c.data.result),t.next=61;break;case 58:t.prev=58,t.t5=t.catch(51),console.error("Cannot read mqtt broker topic(attributes).");case 61:return t.prev=61,t.next=64,e.readMqttBrokerSubscribeTopic();case 64:u=t.sent,n.setMqttBrokerSubscribeTopic(u.data.result),t.next=71;break;case 68:t.prev=68,t.t6=t.catch(61),console.error("Cannot read mqtt broker subscribe topic.");case 71:return t.prev=71,t.next=74,e.readHttpUrl("telemetry");case 74:l=t.sent,n.setTelemetryHttpUrl(l.data.result),t.next=81;break;case 78:t.prev=78,t.t7=t.catch(71),console.error("Cannot read http url(telemetry).");case 81:return t.prev=81,t.next=84,e.readHttpUrl("attributes");case 84:f=t.sent,n.setAttributesHttpUrl(f.data.result),t.next=91;break;case 88:t.prev=88,t.t8=t.catch(81),console.error("Cannot read http url(attributes).");case 91:return t.prev=91,t.next=94,e.readHttpGETUrl();case 94:h=t.sent,n.setHttpGetUrl(h.data.result),t.next=101;break;case 98:t.prev=98,t.t9=t.catch(91),console.error("Cannot read http get url.");case 101:if(t.prev=101,e._isIgnoreGetCurrentWifiSSID){t.next=107;break}return t.next=105,e.readCurrentWifi();case 105:(p=t.sent).data&&p.data.result&&n.setCurrentWifiSsid(p.data.result);case 107:t.next=112;break;case 109:t.prev=109,t.t10=t.catch(101),console.error("Cannot read current wifi ssid info.");case 112:case"end":return t.stop()}}),t,this,[[1,8],[11,18],[21,28],[31,38],[41,48],[51,58],[61,68],[71,78],[81,88],[91,98],[101,109]])}))),function(){return a.apply(this,arguments)})},{key:"write",value:function(t,n){var r=this._type,i=this.device,o=e._ble;if(!t)throw new Error("there is no data to write");var a,s,c,u,l=this._rwCallbacks,f=this._callbacks;n=n||!1,"cordova"===r?(a=l.write.bind(this,i.id),s=f.fail.bind(this,"write"),n?o.writeWithoutResponse(i.id,Tn,"6E400002-B5A3-F393-E0A9-E50E24DCCA9E",t,a,s):o.write(i.id,Tn,"6E400002-B5A3-F393-E0A9-E50E24DCCA9E",t,a,s)):(c=this._getWriteCharacteristic(),(u=this._getNotifyCharacteristic())?(u.off("data",this._notifyCallback),u.on("data",this._notifyCallback)):console.error("there is no notify characteristic data in this connection."),c?c.write(t,n,this._writeCallback):console.error("there is no write characteristic data in this connection."))}},{key:"read",value:function(t){var n,r,i,o=this._type,a=this.device,s=e._ble,c=this._rwCallbacks,u=this._callbacks;"cordova"===o?(n=c.read.bind(this,a.id),r=u.fail.bind(this,"read"),s.read(a.id,Tn,t,n,r)):(i=this._findCharacteristic(t))?i.read(this._readCallback):console.error("there is no characteristic uuid is "+t+" in this connection.")}},{key:"connect",value:function(t){var n,r,i=this,o=i._type,a=e._ble,s=i.device;i.isTimeout=!1,i._isIgnoreGetCurrentWifiSSID=t,"cordova"===o?(n=i._callbacks.connect.bind(i),r=i._callbacks.disconnect.bind(i),a.connect(s.id,n,r)):(s.getPeripheral().once("connect",i._nobleConnectCallback.bind(i,s.id)),a.connect(s.id)),this._connectionTimeout=setTimeout((function(){i.isTimeout=!0,i.disconnect()}),e._timeout)}},{key:"disconnect",value:function(){var t,n,r=this._type,i=e._ble,o=this.device,a=this._callbacks||{},s=this._rwCallbacks||{};if("cordova"===r){if(t=a.fail&&a.fail.bind(this,"disconnect"),n=a.disconnect&&a.disconnect.bind(this),!this.isTimeout){var c=s.stopNotify&&s.stopNotify.bind(this,o.id),u=a.fail&&a.fail.bind(this,"stopNotify");i.stopNotification(o.id,Tn,"6E400003-B5A3-F393-E0A9-E50E24DCCA9E",c,u)}i.disconnect(o.id,n,t)}else{var l=o.getPeripheral();this.isTimeout||l.once("disconnect",this._nobleDisconnectCallback.bind(this,o.id)),i.disconnect(o.id),this.isTimeout&&this._nobleDisconnectCallback(o.id)}}},{key:"_wait",value:function(t){return new Promise((function(e,n){setTimeout((function(t){e()}),t)}))}},{key:"_encodeToArrayBuffer",value:function(t,e,n){var r,i,o,a=this._type,s=new Uint8Array(n.BUF_SIZE),c=0,u=gn(t);try{for(u.s();!(o=u.n()).done;)i=o.value,s[c]=l.stringToAscii(i),c++}catch(t){u.e(t)}finally{u.f()}s[c]=l.stringToAscii(n.INDEX),c++,Array.isArray(e)||(e=[e]);var f,h=0,p=e.length;for(h=0;h<p;h++){f=e[h],n.HEX_INTEGER&&((r=2===n.BYTE?new Uint16Array(1):new Uint8Array(1))[0]=f,f=new Uint8Array(r.buffer),2===n.BYTE&&(f=f.reverse()));var d,y=gn(f);try{for(y.s();!(d=y.n()).done;)if(i=d.value,n.ASCII){var v=encodeURIComponent(i).split("%");if(1===v.length)s[c]=l.stringToAscii(i),c++;else{var m,g=gn(v);try{for(g.s();!(m=g.n()).done;){var _=m.value;_&&(s[c]=parseInt(_,16).toString(),c++)}}catch(t){g.e(t)}finally{g.f()}}}else s[c]=this._getHex(i),c++}catch(t){y.e(t)}finally{y.f()}}return"electron"!==a&&"node"!==a||(s=Buffer.from(s.buffer)),s}},{key:"_getHex",value:function(t){return isNaN(Number(t))&&(t=l.stringToHex(t),t=l.asHexString(t)),t}},{key:"_parseResponse",value:function(t){var e=l.arrayBufferToHex(t);return{index:l.hexToString(e.slice(kn.START,kn.END)),result:l.hexToString(e.slice(Pn.START,Pn.END))}}},{key:"_parseReadResponse",value:function(t,e,n,r,i){var o,a=t.byteLength,s=this._parseResponse(t);if(!i&&5===a||i&&"NO"===s.result)return s;if(t=t.slice(3,a-2),n){if(t=Array.prototype.map.call(new Uint8Array(t),(function(t){return t.toString()})),1===r)o=t.join(".");else if(2===r){o=[];for(var c=1;c>=0;c--)o=o.concat(l.convertIntegerToBitArray(t[c]));o=l.convertBitArrayToInteger(o)}}else if(e){t=Array.prototype.map.call(new Uint8Array(t),(function(t){return t.toString()})),o="";for(var u=0;u<t.length;u++){var f=Number(t[u]);o+=f>=128?"%"+f.toString(16):String.fromCharCode(t[u])}}else{var h=l.arrayBufferToHex(t),p=l.hexToString(h);o="NO"===s.result?s.result+p:p}return"string"==typeof o&&(o=o.replace(new RegExp(String.fromCharCode(0),"g"),""),o=decodeURIComponent(o)),{index:null,result:o}}},{key:"_parseWifiSsidListResult",value:function(t){var e=t.split("///&"),n={total:0,list:[]};if(e.length>0){for(var r=0,i=e.length;r<i;r++){var o=e[r].split(",");if(3===o.length){var a=o[2];n.list.push({isSecured:"0"!==o[0],ssid:o[1].replace(/"/g,""),rssi:Number(a)})}}n.total=n.list.length}return n}},{key:"_promiseResponseCallback",value:function(t,e,n,i,o,a){var s,c=this,u=c._type,l=-1!==t.NAME.indexOf("READ")||-1!==t.NAME.indexOf("REQUEST");void 0!==t.ADDITIONAL_COMMAND&&(n=t.ADDITIONAL_COMMAND+n);var f=c._encodeToArrayBuffer(e,n,t),h="";c.on("notify",(function e(s,u){var f=l?c._parseReadResponse(u,t.RES_ASCII,t.RES_NUMBER,t.RES_BYTE,t.POSSIBLE_EMPTY_RESULT):c._parseResponse(u);if(f.index===t.INDEX)c.off("notify",e),f.command=t.NAME,delete f.index,"OK"===f.result?("CHANGE_PASSWORD"===f.command&&c.setPassword(n),o(s,f)):(t.ERR_MSG&&"NO"!==f.result&&(i=t.ERR_MSG[f.result.split("NO")[1]]),a({device:s,data:f,msg:new Error(i)}));else if(l){if("string"==typeof f.result&&-1!==f.result.indexOf("NO")&&(t.ERR_MSG&&(i=t.ERR_MSG[f.result.split("NO")[1]]),a({device:s,data:f,msg:new Error(i)})),t.MULTIPLE_NOTIFY&&("READ_WIFI_SSID"!==t.NAME||"0"!==n)){if(h+=f.result+"///&",c._multiNotiTimeout&&clearTimeout(c._multiNotiTimeout),-1===f.result.indexOf(String.fromCharCode(4)))return void(c._multiNotiTimeout=setTimeout((function(){c.off("notify",e),a({device:s,data:null,msg:new Error("Request timeout.")})}),1e4));h=(h=h.replace(new RegExp(String.fromCharCode(4),"g"),"")).slice(0,h.length-"///&".length),f.result=h}c.off("notify",e),f.command=t.NAME,f.command===An.READ_WIFI_SSID.NAME?f.result="0"===n?"OK":c._parseWifiSsidListResult(f.result):f.command===An.READ_CERTIFICATION_TYPE.NAME&&(f.result=r.BUILDTHING_GATEWAY.CERTIFICATION_TYPE[f.result]),delete f.index,o({device:s,data:f})}})),s="electron"===u||"node"===u?f:f.buffer,c.write(s)}},{key:"setPassword",value:function(t){this._password=t}},{key:"isValidPassword",value:function(t){return new Promise(this._promiseResponseCallback.bind(this,An.CONFIRM_PASSWORD,t,"","invalid password."))}},{key:"changePassword",value:function(t){if("number"==typeof t&&(t+=""),!t.match(/^[0-9]{6,6}$/))throw new Error("invalid new password");return new Promise(this._promiseResponseCallback.bind(this,An.CHANGE_PASSWORD,this._password,t,"failed to set password."))}},{key:"changeName",value:function(t){"number"==typeof t&&(t+="");var e=/^[0-9a-zA-Z\s]{1,8}$/;if(this.devType===r.DEVICE_TYPE.gateway?e=/^[A-Za-z0-9`,<.>/?;:'"{}~!@#$%^&*()_\-=+\s]{1,8}$/:this.devType===r.DEVICE_TYPE.iaq&&(e=/^[A-Za-z0-9`,<.>/?;:'"{}~!@#$%^&*()_\-=+\s]{1,16}$/),!t.match(e))throw new Error("invalid name.");var n=An.CHANGE_NAME_BC;return this.devType===r.DEVICE_TYPE.gateway?n=An.CHANGE_NAME_GW:this.devType===r.DEVICE_TYPE.iaq&&(n=An.CHANGE_NAME_IAQ),new Promise(this._promiseResponseCallback.bind(this,n,this._password,t,"failed to set name."))}},{key:"changeMode",value:function(t){if(this.devType!==r.DEVICE_TYPE.beacon)throw new Error('this method must use in "Beacon".');if("number"==typeof t&&(t+=""),!t.match(/^[0-4]{1,1}$/))throw new Error("invalid mode. (0 = BuildThing, 1 = iBeacon, 2 = Eddystone-UID, 3 = Eddystone-URL, 4 = Eddystone-TLM)");return new Promise(this._promiseResponseCallback.bind(this,An.CHANGE_MODE,this._password,t,"failed to set mode."))}},{key:"changeAdvertisingInterval",value:function(t){if(this.devType!==r.DEVICE_TYPE.beacon)throw new Error('this method must use in "Beacon".');if("number"==typeof t&&(t+=""),!t.match(/^[0-9]+$/))throw new Error("invalid advertising interval.");var e=Number(t),n=An.CHANGE_ADVERTISING_INTERVAL.MIN,i=An.CHANGE_ADVERTISING_INTERVAL.MAX;if(e<n||e>i)throw new Error("invalid advertising interval. (min : "+n+", max : "+i+")");return new Promise(this._promiseResponseCallback.bind(this,An.CHANGE_ADVERTISING_INTERVAL,this._password,t,"failed to set advertising interval."))}},{key:"changeSensorInterval",value:function(t){if(this.devType!==r.DEVICE_TYPE.beacon)throw new Error('this method must use in "Beacon".');if("number"==typeof t&&(t+=""),!t.match(/^[0-9]+$/))throw new Error("invalid sensor interval.");var e=An.CHANGE_SENSOR_INTERVAL,n=Number(t),i=e.MIN,o=e.MAX;if(n<i||n>o)throw new Error("invalid sensor interval. (min : "+i+", max : "+o+")");return new Promise(this._promiseResponseCallback.bind(this,e,this._password,t,"failed to set sensor interval."))}},{key:"changeMajor",value:function(t){if(this.devType!==r.DEVICE_TYPE.beacon)throw new Error('this method must use in "Beacon".');if("number"==typeof t&&(t+=""),!t.match(/^[0-9]+$/))throw new Error("invalid major.");var e=Number(t),n=An.CHANGE_MAJOR.MIN,i=An.CHANGE_MAJOR.MAX;if(e<n||e>i)throw new Error("invalid major. (min : "+n+", max : "+i+")");var o=this._promiseResponseCallback;return new Promise(o.bind(this,An.CHANGE_MAJOR,this._password,t,"failed to set major."))}},{key:"changeMinor",value:function(t){if(this.devType!==r.DEVICE_TYPE.beacon)throw new Error('this method must use in "Beacon".');if("number"==typeof t&&(t+=""),!t.match(/^[0-9]+$/))throw new Error("invalid minor.");var e=Number(t),n=An.CHANGE_MINOR.MIN,i=An.CHANGE_MINOR.MAX;if(e<n||e>i)throw new Error("invalid minor. (min : "+n+", max : "+i+")");return new Promise(this._promiseResponseCallback.bind(this,An.CHANGE_MINOR,this._password,t,"failed to set minor."))}},{key:"changeNameSpaceID",value:function(t){if(this.devType!==r.DEVICE_TYPE.beacon)throw new Error('this method must use in "Beacon".');if(!t.match(/^[0-9a-zA-Z\s]{1,10}$/))throw new Error("invalid namespace id.");return new Promise(this._promiseResponseCallback.bind(this,An.CHANGE_NAMESPACE_ID,this._password,t,"failed to set namespace id."))}},{key:"changeInstanceID",value:function(t){if(this.devType!==r.DEVICE_TYPE.beacon)throw new Error('this method must use in "Beacon".');if(!t.match(/^[0-9a-zA-Z\s]{1,6}$/))throw new Error("invalid instance id.");return new Promise(this._promiseResponseCallback.bind(this,An.CHANGE_INSTANCE_ID,this._password,t,"failed to set instance id."))}},{key:"changeSchemePrefix",value:function(t){if(this.devType!==r.DEVICE_TYPE.beacon)throw new Error('this method must use in "Beacon".');if("number"==typeof t&&(t+=""),!t.match(/^[0-3]$/))throw new Error("invalid minor. (0 : http://www., 1 : https://www., 2 : http://, 3 : https://)");return new Promise(this._promiseResponseCallback.bind(this,An.CHANGE_SCHEME_PREFIX,this._password,t,"failed to set scheme prefix."))}},{key:"changeUrl",value:function(t){if(this.devType!==r.DEVICE_TYPE.beacon)throw new Error('this method must use in "Beacon".');if(!t.match(/((http|https):\/\/){0}[-a-zA-Z0-9@:%._+~#=]{2,15}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_+.~#?&//=]*)/))throw new Error("invalid url.");return new Promise(this._promiseResponseCallback.bind(this,An.CHANGE_URL,this._password,t,"failed to set url."))}},{key:"changeTxPower",value:function(t){if(this.devType!==r.DEVICE_TYPE.beacon)throw new Error('this method must use in "Beacon".');if("number"==typeof t&&(t+=""),!t.match(/^-?[0-9]+$/))throw new Error("invalid tx power.");var e=Number(t),n=An.CHANGE_TX_POWER.MIN,i=An.CHANGE_TX_POWER.MAX;if(e<n||e>i)throw new Error("invalid tx power. (min : "+n+", max : "+i+")");return new Promise(this._promiseResponseCallback.bind(this,An.CHANGE_TX_POWER,this._password,t,"failed to set tx power."))}},{key:"changeIOOutput",value:function(t,e){if(this.devType!==r.DEVICE_TYPE.beacon)throw new Error('this method must use in "Beacon".');if("number"==typeof t&&(t+=""),!t.match(/^[0-1]$/))throw new Error("invalid moduleType.");if(!Array.isArray(e))throw new Error("invalid value. value must be 8 bit array.");var n=[];return e=l.convertBitArrayToInteger(e)+"",n.push(t,e),new Promise(this._promiseResponseCallback.bind(this,An.CHANGE_IO_OUTPUT,this._password,n,"failed to set IO module output."))}},{key:"rebootBeacon",value:function(){if(this.devType!==r.DEVICE_TYPE.beacon)throw new Error('this method must use in "Beacon".');return new Promise(this._promiseResponseCallback.bind(this,An.REBOOT,this._password,"eboot","failed to reboot."))}},{key:"changeScanType",value:function(t){if(this.devType!==r.DEVICE_TYPE.gateway)throw new Error('this method must use in "Gateway".');if("number"==typeof t&&(t+=""),!t.match(/^[0-3]{1,1}/))throw new Error("invalid scan type. (0 : Beacon, 1 : IAQ, 2 : Jack Support, 3 : OtherBeacon)");return new Promise(this._promiseResponseCallback.bind(this,An.CHANGE_SCAN_TYPE,this._password,t,"failed to set scan type."))}},{key:"changeProtocolType",value:function(t){if(this.devType!==r.DEVICE_TYPE.gateway)throw new Error('this method must use in "Gateway".');if("number"==typeof t&&(t+=""),!t.match(/^[0-2]{1,1}/))throw new Error("invalid scan type. (0 : MQTT, 1 : HTTP, 2 : HTTPS)");return new Promise(this._promiseResponseCallback.bind(this,An.CHANGE_PROTOCOL_TYPE,this._password,t,"failed to set protocol type."))}},{key:"changeScanTime",value:function(t){if(this.devType!==r.DEVICE_TYPE.gateway)throw new Error('this method must use in "Gateway".');if("number"==typeof t&&(t+=""),!t.match(/^[0-9]+$/))throw new Error("invalid scan time.");var e=Number(t),n=An.CHANGE_SCAN_TIME.MIN,i=An.CHANGE_SCAN_TIME.MAX;if(e<n||e>i)throw new Error("invalid scan time. (min : "+n+", max : "+i+")");return new Promise(this._promiseResponseCallback.bind(this,An.CHANGE_SCAN_TIME,this._password,t,"failed to set scan time."))}},{key:"changeNetworkPeriod",value:function(t){if(this.devType!==r.DEVICE_TYPE.gateway)throw new Error('this method must use in "Gateway".');if("number"==typeof t&&(t+=""),!t.match(/^[0-9]+$/))throw new Error("invalid network period.");var e=Number(t),n=An.CHANGE_NETWORK_PERIOD.MIN,i=An.CHANGE_NETWORK_PERIOD.MAX;if(e<n||e>i)throw new Error("invalid network period. (min : "+n+", max : "+i+")");return new Promise(this._promiseResponseCallback.bind(this,An.CHANGE_NETWORK_PERIOD,this._password,t,"failed to set network period."))}},{key:"readServerIp",value:function(){if(this.devType!==r.DEVICE_TYPE.gateway)throw new Error('this method must use in "Gateway".');return new Promise(this._promiseResponseCallback.bind(this,An.READ_SERVER_IP,this._password,"","failed to read server ip."))}},{key:"changeServerIp",value:function(t){if(this.devType!==r.DEVICE_TYPE.gateway)throw new Error('this method must use in "Gateway".');if("string"!=typeof t||!t.match(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/))throw new Error("invalid ip address.");var e=t.split(".");return new Promise(this._promiseResponseCallback.bind(this,An.CHANGE_SERVER_IP,this._password,e,"failed to set server ip."))}},{key:"readServerPort",value:function(){if(this.devType!==r.DEVICE_TYPE.gateway)throw new Error('this method must use in "Gateway".');return new Promise(this._promiseResponseCallback.bind(this,An.READ_SERVER_PORT,this._password,"","failed to read server port."))}},{key:"changeServerPort",value:function(t){if(this.devType!==r.DEVICE_TYPE.gateway)throw new Error('this method must use in "Gateway".');if("number"==typeof t&&(t+=""),!t.match(/^[0-9]+$/))throw new Error("invalid port.");var e=Number(t),n=An.CHANGE_SERVER_PORT.MIN,i=An.CHANGE_SERVER_PORT.MAX;if(e<n||e>i)throw new Error("invalid port. (min : "+n+", max : "+i+")");var o=this._promiseResponseCallback;return new Promise(o.bind(this,An.CHANGE_SERVER_PORT,this._password,t,"failed to set port."))}},{key:"readCertificationType",value:function(){if(this.devType!==r.DEVICE_TYPE.gateway)throw new Error('this method must use in "Gateway".');return new Promise(this._promiseResponseCallback.bind(this,An.READ_CERTIFICATION_TYPE,this._password,"","failed to read certification type info."))}},{key:"changeCertificationType",value:function(t){if(this.devType!==r.DEVICE_TYPE.gateway)throw new Error('this method must use in "Gateway".');if("number"==typeof t&&(t+=""),"0"!==t&&"1"!==t&&"2"!==t)throw new Error("invalid value. (0 : Token, 1 : TLS, 2 : None.)");return new Promise(this._promiseResponseCallback.bind(this,An.CHANGE_CERTIFICATION_TYPE,this._password,t,"failed to set certification type."))}},{key:"changeToken",value:function(t){if(this.devType!==r.DEVICE_TYPE.gateway)throw new Error('this method must use in "Gateway".');return new Promise(this._promiseResponseCallback.bind(this,An.CHANGE_TOKEN,this._password,t,"failed to set token."))}},{key:"changeTlsCert",value:function(t){if(this.devType!==r.DEVICE_TYPE.gateway)throw new Error('this method must use in "Gateway".');return new Promise(this._promiseResponseCallback.bind(this,An.CHANGE_TLS_CERT,this._password,t,"failed to set tls certification."))}},{key:"_processCommand",value:function(t,e,n){return new Promise(this._promiseResponseCallback.bind(this,t,this._password,e,n))}},{key:"_multipleReadRequst",value:function(t,e,n,r,i){var o=this;return void 0===r&&(r=1e3),void 0===i&&(i=1e3),new Promise(function(){var a=mn(yn().mark((function a(s,c){var u,l;return yn().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return u=0,a.prev=1,a.next=4,o._processCommand(t,"0",e);case 4:return a.next=6,o._wait(r);case 6:return a.prev=7,u++,a.next=11,o._processCommand(t,"1",n);case 11:return l=a.sent,a.abrupt("break",24);case 15:if(a.prev=15,a.t0=a.catch(7),!(u>40||a.t0.data&&"NO"!==a.t0.data.result)){a.next=20;break}return c(a.t0),a.abrupt("break",24);case 20:return a.next=22,o._wait(i);case 22:a.next=6;break;case 24:s(l),a.next=30;break;case 27:a.prev=27,a.t1=a.catch(1),c(a.t1);case 30:case"end":return a.stop()}}),a,null,[[1,27],[7,15]])})));return function(t,e){return a.apply(this,arguments)}}())}},{key:"readWifiSsid",value:function(){if(this.devType!==r.DEVICE_TYPE.gateway)throw new Error('this method must use in "Gateway".');return this._multipleReadRequst(An.READ_WIFI_SSID,"failed to refresh wifi ssid list.","failed to read wifi ssid.")}},{key:"changeWifiSsid",value:function(t){if(this.devType!==r.DEVICE_TYPE.gateway)throw new Error('this method must use in "Gateway".');return new Promise(this._promiseResponseCallback.bind(this,An.CHANGE_WIFI_SSID,this._password,t,"failed to set wifi ssid."))}},{key:"changeWifiPassword",value:function(t){if(this.devType!==r.DEVICE_TYPE.gateway)throw new Error('this method must use in "Gateway".');if("number"==typeof t&&(t+=""),!t.match(/^[A-Za-z0-9`,<.>/?;:'"{}~!@#$%^&*()_\-=+\s]{6,20}$/))throw new Error("minimum length of wifi password is 6.");return new Promise(this._promiseResponseCallback.bind(this,An.CHANGE_WIFI_PASSWORD,this._password,t,"failed to set wifi password."))}},{key:"requestWifiConnect",value:function(){if(this.devType!==r.DEVICE_TYPE.gateway)throw new Error('this method must use in "Gateway".');return this._multipleReadRequst(An.REQUEST_WIFI_CONNECT,"failed to connect wifi.","failed to connect wifi.")}},{key:"readCurrentWifi",value:function(){if(this.devType!==r.DEVICE_TYPE.gateway)throw new Error('this method must use in "Gateway".');return this._multipleReadRequst(An.READ_CURRENT_WIFI,"failed to connect wifi.","failed to connect wifi.")}},{key:"readMqttBrokerId",value:function(){if(this.devType!==r.DEVICE_TYPE.gateway)throw new Error('this method must use in "Gateway".');return new Promise(this._promiseResponseCallback.bind(this,An.READ_MQTT_BROKER_ID,this._password,"","failed to read mqtt broker id."))}},{key:"changeMqttBrokerId",value:function(t){if(this.devType!==r.DEVICE_TYPE.gateway)throw new Error('this method must use in "Gateway".');return new Promise(this._promiseResponseCallback.bind(this,An.CHANGE_MQTT_BROKER_ID,this._password,t,"failed to set mqtt broker id."))}},{key:"changeMqttBrokerPassword",value:function(t){if(this.devType!==r.DEVICE_TYPE.gateway)throw new Error('this method must use in "Gateway".');return new Promise(this._promiseResponseCallback.bind(this,An.CHANGE_MQTT_BROKER_PASSWORD,this._password,t,"failed to set mqtt broker password."))}},{key:"readMqttBrokerTopic",value:function(t){if(this.devType!==r.DEVICE_TYPE.gateway)throw new Error('this method must use in "Gateway".');var e="telemetry"===t?An.READ_MQTT_BROKER_TOPIC_TELEMETRY:An.READ_MQTT_BROKER_TOPIC_ATTRIBUTES;return new Promise(this._promiseResponseCallback.bind(this,e,this._password,"","failed to read mqtt broker topic("+t+")."))}},{key:"changeMqttBrokerTopic",value:function(t,e){if(this.devType!==r.DEVICE_TYPE.gateway)throw new Error('this method must use in "Gateway".');var n="telemetry"===t?An.CHANGE_MQTT_BROKER_TOPIC_TELEMETRY:An.CHANGE_MQTT_BROKER_TOPIC_ATTRIBUTES;return new Promise(this._promiseResponseCallback.bind(this,n,this._password,e,"failed to set mqtt broker topic("+t+")."))}},{key:"readHttpUrl",value:function(t){if(this.devType!==r.DEVICE_TYPE.gateway)throw new Error('this method must use in "Gateway".');var e="telemetry"===t?An.READ_HTTP_URL_TELEMETRY:An.READ_HTTP_URL_ATTRIBUTES;return new Promise(this._promiseResponseCallback.bind(this,e,this._password,"","failed to read http url("+t+")."))}},{key:"changeHttpUrl",value:function(t,e){if(this.devType!==r.DEVICE_TYPE.gateway)throw new Error('this method must use in "Gateway".');var n="telemetry"===t?An.CHANGE_HTTP_URL_TELEMETRY:An.CHANGE_HTTP_URL_ATTRIBUTES;return new Promise(this._promiseResponseCallback.bind(this,n,this._password,e,"failed to set http url("+t+")."))}},{key:"readMqttBrokerSubscribeTopic",value:function(){if(this.devType!==r.DEVICE_TYPE.gateway)throw new Error('this method must use in "Gateway".');return new Promise(this._promiseResponseCallback.bind(this,An.READ_MQTT_BROKER_SUB_TOPIC,this._password,"","failed to read mqtt broker subscribe topic."))}},{key:"changeMqttBrokerSubscribeTopic",value:function(t){if(this.devType!==r.DEVICE_TYPE.gateway)throw new Error('this method must use in "Gateway".');return new Promise(this._promiseResponseCallback.bind(this,An.CHANGE_MQTT_BROKER_SUB_TOPIC,this._password,t,"failed to set mqtt broker subscribe topic."))}},{key:"readHttpGETUrl",value:function(){if(this.devType!==r.DEVICE_TYPE.gateway)throw new Error('this method must use in "Gateway".');return new Promise(this._promiseResponseCallback.bind(this,An.READ_HTTP_GET_URL,this._password,"","failed to read http get url."))}},{key:"changeHttpGETUrl",value:function(t){if(this.devType!==r.DEVICE_TYPE.gateway)throw new Error('this method must use in "Gateway".');return new Promise(this._promiseResponseCallback.bind(this,An.CHANGE_HTTP_GET_URL,this._password,t,"failed to set http get url."))}},{key:"changeBuildThingCloudMode",value:function(t){if(this.devType!==r.DEVICE_TYPE.gateway)throw new Error('this method must use in "Gateway".');if(!t.match(/^[0-1]{1,1}/))throw new Error("invalid value. (0 : Unuse cloud, 1 : Use cloud(default))");return new Promise(this._promiseResponseCallback.bind(this,An.CHANGE_BUILDTHING_CLOUD_MODE,this._password,t,"failed to change buildthing cloud mode."))}},{key:"readServerId",value:function(){if(this.devType!==r.DEVICE_TYPE.gateway)throw new Error('this method must use in "Gateway".');return new Promise(this._promiseResponseCallback.bind(this,An.READ_SERVER_ID,this._password,"","failed to read server id."))}},{key:"changeServerId",value:function(t){if(this.devType!==r.DEVICE_TYPE.gateway)throw new Error('this method must use in "Gateway".');return new Promise(this._promiseResponseCallback.bind(this,An.CHANGE_SERVER_ID,this._password,t,"failed to set server id."))}},{key:"changeServerPassword",value:function(t){if(this.devType!==r.DEVICE_TYPE.gateway)throw new Error('this method must use in "Gateway".');return new Promise(this._promiseResponseCallback.bind(this,An.CHANGE_SERVER_PASSWORD,this._password,t,"failed to set server password."))}},{key:"readGatewayInfo",value:function(){var t=this;return new Promise(function(){var e=mn(yn().mark((function e(n,r){return yn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._getGatewayAdditionalInfomation();case 2:n(t.device);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}())}},{key:"changeUseLongRange",value:function(t){if(this.devType!==r.DEVICE_TYPE.iaq)throw new Error('this method must use in "AirQ".');return new Promise(this._promiseResponseCallback.bind(this,An.CHANGE_USE_LONG_RANGE,this._password,t,"failed to set long range usage."))}},{key:"changeTemperatureUnit",value:function(t){if(this.devType!==r.DEVICE_TYPE.iaq)throw new Error('this method must use in "AirQ".');return new Promise(this._promiseResponseCallback.bind(this,An.CHANGE_TEMPERATURE_UNIT,this._password,t,"failed to set temperature unit."))}}],o=[{key:"setBLELibrary",value:function(t){e._ble=t._ble}},{key:"getBLELibrary",value:function(){return e._ble}},{key:"setTimeout",value:function(t){e._timeout=t}},{key:"getTimeout",value:function(){return e._timeout}}],i&&bn(n.prototype,i),o&&bn(n,o),Object.defineProperty(n,"prototype",{writable:!1}),e}(C);Rn._ble=null,Rn._timeout=3e5;var On=Rn;function Dn(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return xn(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return xn(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function xn(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Un(t,e,n){return e=Nn(e),function(t,e){if(e&&("object"===Mn(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,n||[],Nn(t).constructor):e.apply(t,n))}function Nn(t){return(Nn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Bn(t,e){return(Bn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Mn(t){return(Mn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ln(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function jn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Hn(r.key),r)}}function Fn(t,e,n){return e&&jn(t.prototype,e),n&&jn(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Hn(t){var e=function(t,e){if("object"!=Mn(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Mn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Mn(e)?e:String(e)}var Gn=function(){function t(){Ln(this,t),this.isInside=!1,this.lastSeenTime=0}return Fn(t,[{key:"markInside",value:function(){var t=new Date;return this.lastSeenTime=t.getTime(),!this.isInside&&(this.isInside=!0,!0)}},{key:"markOutside",value:function(){this.isInside=!1,this.lastSeenTime=0}},{key:"markOutsideIfExpired",value:function(){var e=this.isInside,n=this.lastSeenTime,r=t.getRegionExitPeriod();if(e){var i=(new Date).getTime();if(n>0&&i-n>r)return this.markOutside(),!0}return!1}},{key:"isInsideRegion",value:function(){return this.isInside}}],[{key:"setRegionExitPeriod",value:function(e){t.regionExitPeriod=e}},{key:"getRegionExitPeriod",value:function(){return t.regionExitPeriod}}]),t}(),Vn=function(){function t(e,n){Ln(this,t),this.isInside=e,this.region=n}return Fn(t,[{key:"isInsideRegion",value:function(){return this.isInside}},{key:"getRegion",value:function(){return this.region}}]),t}(),Yn=function(t){function e(t){var n;return Ln(this,e),(n=Un(this,e))._manager=t,n.regionStateMap=new Map,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Bn(t,e)}(e,t),Fn(e,[{key:"getRegions",value:function(){var t=[];return this.regionStateMap.forEach((function(e,n){t.push(e.region)})),t}},{key:"getRegionMonitoringStateMap",value:function(){return this.regionStateMap}},{key:"getMatchedRegions",value:function(t){var e=this.getRegions(),n=[];return e.forEach((function(e,r){e.isMatchedBeacon(t)&&n.push(e)})),n}},{key:"addRegion",value:function(t){var e=this.regionStateMap,n=t.toString(),r=e.get(n);return r||(r=new Gn,e.set(n,{region:t,regionMonitoringState:r}),r)}},{key:"removeRegion",value:function(t){var e=this.regionStateMap,n=t.toString();return e.delete(n)}},{key:"clear",value:function(){this.regionStateMap.clear()}},{key:"updateState",value:function(t,e){var n=this.regionStateMap,r=t.toString(),i=n.get(r),o=i&&i.regionMonitoringState;null==o&&(o=this.addRegion(t)),!0===e?o.markInside():o.markOutside()}},{key:"updateInsideRegion",value:function(t){var e,n,r,i,o=this.regionStateMap,a=Dn(this.getMatchedRegions(t));try{for(a.s();!(i=a.n()).done;){var s=i.value;e=s.toString(),(r=(n=o.get(e))&&n.regionMonitoringState)&&r.markInside()&&this._emitUpdateState(new Vn(r.isInsideRegion(),s),t)}}catch(t){a.e(t)}finally{a.f()}}},{key:"updateOutsideRegion",value:function(){var t,e,n=this;n.regionStateMap.forEach((function(r){t=r.region,(e=r.regionMonitoringState).markOutsideIfExpired()&&n._emitUpdateState(new Vn(e.isInsideRegion(),t))}))}},{key:"_emitUpdateState",value:function(t,e){this.emit("update",t);var n=t.getRegion(),r=t.isInsideRegion();this.updateState(n,r),r?this.emit("enter",n,e):this.emit("exit",n)}},{key:"getRegionSize",value:function(){return this.regionStateMap.size}}]),e}(C);function Wn(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return qn(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return qn(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function qn(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Xn(t,e,n){return e=$n(e),function(t,e){if(e&&("object"===Zn(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,n||[],$n(t).constructor):e.apply(t,n))}function $n(t){return($n=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Qn(t,e){return(Qn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Zn(t){return(Zn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function zn(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Kn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,tr(r.key),r)}}function Jn(t,e,n){return e&&Kn(t.prototype,e),n&&Kn(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function tr(t){var e=function(t,e){if("object"!=Zn(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Zn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Zn(e)?e:String(e)}var er=function(){function t(e){zn(this,t),this.beacon=null,this.tracked=!0,this.lastTrackedTime=0,this.packetCount=0,this.filter=new t.RssiFilter,this.updateBeacon(e)}return Jn(t,[{key:"getBeacon",value:function(){return this.beacon}},{key:"updateBeacon",value:function(t){this.packetCount+=1,this.beacon=t,this.addMeasurement(this.beacon.getRssi())}},{key:"isTracked",value:function(){return this.tracked}},{key:"setTracked",value:function(t){this.tracked=t}},{key:"commitMeasurements",value:function(){var t,e=this.filter,n=this.beacon;e.isMeasurementAvailable()&&(t=e.calculateRssi(),n.setRssi(t),n.setRssiMeasurementCount(e.getMeasurementCount())),n.setPacketCount(this.packetCount),this.packetCount=0}},{key:"addMeasurement",value:function(t){var e=this.filter;127!==t&&(this.tracked=!0,this.lastTrackedTime=(new Date).getTime(),e.addMeasurement(t))}},{key:"isMeasurementAvailable",value:function(){return this.filter.isMeasurementAvailable()}},{key:"getTrackingAge",value:function(){return(new Date).getTime()-this.lastTrackedTime}},{key:"isExpired",value:function(){return this.getTrackingAge()>t.getMaxTrackingAge()}}],[{key:"setRssiFilter",value:function(e){t.RssiFilter=e}},{key:"getRssiFilter",value:function(){return t.RssiFilter}},{key:"setExpirationTime",value:function(e){t.expirationTime=e,this.filter.setExpirationTime(e)}},{key:"getExpirationTime",value:function(){return t.expirationTime}},{key:"setMaxTrackingAge",value:function(e){t.maxTrackingAge=e}},{key:"getMaxTrackingAge",value:function(){return t.maxTrackingAge}},{key:"setTrackingCache",value:function(e){t.trackingCache=e}},{key:"getTrackingCache",value:function(){return t.trackingCache}}]),t}(),nr=function(){function t(){zn(this,t),this.rangedBeaconsMap=new Map}return Jn(t,[{key:"addBeacon",value:function(t){var e=this.rangedBeaconsMap,n=t.getAddress(),r=e.get(n);r?r.updateBeacon(t):e.set(n,new er(t))}},{key:"getRangedBeacons",value:function(){var t=this.rangedBeaconsMap,e=new Map,n=[];return t.forEach((function(t,r){t&&(t.isTracked()&&(t.commitMeasurements(),t.isMeasurementAvailable()&&n.push(t.getBeacon())),t.isMeasurementAvailable()&&(er.getTrackingCache()&&!t.isExpired()||t.setTracked(!1),e.set(r,t)))})),this.rangedBeaconsMap=e,n.sort((function(t,e){return t.getDistance()-e.getDistance()})),1===n.length&&n[0].getDistance(),n}}]),t}(),rr=function(){function t(e,n){zn(this,t),this.beacons=e,this.region=n}return Jn(t,[{key:"getBeacons",value:function(){return this.beacons}},{key:"getRegion",value:function(){return this.region}}]),t}(),ir=function(t){function e(t){var n;return zn(this,e),(n=Xn(this,e))._manager=t,n.regionStateMap=new Map,n.deviceStateMap=new Map,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Qn(t,e)}(e,t),Jn(e,[{key:"getRangedRegionState",value:function(){return this.regionStateMap}},{key:"getRegions",value:function(){var t=[];return this.regionStateMap.forEach((function(e){t.push(e.region)})),t}},{key:"addRegion",value:function(t){var e=this.regionStateMap,n=t.toString(),r=e.get(n),i=r&&r.regionRangeState;return i&&e.delete(n),i=new nr,e.set(n,{region:t,regionRangeState:i}),i}},{key:"removeRegion",value:function(t){var e=this.regionStateMap,n=t.toString();return e.delete(n)}},{key:"clear",value:function(){this.regionStateMap.clear()}},{key:"getMatchedRegions",value:function(t){var e=this.getRegions(),n=[];return e.forEach((function(e,r){e.isMatchedBeacon(t)&&n.push(e)})),n}},{key:"setRangedRegionState",value:function(t){this.regionsStateMap.clear(),this.regionStateMap=t}},{key:"updateRangeState",value:function(t){var e,n,r,i,o=this.regionStateMap,a=Wn(this.getMatchedRegions(t));try{for(a.s();!(i=a.n()).done;){r=i.value.toString(),(n=(e=o.get(r))&&e.regionRangeState)&&n.addBeacon(t)}}catch(t){a.e(t)}finally{a.f()}}},{key:"emitRangeBeacons",value:function(){var t,e,n,r=this;r.regionStateMap.forEach((function(i,o){e=i.regionRangeState,n=i.region,t=new rr(e.getRangedBeacons(),n),r.emit("ranged",t)}))}},{key:"getRegionSize",value:function(){return this.regionStateMap.size}},{key:"addDeviceMeasurement",value:function(t){var e=this.deviceStateMap,n=t.id,r=e.get(n);r?r.updateBeacon(t):(r=new er(t),e.set(n,r))}},{key:"updateDeviceMeasurement",value:function(){var t=this.deviceStateMap,e=new Map;t.forEach((function(t,n){t.isTracked()&&t.commitMeasurements(),t.isMeasurementAvailable()&&(er.getTrackingCache()&&!t.isExpired()||t.setTracked(!1),e.set(n,t))})),this.deviceStateMap=e}}]),e}(C);function or(t){return(or="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ar(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,sr(r.key),r)}}function sr(t){var e=function(t,e){if("object"!=or(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=or(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==or(e)?e:String(e)}er.rssiFilter=null,er.maxTrackingAge=5e3,er.expirationTime=2e4,er.trackingCache=!1;var cr=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,r;return e=t,(n=[{key:"calculateDistance",value:function(t,e){}}])&&ar(e.prototype,n),r&&ar(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function ur(t){return(ur="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function lr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,fr(r.key),r)}}function fr(t){var e=function(t,e){if("object"!=ur(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=ur(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==ur(e)?e:String(e)}var hr={iPhone:{atZero:-43,8:-60,4:-68,0:-73,"-4":-78,"-8":-82,"-12":-86,"-16":-90,"-20":-94},iPad:{atZero:-52,8:-68,4:-76,0:-80,"-4":-84,"-8":-88,"-12":-92,"-16":-96,"-20":-100},"SM-G950N":{atZero:-50,8:-70,4:-78,0:-82,"-4":-86,"-8":-90,"-12":-94,"-16":-98,"-20":-102},"SM-G960N":{atZero:-55,8:-74,4:-82,0:-86,"-4":-90,"-8":-94,"-12":-98,"-16":-102,"-20":-106},"SM-G970N":{atZero:-50,8:-58,4:-64,0:-68,"-4":-72,"-8":-76,"-12":-80,"-16":-84,"-20":-88},"SM-T820":{atZero:-49,8:-58,4:-72,0:-84,"-4":-100,"-8":-104,"-12":-108,"-16":-112,"-20":-116}},pr=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,r;return e=t,(n=[{key:"getConfig",value:function(){if("undefined"==typeof window||null===window)return hr.iPad;var t=window.navigator.userAgent,e="iPad";return t.match(/iPhone/i)?e="iPhone":t.match(/iPad/i)?e="iPad":t.match(/SM-G950N/i)?e="SM-G950N":t.match(/SM-G960N/i)?e="SM-G960N":t.match(/SM-G970N/i)?e="SM-G970N":t.match(/SM-T820/i)&&(e="SM-T820"),hr[e]}}])&&lr(e.prototype,n),r&&lr(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function dr(t){return(dr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function yr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,vr(r.key),r)}}function vr(t){var e=function(t,e){if("object"!=dr(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=dr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==dr(e)?e:String(e)}function mr(t,e,n){return e=gr(e),function(t,e){if(e&&("object"===dr(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,n||[],gr(t).constructor):e.apply(t,n))}function gr(t){return(gr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _r(t,e){return(_r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var br=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=mr(this,e)).pathLossExponent=t||2,n.d0RssiConfig=(new pr).getConfig(),n}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_r(t,e)}(e,t),n=e,(r=[{key:"calculateDistance",value:function(t,e){if(0===e||null==t)return-1;t&&void 0!==t.value&&null!==t.value&&(t=t.value);var n=this.d0RssiConfig[t.toString()];return e>n?-.002*(e=20*((t+=this.d0RssiConfig.atZero)-e)/(t-n))*e+.09*e:Math.pow(10,(n-e)/(10*this.pathLossExponent))}}])&&yr(n.prototype,r),i&&yr(n,i),Object.defineProperty(n,"prototype",{writable:!1}),e}(cr);function Er(t){return(Er="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function wr(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Sr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Cr(r.key),r)}}function Ir(t,e,n){return e&&Sr(t.prototype,e),n&&Sr(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Cr(t){var e=function(t,e){if("object"!=Er(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Er(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Er(e)?e:String(e)}var Tr=function(){function t(e,n){wr(this,t),this.rssi=e||null,this.timestamp=n||null}return Ir(t,[{key:"getRssi",value:function(){return this.rssi}},{key:"setRssi",value:function(t){this.rssi=t}},{key:"getTimeStamp",value:function(){return this.timestamp}},{key:"setTimeStamp",value:function(t){this.timestamp=t}}]),t}(),Ar=function(){function t(){wr(this,t)}return Ir(t,[{key:"addMeasurement",value:function(t){}},{key:"isMeasurementAvailable",value:function(){}},{key:"calculateRssi",value:function(){}},{key:"getMeasurementCount",value:function(){}}]),t}();function kr(t){return(kr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Pr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Rr(r.key),r)}}function Rr(t){var e=function(t,e){if("object"!=kr(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=kr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==kr(e)?e:String(e)}function Or(t,e,n){return e=Dr(e),function(t,e){if(e&&("object"===kr(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,n||[],Dr(t).constructor):e.apply(t,n))}function Dr(t){return(Dr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function xr(t,e){return(xr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var Ur=function(t){function e(t,n){var r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=Or(this,e)).measurement=null,r.systemNoiseVariance=t||1,r.observeNoiseVariance=n||26.96567;var i=r.systemNoiseVariance,o=r.observeNoiseVariance;return r.predictCovariance=(-2*i+Math.sqrt(i*i+4*o))/2,r}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&xr(t,e)}(e,t),n=e,(r=[{key:"addMeasurement",value:function(t){var e=this.measurement||new Tr(t,(new Date).getTime()),n=this.predictCovariance+this.systemNoiseVariance,r=n/(n+this.observeNoiseVariance),i=e.getRssi(),o=t===i?t:i+r*(t-i);this.measurement=new Tr(o,(new Date).getTime()),this.predictCovariance=(1-r)*n}},{key:"isMeasurementAvailable",value:function(){return!0}},{key:"getMeasurementCount",value:function(){return 0}},{key:"calculateRssi",value:function(){var t=this.measurement?this.measurement.getRssi():0;return Math.floor(t)}}])&&Pr(n.prototype,r),i&&Pr(n,i),Object.defineProperty(n,"prototype",{writable:!1}),e}(Ar);function Nr(t){return(Nr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Br(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Mr(r.key),r)}}function Mr(t){var e=function(t,e){if("object"!=Nr(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Nr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Nr(e)?e:String(e)}function Lr(t,e,n){return e=jr(e),function(t,e){if(e&&("object"===Nr(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Fr(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,n||[],jr(t).constructor):e.apply(t,n))}function jr(t){return(jr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Fr(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Hr(t,e){return(Hr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var Gr={android:5e3,ios:5e3},Vr={android:0,ios:0},Yr={android:1e4,ios:25e3},Wr={android:1e4,ios:5e3},qr={android:15e3,ios:15e3},Xr={android:15e3,ios:25e3},$r=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=Lr(this,e))._ble=new U,t._scanner=new pn(Fr(t)),t._monitoring=new Yn(Fr(t)),t._ranging=new ir(Fr(t)),On.setBLELibrary(t._ble),z.setDistanceCalculator(new br),Me.setDistanceCalculator(new br),er.setRssiFilter(Ur),t.platform=t._ble.platform,t._platformDistribute="ios"===t.platform.os?"ios":"android",t.foregroundScanPeriod=Gr[t._platformDistribute],t.foregroundBetweenScanPeriod=Vr[t._platformDistribute],t.backgroundScanPeriod=Yr[t._platformDistribute],t.backgroundBetweenScanPeriod=Wr[t._platformDistribute],Gn.setRegionExitPeriod(qr[t._platformDistribute]),t.regionExitPeriod=qr[t._platformDistribute],t.beaconUnDiscoverPeriod=15e3,t.gatewayUnDiscoverPeriod=15e3,t.buildThingIAQUnDiscoverPeriod=15e3,"cordova"===t.platform.type&&t._checkBackgroundMode(),t._wrapCallback(),t}var n,i,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Hr(t,e)}(e,t),n=e,(i=[{key:"_wrapCallback",value:function(){var t=this,e=t._ble,n=t._scanner,r=t._monitoring,i=t._ranging;e.on("stateChange",t._onBleStateChange.bind(t)),n.on("cycleEnd",t._onScanCycleEnd.bind(t)),n.on("discover",t._onDiscover.bind(t)),n.on("unDiscover",t._onUnDiscover.bind(t)),r.on("update",(function(e){t.emit("update",e)})),r.on("enter",(function(e,n){t.emit("enter",e,n)})),r.on("exit",(function(e){t.emit("exit",e)})),i.on("ranged",(function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.emit.apply(t,["ranged"].concat(n))}))}},{key:"_checkBackgroundMode",value:function(){document.addEventListener("pause",this._onPause.bind(this)),document.addEventListener("resume",this._onResume.bind(this))}},{key:"_onPause",value:function(){this.setBackgroundMode(!0)}},{key:"_onResume",value:function(){this.setBackgroundMode(!1)}},{key:"setBackgroundMode",value:function(t){var e=t?Xr[this._platformDistribute]:qr[this._platformDistribute];this.isBackgroundMode!==t&&(this.isBackgroundMode=t,Gn.setRegionExitPeriod(e),t?this.emit("pause"):this.emit("resume"),this.updateScanPeriod())}},{key:"setForegroundScanPeriod",value:function(t){this.foregroundScanPeriod=t}},{key:"setForegroundBetweenScanPeriod",value:function(t){this.foregroundBetweenScanPeriod=t}},{key:"setBackgroundScanPeriod",value:function(t){this.backgroundScanPeriod=t}},{key:"setBackgroundBetweenScanPeriod",value:function(t){this.backgroundBetweenScanPeriod=t}},{key:"setRegionExitPeriod",value:function(t){this.regionExitPeriod=t}},{key:"setBeaconUnDiscoverPeriod",value:function(t){this.beaconUnDiscoverPeriod=t}},{key:"setGatewayUnDiscoverPeriod",value:function(t){this.gatewayUnDiscoverPeriod=t}},{key:"setBuildThingIAQUnDiscoverPeriod",value:function(t){this.buildThingIAQUnDiscoverPeriod=t}},{key:"getScanPeriod",value:function(){return this.isBackgroundMode?this.backgroundScanPeriod:this.foregroundScanPeriod}},{key:"getBetweenScanPeriod",value:function(){return this.isBackgroundMode?this.backgroundBetweenScanPeriod:this.foregroundBetweenScanPeriod}},{key:"getRegionExitPeriod",value:function(){return this.regionExitPeriod}},{key:"getBeaconUnDiscoverPeriod",value:function(){return this.beaconUnDiscoverPeriod}},{key:"getGatewayUnDiscoverPeriod",value:function(){return this.gatewayUnDiscoverPeriod}},{key:"getBuildThingIAQUnDiscoverPeriod",value:function(){return this.buildThingIAQUnDiscoverPeriod}},{key:"getDeviceUnDiscoverPeriod",value:function(t){return t.getType()===r.DEVICE_TYPE.beacon?this.beaconUnDiscoverPeriod:t.getType()===r.DEVICE_TYPE.gateway?this.gatewayUnDiscoverPeriod:t.getType()===r.DEVICE_TYPE.iaq?this.buildThingIAQUnDiscoverPeriod:void 0}},{key:"updateScanPeriod",value:function(){this._scanner.setScanPeriod(this.getScanPeriod(),this.getBetweenScanPeriod(),this.isBackgroundMode)}},{key:"setDistanceCalculator",value:function(t){z.setDistanceCalculator(t)}},{key:"getDistanceCalculator",value:function(){return z.getDistanceCalculator()}},{key:"setBeaconRssiFilter",value:function(t){er.setRssiFilter(t)}},{key:"getBeaconRssiFilter",value:function(){return er.getRssiFilter()}},{key:"setMaxTrackingAge",value:function(t){er.setMaxTrackingAge(t)}},{key:"getMaxTrackingAge",value:function(){return er.getMaxTrackingAge()}},{key:"setUseTrackingCache",value:function(t){er.setTrackingCache(t)}},{key:"isBLEAvailable",value:function(){return this._ble.isEnabled()}},{key:"_onBleStateChange",value:function(t){var e=this.platform.type,n="";"electron"===e||"node"===e?n=t[0]:"cordova"===e&&(n=t),this.emit("stateChange",{poweredOn:"poweredOn",poweredOff:"poweredOff",unknown:"unknown",resetting:"resetting",unsupported:"unsupported",unauthorized:"unauthorized",on:"poweredOn",off:"poweredOff",turningOn:"turningOn",turningOff:"turningOff"}[n])}},{key:"_onScanCycleEnd",value:function(){var t=this._monitoring,e=this._ranging;t.updateOutsideRegion(),e.emitRangeBeacons(),e.updateDeviceMeasurement()}},{key:"_onDiscover",value:function(t){var e=this._monitoring,n=this._ranging;this.emit("discover",t),t.type===r.DEVICE_TYPE.beacon?(e.updateInsideRegion(t),n.updateRangeState(t)):t.type===r.DEVICE_TYPE.iaq&&n.addDeviceMeasurement(t)}},{key:"_onUnDiscover",value:function(t){this.emit("unDiscover",t)}},{key:"startScan",value:function(t){var e=this._scanner;null!=t?e.setScanType(t):e.setScanType(r.SCANNER_SCAN_TYPE.beacon),this.updateScanPeriod(),e.startScan()}},{key:"stopScan",value:function(){this._scanner.stopScan(),this.updateScanPeriod()}},{key:"startMonitoring",value:function(t){var e=this._monitoring,n=this._scanner;e.addRegion(t),this.updateScanPeriod(),n.startScan()}},{key:"startMonitoringAll",value:function(t){var e=this._monitoring,n=this._scanner;t.forEach((function(t){e.addRegion(t)})),this.updateScanPeriod(),n.startScan()}},{key:"stopMonitoring",value:function(t){var e=this._monitoring,n=this._ranging,r=this._scanner;e.removeRegion(t),0===e.getRegionSize()&&0===n.getRegionSize()&&r.stopScan(),this.updateScanPeriod()}},{key:"stopMonitoringAll",value:function(t){var e=this._monitoring,n=this._ranging,r=this._scanner;t.forEach((function(t){e.removeRegion(t)})),0===e.getRegionSize()&&0===n.getRegionSize()&&r.stopScan(),this.updateScanPeriod()}},{key:"startRanging",value:function(t){var e=this._ranging,n=this._scanner;e.addRegion(t),this.updateScanPeriod(),n.startScan()}},{key:"startRangingAll",value:function(t){var e=this._ranging,n=this._scanner;t.forEach((function(t){e.addRegion(t)})),this.updateScanPeriod(),n.startScan()}},{key:"stopRanging",value:function(t){var e=this._monitoring,n=this._ranging,r=this._scanner;n.removeRegion(t),0===e.getRegionSize()&&0===n.getRegionSize()&&r.stopScan(),this.updateScanPeriod()}},{key:"stopRangingAll",value:function(t){var e=this._monitoring,n=this._ranging,r=this._scanner;t.forEach((function(t){n.removeRegion(t)})),0===e.getRegionSize()&&0===n.getRegionSize()&&r.stopScan(),this.updateScanPeriod()}}])&&Br(n.prototype,i),o&&Br(n,o),Object.defineProperty(n,"prototype",{writable:!1}),e}(C);function Qr(t){return(Qr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Zr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,zr(r.key),r)}}function zr(t){var e=function(t,e){if("object"!=Qr(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Qr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Qr(e)?e:String(e)}var Kr=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=e.id,this.major=e.major||null,this.minor=e.minor||null,this.uuid=e.uuid||null,this.namespaceId=e.namespaceId||null,this.beacons=this.setBeacons(e.beacons)||{}}var e,n,r;return e=t,(n=[{key:"isMatchedBeacon",value:function(t){if(!t)return!1;var e=t.getAddress(),n=this.namespaceId,r=this.major,i=this.minor,o=this.uuid,a=this.beacons;return void 0!==a[e]&&null!==a[e]&&void 0!==t.major&&null!==t.major&&void 0!==t.minor&&null!==t.minor&&(void 0===t.uuid||null===t.uuid)&&null==o&&t.major===r&&t.minor===i||t instanceof it&&void 0!==t.major&&null!==t.major&&void 0!==t.minor&&null!==t.minor&&t.major===r&&t.minor===i||void 0!==t.major&&null!==t.major&&void 0!==t.minor&&null!==t.minor&&void 0!==t.uuid&&null!==t.uuid&&t.major===r&&t.minor===i&&t.uuid===o||!(!t.namespaceId||!n||t.namespaceId!==n)}},{key:"isEqual",value:function(t){return t&&t.id===this.id}},{key:"setBeacons",value:function(t){"string"==typeof t&&(t=[t]);var e={};return t.forEach((function(t){e[t]=t})),this.beacons=e,e}},{key:"addBeacons",value:function(t){"string"==typeof t&&(t=[t]);var e=this.beacons;t.forEach((function(t){e[t]||(e[t]=t)}))}},{key:"removeBeacons",value:function(t){"string"==typeof t&&(t=[t]);var e=this.beacons;t.forEach((function(t){e[t]&&delete e[t]}))}},{key:"getBeacons",value:function(){var t,e=this.beacons,n=[];for(t in e)n.push(e[t]);return n}},{key:"toString",value:function(){return this.id}}])&&Zr(e.prototype,n),r&&Zr(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Jr(t){return(Jr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ti(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,ei(r.key),r)}}function ei(t){var e=function(t,e){if("object"!=Jr(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Jr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Jr(e)?e:String(e)}function ni(t,e,n){return e=ri(e),function(t,e){if(e&&("object"===Jr(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,n||[],ri(t).constructor):e.apply(t,n))}function ri(t){return(ri=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ii(t,e){return(ii=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var oi=.42093,ai=6.9476,si=.54992,ci=function(t){function e(t,n,r){var i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(i=ni(this,e)).coefficient1=t||oi,i.coefficient2=n||ai,i.coefficient3=r||si,i}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ii(t,e)}(e,t),n=e,(r=[{key:"calculateDistance",value:function(t,e){if(!t||0===e)return-1;var n=1*e/(t=-57);return n<1?Math.pow(n,10):this.coefficient1*Math.pow(n,this.coefficient2)+this.coefficient3}}])&&ti(n.prototype,r),i&&ti(n,i),Object.defineProperty(n,"prototype",{writable:!1}),e}(cr);function ui(t){return(ui="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function li(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,fi(r.key),r)}}function fi(t){var e=function(t,e){if("object"!=ui(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=ui(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==ui(e)?e:String(e)}function hi(t,e,n){return e=pi(e),function(t,e){if(e&&("object"===ui(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,n||[],pi(t).constructor):e.apply(t,n))}function pi(t){return(pi=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function di(t,e){return(di=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var yi=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=hi(this,e)).measurement=null,t.isInitialized=!1,t}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&di(t,e)}(e,t),n=e,i=[{key:"setDefaultArmaSpeed",value:function(t){e.armaSpeed=t}}],(r=[{key:"addMeasurement",value:function(t){this.isInitialized||(this.measurement=new Tr(t,(new Date).getTime()),this.isInitialized=!0);var e=this.measurement.getRssi();this.measurement=new Tr(e-this.armaSpeed*(e-t),(new Date).getTime())}},{key:"isMeasurementAvailable",value:function(){return!0}},{key:"getMeasurementCount",value:function(){return 0}},{key:"calculateRssi",value:function(){return this.measurement.getRssi()}}])&&li(n.prototype,r),i&&li(n,i),Object.defineProperty(n,"prototype",{writable:!1}),e}(Ar);function vi(t){return(vi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function mi(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,gi(r.key),r)}}function gi(t){var e=function(t,e){if("object"!=vi(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=vi(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==vi(e)?e:String(e)}function _i(t,e,n){return e=bi(e),function(t,e){if(e&&("object"===vi(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,n||[],bi(t).constructor):e.apply(t,n))}function bi(t){return(bi=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ei(t,e){return(Ei=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}yi.armaSpeed=.1;var wi=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=_i(this,e)).measurements=[],n.expirationTime=t||2e4,n}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ei(t,e)}(e,t),n=e,(r=[{key:"addMeasurement",value:function(t){var e=new Tr(t,(new Date).getTime());this.measurements.push(e)}},{key:"isMeasurementAvailable",value:function(){return this.measurements.length>0}},{key:"getMeasurementCount",value:function(){return this.measurements.length}},{key:"calculateRssi",value:function(){this.refreshMeasurements();var t,e=this.measurements,n=e.length,r=0,i=n-1;n>2&&(r=Math.floor(n/10)+1,i=n-Math.floor(n/10)-2);var o=0;for(t=r;t<=i;t++)o+=e[t].getRssi();return o/(i-r+1)}},{key:"refreshMeasurements",value:function(){var t=[],e=this.expirationTime;this.measurements.forEach((function(n,r){(new Date).getTime()-n.getTimeStamp()<e&&t.push(n)})),this.measurements=t,this.measurements.sort((function(t,e){return t.getRssi()-e.getRssi()}))}},{key:"setExpirationTime",value:function(t){this.expirationTime=t}}])&&mi(n.prototype,r),i&&mi(n,i),Object.defineProperty(n,"prototype",{writable:!1}),e}(Ar);e.default={core:{getBLELibrary:E,Util:l,BLE:U,EventEmitter:C,parser:{Parser:L,BeaconParser:ae,GatewayParser:ke,BuildThingIAQParser:Je},device:{beacon:{Beacon:z,BuildThingBeacon:it,EddyStone:gt,EddyStoneTLM:Ct,EddyStoneUID:Dt,EddyStoneURL:jt,iBeacon:ft},gateway:{BuildThingGateway:de},iaq:{BuildThingIAQ:Me}}},service:{Manager:$r,Scanner:pn,Connection:On,Region:Kr,RegionMonitoringState:Gn,MonitoringData:Vn,Monitoring:Yn,RangedBeacon:er,RegionRangeState:nr,Ranging:ir,calculator:{CurveFittedDistanceCalculator:ci,LogDistancePathDistanceCalculator:br,DistanceConfig:pr,DistanceCalculator:cr},filter:{ArmaRssiFilter:yi,Measurement:Tr,RssiFilter:Ar,KalmanRssiFilter:Ur,RunningAverageRssiFilter:wi}}}}])}));